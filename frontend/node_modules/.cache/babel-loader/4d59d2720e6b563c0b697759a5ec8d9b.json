{"ast":null,"code":"import _construct from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct\";import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var _dec,_class,_dec2,_class3,_class4,_dec3,_class5,_dec4,_class6,_class7;// import * as detectzoooom from 'detect-zoom'; alternative: https://www.npmjs.com/package/zoom-level\n// import {Mixin} from \"ts-mixer\";\nimport{JsType,LModelElement,LNamedElement,MyError,RuntimeAccessible,store,windoww}from\"../joiner\";import Swal from\"sweetalert2\";import Storage from'../data/storage';import{compressToUTF16,decompressFromUTF16}from\"async-lz-string\";// import KeyDownEvent = JQuery.KeyDownEvent; // https://github.com/tombigel/detect-zoom broken 2013? but works\nconsole.warn('loading ts U log');export var Color=(_dec=RuntimeAccessible('Color'),_dec(_class=/*#__PURE__*/function(){function Color(r,g,b){_classCallCheck(this,Color);this.r=void 0;this.g=void 0;this.b=void 0;this.r=r;this.g=g;this.b=b;}_createClass(Color,[{key:\"getHex\",value:function getHex(){return undefined;}},{key:\"mixWith\",value:function mixWith(c){}},{key:\"getHLS\",value:function getHLS(){return undefined;}},{key:\"duplicate\",value:function duplicate(){return undefined;}}],[{key:\"fromHex\",value:function fromHex(hex){return undefined;}},{key:\"fromHLS\",value:function fromHLS(_ref){var h=_ref.h,l=_ref.l,s=_ref.s;return undefined;}}]);return Color;}())||_class);export var U=(_dec2=RuntimeAccessible('U'),_dec2(_class3=(_class4=/*#__PURE__*/function(){function U(){_classCallCheck(this,U);}_createClass(U,null,[{key:\"decompressState\",value:function(){var _decompressState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(state){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return decompressFromUTF16(state);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));function decompressState(_x){return _decompressState.apply(this,arguments);}return decompressState;}()},{key:\"compressedState\",value:function(){var _compressedState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return compressToUTF16(JSON.stringify(store.getState()));case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));function compressedState(){return _compressedState.apply(this,arguments);}return compressedState;}()},{key:\"isOffline\",value:function isOffline(){return Storage.read('offline')==='true';}},{key:\"refresh\",value:function refresh(){window.location.reload();}},{key:\"extractByKey\",value:function extractByKey(dict,path){var keys=path.split('.');var topic=keys[0];var data=dict[topic];var values=[];if(!Array.isArray(data))return undefined;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var d=_step.value;var _value=d;var _iterator2=_createForOfIteratorHelper(keys),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var k=_step2.value;if(_value.hasOwnProperty(k))_value=_value[k];}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}values.push(_value);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return values;}},{key:\"extractKeys\",value:function extractKeys(dict){var keys=[];function traverse(obj,path){for(var _key in obj){if(typeof obj[_key]==='object')traverse(obj[_key],path?\"\".concat(path,\".\").concat(_key):_key);else keys.push(path?\"\".concat(path,\".\").concat(_key):_key);}}for(var _key2 in dict){traverse(dict[_key2][0],_key2);}return keys;}// damiano: eseguire una funzione costa in performance, anche se è brutto fare questi cast\n},{key:\"wrapper\",value:function wrapper(obj){return obj;}// damiano: mi sa che c'era un metodo l.__serialize or something\n},{key:\"json\",value:function json(dElement){return JSON.parse(JSON.stringify(dElement.__raw));}},{key:\"hexToPalette\",value:function hexToPalette(){for(var _len=arguments.length,hexs=new Array(_len),_key3=0;_key3<_len;_key3++){hexs[_key3]=arguments[_key3];}return{type:\"color\",value:hexs.map(function(hex){if(hex[0]==='#')hex=hex.substring(1);var r,g,b,a=1;if(hex.length===4){a=Number.parseInt('0x'+hex[3]+hex[3])/255;hex=hex.substring(0,3);}if(hex.length===7){a=Number.parseInt('0x'+hex[5]+hex[6])/255;hex=hex.substring(0,6);}Log.exDev(hex.length!==3&&hex.length!==6,\"invalid hex length\",{hex:hex,a:a});var i=0;if(hex.length===3){r=Number.parseInt('0x'+hex[i]+hex[i++]);g=Number.parseInt('0x'+hex[i]+hex[i++]);b=Number.parseInt('0x'+hex[i]+hex[i]);}else{r=Number.parseInt('0x'+hex[i++]+hex[i++]);g=Number.parseInt('0x'+hex[i++]+hex[i++]);b=Number.parseInt('0x'+hex[i++]+hex[i]);}return{r:r,g:g,b:b,a:a};})};}},{key:\"fatherChain\",value:function fatherChain(me){if(!me)return[];// without this line go through delete error\nvar fathers=[me.id];var toCheck=[me];while(toCheck.length>0){var element=toCheck.pop();if(element&&element.father){fathers.push(element.father.id);toCheck.push(element.father);}}return fathers;}/// maxDepth = 2 is the minimum to check the content of objects inside usageDeclarations or node state. like node.errors.naming\n},{key:\"isShallowEqualWithProxies\",value:function isShallowEqualWithProxies(obj1,obj2){var skipKeys=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var out=arguments.length>3?arguments[3]:undefined;var depth=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var maxDepth=arguments.length>5&&arguments[5]!==undefined?arguments[5]:2;var returnIfMaxDepth=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;var tobj1=obj1===null?'null':typeof obj1;var tobj2=obj2===null?'null':typeof obj2;if(obj1===obj2){// if (out) { out.reason = \"identical objects\"; }\nreturn true;}if(tobj1!==tobj2){if(out){out.reason=\"type changed: \"+tobj1+\" --> \"+tobj2;}return false;}// at this point: same type, but different values\nswitch(tobj1){default:// primitive with different values\nconsole.error(\"unexpected case in isshallowequal:\",{tobj1:tobj1,obj1:obj1,obj2:obj2});if(out){if(undefined===tobj1)out.reason='primitive value newly introduced';else if(undefined===tobj2)out.reason='primitive value got deleted';else out.reason='primitive value changedd';}return false;case'string':case'boolean':// primitive with different values\nif(out){if(undefined===tobj1)out.reason='primitive value newly introduced';else if(undefined===tobj2)out.reason='primitive value got deleted';else out.reason='primitive value changedd';}return false;case\"number\":// if both re nan it fails\n// NB: infinities are not nan, and they compare with === like normal numbers. weird js...\nif(isNaN(obj1)&&isNaN(obj2))return true;if(out)out.reason='number changed';return false;case\"function\":if(obj1.toString()===obj2.toString())break;if(out)out.reason='function body changed';return false;case\"object\":var o1Raw=obj1.__raw;var o2Raw=obj2.__raw;if(o1Raw){if(!o2Raw){if(out)out.reason=o1Raw.className+'replaced by another object type:'+(o2Raw===null||o2Raw===void 0?void 0:o2Raw.className);return false;}obj1=o1Raw;obj2=o2Raw;}// for proxies and DObjects\nif(obj1.clonedCounter!==undefined&&obj2.clonedCounter!==obj1.clonedCounter){if(out)out.reason='clonedCounter difference '+obj1.clonedCounter+' != '+obj2.clonedCounter;return false;}/*\r\n                if (obj1.className !== obj2.className) {\r\n                 removed: too unlikely to happen that a DObject is raplaced in the same path with another type of DObject with same clonedCounter\r\n                 nd it's checked anyway in for(let key in obj1)\r\n                    if (out) out.reason = o1Raw.className + 'replaced by another object type:' + o2Raw?.className;\r\n                    return false;\r\n                }*/if(Array.isArray(obj1)){if(obj1.length!==obj2.length){if(out)out.reason='array length different: '+obj1.length+\" !== \"+obj2.length;return false;}if(!Array.isArray(obj2)){if(out)out.reason='array became an object';return false;}}if(depth>maxDepth){// to debug and see where is too deep, make returnIfMaxDepth = false, so the path is displayed in out.reason\nif(out)out.reason='max depth reached, assumed '+returnIfMaxDepth;return returnIfMaxDepth;}for(var _key4 in obj1){if(_key4 in skipKeys)continue;var oldp=obj2[_key4];var newp=obj1[_key4];if(oldp===newp)continue;if(!U.isShallowEqualWithProxies(newp,oldp,skipKeys,out,depth+1,maxDepth,returnIfMaxDepth)){if(out)out.reason='['+_key4+']'+out.reason;return false;}}// just check for keys that were in props and are not in nextProps\nfor(var _key5 in obj2){if(_key5 in skipKeys||_key5 in obj1)continue;if(out)out.reason=\"deleted subobject property: \"+_key5;return false;}// else retIfMaxDepthReached; split the above if\n}return true;}},{key:\"deepEqual\",value:function deepEqual(x,y){var tx=typeof x,ty=typeof y;return x&&y&&tx==='object'&&tx===ty?Object.keys(x).length===Object.keys(y).length&&Object.keys(x).every(function(key){return U.deepEqual(x[key],y[key]);}):x===y;}},{key:\"sleep\",value:function sleep(s){return new Promise(function(resolve){return setTimeout(resolve,s*1000);});}},{key:\"getRandomString\",value:function getRandomString(length){var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';var randomString='';var index=0;while(index<length){var randomNumber=Math.floor(Math.random()*characters.length);randomString+=characters.charAt(randomNumber);index+=1;}return randomString;}},{key:\"alert\",value:function alert(title,text){var color='text-';switch(title.toLowerCase()){case'error':color+='danger';break;default:color+='primary';}var html='<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>';html+=\"<div><b><label class='fs-5 mb-2 text-uppercase \".concat(color,\"'>\").concat(title,\"</label></b><hr/>\");html+=\"<label class='fs-6 mt-3'>\".concat(text,\"</label><br/>\");var result=Swal.fire({html:html,backdrop:false,showCloseButton:true,showConfirmButton:false//confirmButtonText: 'GOT IT'\n});}},{key:\"popup\",value:function popup(element){var html='<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>'+element;var result=Swal.fire({html:html,backdrop:false,showCloseButton:true,showConfirmButton:false//confirmButtonText: 'GOT IT'\n});}},{key:\"filteredPointedBy\",value:function filteredPointedBy(data,label){var models=[];var _iterator3=_createForOfIteratorHelper(data.pointedBy),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dict=_step3.value;var pointedBy=dict.source.split('.');if(pointedBy.length===3&&pointedBy[2]===label){models.push(LModelElement.fromPointer(pointedBy[1]));}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return models;}},{key:\"getFatherFieldToDelete\",value:function getFatherFieldToDelete(data){var father=data.father;var field='';switch(father.className+'|'+data.className){// DPackage\ncase'DModel|DPackage':field='packages';break;case'DPackage|DPackage':field='subpackages';break;// DEnumerator and DClass\ncase'DPackage|DEnumerator':case'DPackage|DClass':field='classifiers';break;// DAttribute\ncase'DClass|DAttribute':field='attributes';break;// DReference\ncase'DClass|DReference':field='references';break;// DOperation\ncase'DClass|DOperation':field='operations';break;// DEnumLiteral\ncase'DEnumerator|DEnumLiteral':field='literals';break;// DObject\ncase'DModel|DObject':field='objects';break;// DParameter\ncase'DOperation|DParameter':field='parameters';break;// DValue\ncase'DObject|DValue':field='features';break;// Error\ndefault:return null;}return field;}},{key:\"initializeValue\",value:function initializeValue(typeclassifier){// if(!classifier) return 'null';\nvar pointer=typeof typeclassifier==='string'?typeclassifier:typeclassifier===null||typeclassifier===void 0?void 0:typeclassifier.id;var me=LNamedElement.fromPointer(pointer);switch(me===null||me===void 0?void 0:me.name){default:case'EString':return'';case'EChar':return'a';case'EInt':return'0';case'ELong':return'0';case'EShort':return'0';case'Byte':return'0';case'EFloat':return'0';case'EDouble':return'0';case'EBoolean':return'false';case'EDate':return new Date().toJSON().slice(0,10);}return'null';}},{key:\"orderChildrenByTimestamp\",value:function orderChildrenByTimestamp(context){var children=context.proxyObject.children;if(children&&children.length>0){var orderedChildren=new Map();var _iterator4=_createForOfIteratorHelper(children),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var child=_step4.value;var timestamp=child.id.slice(-13);orderedChildren.set(+timestamp,child);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}orderedChildren=new Map(_toConsumableArray(orderedChildren.entries()).sort());return _toConsumableArray(orderedChildren.values());}else return[];}},{key:\"followPath\",value:function followPath(base,path){var patharr=path.split('.');var base0=base;var ret={};ret.keys=patharr;ret.chain=[base];var lastObject=base;for(var i=0;i<patharr.length;i++){var _path=ret.lastkey=patharr[i];lastObject=base;base=base[_path];ret.chain.push(base);if(typeof base!==\"object\"||i+1===patharr.length){ret.failedRemainingPath=patharr.slice(i);ret.lastval=base;ret.lastObject=lastObject;return ret;}}throw new Error(\"followPath should never reach here\");return ret;}},{key:\"multiReplaceAllKV\",value:function multiReplaceAllKV(a){var kv=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var keys=[];var vals=[];var i;for(i=0;i<kv.length;i++){keys.push(kv[i][0]);vals.push(kv[i][0]);}return U.multiReplaceAll(a,keys,vals);}// if replacement is empty, it will be filled with '';\n// if replacement length < searchText, replacement will be filled with copies of his elements cycling from 0 to his length until his length matches searchText.length\n},{key:\"multiReplaceAll\",value:function multiReplaceAll(a){var searchText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var replacement=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];// Log.ex(searchText.length !== replacement.length, 'search and replacement must be have same length: ' + searchText.length + \"vs\" + replacement.length + \" \" +JSON.stringify(searchText) + \"   \" + JSON.stringify(replacement));\nvar i=-1;while(replacement.length!==0&&replacement.length<searchText.length){replacement.push(replacement[++i]);}i=-1;while(++i<searchText.length){a=U.replaceAll(a,searchText[i],replacement[i]);}return a;}},{key:\"replaceAll\",value:function replaceAll(str,searchText,replacement){var debug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var warn=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(!str){return str;}return str.split(searchText).join(replacement||'');}},{key:\"toFileName\",value:function toFileName(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'nameless.txt';if(!a){a='nameless.txt';}a=U.multiReplaceAll(a.trim(),['\\\\','//',':','*','?','<','>','\"','|'],['[lslash]','[rslash]',';','°','_','{','}','\\'','!']);return a;}// warn: this check if the scope containing the function is strict, to check if a specific external scope-file is strict\n// you have to write inline the code:        var isStrict = true; eval(\"var isStrict = false\"); if (isStrict)...\n// @ts-ignore\n},{key:\"objectMergeInPlace\",value:// merge properties with first found first kept (first parameters have priority on override). only override null|undefined values, not (false|0|'') values\nfunction objectMergeInPlace(output){var out=output;for(var _len2=arguments.length,objarr=new Array(_len2>1?_len2-1:0),_key6=1;_key6<_len2;_key6++){objarr[_key6-1]=arguments[_key6];}if(objarr){var _iterator5=_createForOfIteratorHelper(objarr),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var o=_step5.value;if(o&&typeof o===\"object\")for(var _key7 in o){var _out$_key;// noinspection BadExpressionStatementJS,JSUnfilteredForInLoop\n(_out$_key=out[_key7])!==null&&_out$_key!==void 0?_out$_key:out[_key7]=o[_key7];}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}}},{key:\"log\",value:function log(obj){var label=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'###';console.clear();console.log(label,obj);}},{key:\"removeEmptyObjectKeys\",value:function removeEmptyObjectKeys(obj){for(var _i=0,_Object$keys=Object.keys(obj);_i<_Object$keys.length;_i++){var _key8=_Object$keys[_i];if(obj[_key8]===null||obj[_key8]===undefined)delete obj[_key8];}}// usage example: objectMergeInPlace_conditional(baseobj, (out, key, current) => !out[key] && current[key];\n// culprit of \"couldn't find intersection\" problem: condition type: (out:A&B, key: string | number, current:B, objarr?: B[], indexOfCurrent?: number) => boolean\n},{key:\"objectMergeInPlace_conditional\",value:function objectMergeInPlace_conditional(output,condition){var out=output;var i=0;for(var _len3=arguments.length,objarr=new Array(_len3>2?_len3-2:0),_key9=2;_key9<_len3;_key9++){objarr[_key9-2]=arguments[_key9];}for(var _i2=0,_objarr=objarr;_i2<_objarr.length;_i2++){var o=_objarr[_i2];for(var _key10 in o){if(condition(out,_key10,o,objarr,i++))out[_key10]=o[_key10];}}return out;}},{key:\"buildFunctionDocumentation\",value:function buildFunctionDocumentation(f){Log.e(!JsType.isFunction(f),'getFunctionSignature() parameter must be a function',f);// let parameters: {name: string, defaultVal: string, typedesc: string}[] = []; //{name: '', defaultVal: undefined, typedesc: ''};\nvar ret={parameters:[],returns:undefined,f:f,fname:undefined,isLambda:null,signature:''};var str=f.toString();var starti=str.indexOf('(');var endi;var parcounter=1;for(endi=starti+1;endi<str.length;endi++){if(str[endi]===')'&&--parcounter===0)break;if(str[endi]==='(')parcounter++;}var parameterStr=str.substring(starti+1,endi);// console.log('getfuncsignature starti:', starti, 'endi', endi, 'fname:', str.substr(0, starti), 'parameterStr:', parameterStr);\nret.fname=str.substr(0,starti).trim();ret.fname=ret.fname.substr(0,ret.fname.indexOf(' ')).trim();// 2 casi: anonimo \"function (par1...){}\" e \"() => {}\", oppure nominato: \"function a1(){}\"\nif(ret.fname===''||ret.fname==='function')ret.fname=undefined;// 'anonymous function';\nvar returnstarti=str.indexOf('/*',endi+1);var returnendi=-1;var bodystarti=str.indexOf('{',endi+1);if(returnstarti===-1||bodystarti!==-1&&bodystarti<returnstarti){// no return type or comment is past body\nret.returns=undefined;}else{returnendi=str.indexOf('*/',returnstarti+2);ret.returns=str.substring(returnstarti+2,returnendi).trim();bodystarti=str.indexOf('{',returnendi);}if(ret.returns==='')ret.returns=undefined;// is lambda if do not have curly body or contains => between return comment and body\n// console.log('isLambda:', bodystarti, str.substring(Math.max(endi, returnendi)+1, bodystarti));\nret.isLambda=bodystarti===-1||str.substring(window.Math.max(endi,returnendi)+1,bodystarti).trim()==='=>';var regexp=/([^=\\/\\,]+)(=?)([^,]*?)(\\/\\*[^,]*?\\*\\/)?,/g;// only problem: the last parameter won't match because it does not end with \",\", so i will append it everytime.\nvar match;while(match=regexp.exec(parameterStr+',')){// match[0] is always the full match (not a capture group)\n// match[2] can only be \"=\" or empty string\n// nb: match[4] can be \"/*something*/\" or \",\" a single , without spaces.\nvar par={name:match[1],defaultVal:match[3],typedesc:match[4]&&match[4].length>1?match[4]:null};par.name=par.name.trim();par.defaultVal=par.defaultVal?par.defaultVal.trim():undefined;par.typedesc=par.typedesc&&par.typedesc&&par.typedesc.length>1?par.typedesc.substring(2,par.typedesc.length-2).trim()||null:null;ret.parameters.push(par);}// set signature\nret.signature=''+(ret.fname?'/*'+ret.fname+'*/':'')+'(';var i;for(i=0;i<ret.parameters.length;i++){var _par=ret.parameters[i];ret.signature+=(i===0?'':', ')+_par.name+(_par.typedesc?'/*'+_par.typedesc+'*/':'')+(_par.defaultVal?' = '+_par.defaultVal:'');}ret.signature+=')'+(ret.returns?'/*'+ret.returns+'*/':'');return ret;}// NB: need to use result.apply(context) to have a usable \"this\"\n// if you want to pass a parameter to the function, pass it through scope insteand !! AND UNDECLARE the parameter in function string signature !!\n//if inner funcstr have parameters, need to declare them as codestrParamNames arr, and pass them in that order, after the scope which is fixed as first argument.\n// rest values are declared with ellipsis in codestrParamNames\n// !!! scope passed here, is only used for keys. values are not bound. scope is set as first parameter when you call the function.\n// context is bound, but can be re-assigned by calling .bind(), .call() or .apply(), so neither context nor scope assigned in parsing phase are final.\n// innerfunc params do not have to match the name on the string function, but only the correct amount. they can have any name i think, but i list them correctly to documentate.\n},{key:\"parseFunctionWithContextAndScope\",value:function parseFunctionWithContextAndScope(codeStr0,context0,scope0,codestrParamNames){var protectShallowValues=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var doIdentifierValidation=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(!codestrParamNames)codestrParamNames=[];var codeStr=typeof codeStr0===\"function\"?codeStr0.toString():codeStr0;var scopeParams='';var scope;var context;if(protectShallowValues){if(scope0){//scope = {...scope0}; scope.__proto__ = scope0.__proto__; // for...in gets values in __proto__ too, {...o} instead gets only hasOwnProperty copied\nscope={};for(var k in scope0){scope[k]=scope0[k];}}else scope=undefined;if(context0){// context = {...context0}; context.__proto__ = context0.__proto__;\ncontext={};for(var _k in context0){context[_k]=context0[_k];}}else context=undefined;}else{scope=scope0;context=context0;}if(scope){var scopekeys=Object.keys(scope);if(doIdentifierValidation)scopekeys.map(function(key){var _key11;key=((_key11=key)===null||_key11===void 0?void 0:_key11.trim())||'';if(!key||!U.validIdentfierRegexp.test(key))return undefined;return key;}).filter(function(k){return!!k;});scopeParams='{'+scopekeys.join(',')+'}';}var innerFuncParams=codestrParamNames.join(',');var _jevalfunc=undefined;// is set by eval\nvar evalmode=false;console.log('parseFunctionWithContextAndScope',{codeStr:codeStr,scope:scope,context:context,params:{scopeParams:scopeParams,innerFuncParams:innerFuncParams}});scopeParams=scopeParams&&innerFuncParams?scopeParams+','+innerFuncParams:scopeParams+innerFuncParams;if(evalmode){codeStr=\"_jevalfunc = function (\"+scopeParams+\") { return (\"+codeStr+\")(\"+innerFuncParams+\") }\";eval(codeStr);}else{_jevalfunc=new Function(scopeParams,\" return (\"+codeStr+\")(\"+innerFuncParams+\")\");}console.log('parseFunctionWithContextAndScope',{_jevalfunc:_jevalfunc,params:{scopeParams:scopeParams}});if(context)return _jevalfunc.bind(context);else return _jevalfunc;}/*\r\n    public static evalInContextAndScope<T = any>(...a:any):any {return undefined}\r\n    public static evalInContextAndScopeNew<T = any>(...a:any):any {return undefined}*/},{key:\"evalInContextAndScopeNew\",value:function evalInContextAndScopeNew(codeStr,context0,injectScopeToo,protectShallowValues,doIdentifierValidation){return U.evalInContextAndScope(codeStr,context0,injectScopeToo?context0:undefined,protectShallowValues,doIdentifierValidation);}// important! this is a simplified version. the correct one allows unicode chars and is 11kb long of regex expression\n},{key:\"evalInContextAndScope\",value:// warn: if return is not explicitly inserted (if that's the case set imlicitReturn = false) with a scope and the code have multiple statemepts it will fail.\n// can modify scope AND context\n// warn: can access global scope (window)\n// if the context (this) is missing it will take the scope as context.\n// warn: cannot set different scope and context, \"this\" della funzione sovrascrive anche il \"this\" interno allo scope come chiave dell'oggetto\n// warn: !context && scope is impossible, so it gets autofixed by assigning context = scope; check Log messages inside function for details.\n// warn: context && scope is impossible if context !== scope and cannot be hotfixed, that will cause a crash.\nfunction evalInContextAndScope(codeStr,scope0,context0,protectShallowValues,doIdentifierValidation){// console.log('evalInContextAndScope', {codeStr, scope, context});\n// scope per accedere a variabili direttamente \"x + y\"\n// context per accedervi tramite this, possono essere impostati come diversi.\nif(!scope0&&!context0){Log.ex(true,'evalInContextAndScope: must specify at least one of scope || context',{codeStr:codeStr,scope0:scope0,context0:context0});}// scope.this = scope.this || context || scope; non funziona\n// console.log('\"with(this){ return eval( \\'\" + codeStr + \"\\' ); }\"', \"with(this){ return eval( '\" + codeStr + \"' ); }\");\n// eslint-disable-next-line no-restricted-syntax,no-with\n// if (allowScope && allowContext) { return function(){ with(this){ return eval( '\" + codeStr + \"' ); }}.call(scopeAndContext); }\n// if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr + \"' ); }\").call(scopeAndContext); }\nvar _ret=null;var scope;var context;if(protectShallowValues){if(scope0){scope=_objectSpread(_objectSpread({},scope0),{},{__proto__:scope0.__proto__});scope.__proto__=scope0.__proto__;}else scope=undefined;if(context0){context=_objectSpread(_objectSpread({},context0),{},{__proto__:context0.__proto__});context.__proto__=context0.__proto__;}else context=undefined;}else{scope=scope0;context=context0;}Log.w(!!(!context&&scope),\"evalInContextAndScope() Context is mandatory, as scope && !context case is not working properly \\n\"+\"because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\\n\"+\"Autofixed by assigning context = scope;\");Log.eDev(!!(context&&scope&&context!==scope),\"evalInContextAndScope() Context and scope cannot be different if both present.\\n\"+\"Because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\");if(!context)context=scope;// se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\n/*\r\n        if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr.replace(/'/g, \"\\\\'\") + \"' ); }\").call(scopeAndContext); }\r\n        if (!allowScope && allowContext) { return new Function( \"return eval( '\" + codeStr + \"' );\").call(scopeAndContext); }\r\n        if (allowScope && !allowContext) { return eval(\"with(scopeAndContext){ \" + codeStr + \" }\"); }*/ //      U.pe(!!scope && U.isStrict(), 'cannot change scope while in strict mode (\"use strict\")');\nvar prefixDeclarations=\"\",postfixDeclarations='';if(scope){if(U.isStrict){for(var _key12 in scope){if(doIdentifierValidation){_key12=_key12.trim();if(!_key12||!U.validIdentfierRegexp.test(_key12))continue;}// anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\nprefixDeclarations+=\"const \"+_key12+\"=this.\"+_key12+\";\";postfixDeclarations=\"\";}}else{prefixDeclarations=\"with(\"+(context?\"this._eval.\":\"\")+\"scope){ \";postfixDeclarations=\" }\";}}if(scope&&context){if(typeof codeStr===\"function\"){codeStr=codeStr.toString();}// functions cannot change scope (with statement is deprecated)\ncontext._eval={__codeStr:codeStr};// necessary to reach this._eval.codeStr inside the eval()\n// console.log(\"evalincontextandscope: \", {fullCodeStr: prefixDeclarations + \"return eval( this._eval._codeStr );\" + postfixDeclarations, codeStr});\n_ret=new Function(prefixDeclarations+\"; return eval( this._eval.__codeStr );\"+postfixDeclarations).call(context);delete context._eval;}else if(!scope&&context){if(typeof codeStr===\"function\"){_ret=function _ret(){var _ref2;for(var _len4=arguments.length,a=new Array(_len4),_key13=0;_key13<_len4;_key13++){a[_key13]=arguments[_key13];}return(_ref2=codeStr).call.apply(_ref2,[context].concat(a));};// _ret = (...a: any)=>codeStr.call(context, ...a);\n}else{// cannot just eval(codeStr).call(context) because the result might not be a function but only a piece of code or an expression\ncontext._eval={__codeStr:codeStr};// necessary to reach this._eval.codeStr inside the eval()\n_ret=new Function(\"return eval( this._eval.__codeStr );\").call(context);delete context._eval;// this below  is not good, as i need to quote the expanded result of codeStr,\n// but since it might contain quotes as well i would need to escape them too.\n// _ret = new (Function as any)(\"return eval( \" + codeStr + \" );\").call(context);\n}}else if(scope&&!context){// NB: potrei creare lo scope con \"let key = value;\" per ogni chiave, ma dovrei fare json stringify e non è una serializzazione perfetta e può dare eccezioni(circolarità)\n// console.log({isStrict: U.isStrict, eval: \"eval(\" + prefixDeclarations + codeStr + postfixDeclarations + \")\"});\nif(typeof codeStr===\"function\"){codeStr=codeStr.toString();}// functions cannot change scope (with statement is deprecated)\n_ret=eval(prefixDeclarations+codeStr+postfixDeclarations);}return _ret;}//T extends ( ((...args: any[]) => any) | (() => any)\n},{key:\"execInContextAndScope\",value:function execInContextAndScope(func,parameters,scope,context){Log.l(false,'execInCtxScope',{func:func,parameters:parameters,scope:scope,context:context});var ret;var _eval={context:context,scope:scope,func:func,parameters:parameters||[]};var prefixDeclarations=\"\",postfixDeclarations='';if(scope){if(U.isStrict){for(var _key14 in scope){// anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\nprefixDeclarations+=\"const \"+_key14+\" = this.\"+_key14+\"; \";postfixDeclarations=\"\";}}else{prefixDeclarations=\"with(\"+(context?\"this._eval.\":\"\")+\"scope){ \";postfixDeclarations=\" }\";}}if(!scope&&!context){Log.ex(true,'execInContextAndScope: must specify at least one of scope || context',{func:func,scope:scope,context:context});}if(!context)context=scope;// se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\nif(scope&&context){context._eval=_eval;// will the scope work with \"with\" outside the function body?\nret=new Function(prefixDeclarations+\"return this._eval.func.apply(this._eval.context, this._eval.parameters);\"+postfixDeclarations).call(context);delete context._eval;}if(!scope&&context){return _eval.func.apply(_eval.context,_eval.parameters);}if(scope&&!context){// todo: non credo funzioni, _eval non dovrebbe essere accessibile dopo la \"with\" forse devo fare scope._eval = _eval;\nreturn eval(prefixDeclarations+\"return _eval.func(..._eval.parameters);\"+postfixDeclarations);}return ret;}// warn: aggiunge un layer di scope ma ha accesso anche agli scope precedenti (del chiamante della funzione e superiori)\n// warn2: può modificare lo scope internamente all'eval ma ogni cambiamento è perso all'uscita dell'esecuzione (modifica copie)\n// warn3: gli oggetti nested variabili dentro oggetti dello scope) sono modificabili con modifiche persistenti perchè vengono pasate per puntatore.\n// warn4: richiede un return per leggere il valore\n// insomma: sta funzione fa schifo ma non c'è di meglio e non puoi nè permettere nè vietare completamente le modifiche allo scope.\n},{key:\"execInScope_DO_NOT_USE\",value:function execInScope_DO_NOT_USE(codeStr,scope){return _construct(Function,_toConsumableArray(Object.keys(scope)).concat([codeStr])).apply(void 0,_toConsumableArray(Object.values(scope)));}// can modify context in-place, requires \"this\" before variable\n},{key:\"evalInContext\",value:function evalInContext(js,context){//# Return the results of the in-line anonymous function we .call with the passed context\nreturn function(){return eval(js);}.call(context);}/*\r\n    / *\r\n    // NO: ha 2 problemi: il contesto non è persistente e puoi accedere al contesto solo con \"this\" ma non direttamente usando i nomi delle variabili\r\n    public static evalInContext(contextObj: GObject, code: string): any{\r\n        return U.evalContextFunction.call(contextObj || {}, code);\r\n    }\r\n\r\n    // only create a context for \"this\", wich is bound by .call(), should never be called without .call()\r\n    private static evalContextFunction(code: string): any { eval(code); }\r\n*/},{key:\"highOrderFunctionExampleTyped\",value:function highOrderFunctionExampleTyped(func){var funcName=func.cname||func.name;// Return a new function that tracks how long the original took\nreturn function(){console.time(funcName);var results=func.apply(void 0,arguments);console.timeEnd(funcName);return results;};}},{key:\"asClass\",value:function asClass(obj,classe){var elseReturn=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return obj instanceof classe?obj:elseReturn;}},{key:\"asString\",value:function asString(propKey){var elseReturn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return typeof propKey==='string'?propKey:elseReturn;}},{key:\"isString\",value:function isString(propKey){return typeof propKey==='string';}},{key:\"loadScript\",value:function loadScript(path){var useEval=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var script=document.createElement('script');script.src=path;script.type='text/javascript';Log.eDev(useEval,'loadScript','useEval','useEval todo. potrebbe essere utile per avviare codice fuori dalle funzioni in futuro.');document.body.append(script);}},{key:\"ancestorArray\",value:function ancestorArray(domelem,stopNode){var includeSelf=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;// [0]=element, [1]=father, [2]=grandfather... [n]=document\nif(domelem===null||domelem===undefined){return[];}var arr=includeSelf?[domelem]:[];var tmp=domelem.parentNode;while(tmp!==null&&tmp!==stopNode){arr.push(tmp);tmp=tmp.parentNode;}return arr;}},{key:\"toHtml\",value:function toHtml(html,container){var containerTag=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'div';if(!container){container=document.createElement(containerTag);}Log.e(!html||html==='','toHtml','require a non-empty string',html);container.innerHTML=html;var ret=container.firstChild;if(ret)container.removeChild(ret);return ret;}},{key:\"levenshtein\",value:function levenshtein(a,b){if(!a.length)return b.length;if(!b.length)return a.length;var cost=a.charAt(a.length-1)===b.charAt(b.length-1)?0:1;return window.Math.min(U.levenshtein(a.substring(0,a.length-1),b)+1,U.levenshtein(a,b.substring(0,b.length-1))+1,U.levenshtein(a.substring(0,a.length-1),b.substring(0,b.length-1))+cost);}},{key:\"getClosestPropertyName\",value:function getClosestPropertyName(names,name){var lowest=Infinity;return names.reduce(function(previous,current){var distance=U.levenshtein(current,name);if(distance<lowest){lowest=distance;return current;}return previous;},'');}},{key:\"getClosestPropertyNames\",value:function getClosestPropertyNames(names,name){var distances=names.map(function(value){return{distance:U.levenshtein(value,name),value:value};});return distances.sort(function(a,b){return a.distance-b.distance;}).map(function(e){return e.value;});}//todo for console\n},{key:\"autoCorrectProxy\",value:function autoCorrectProxy(target,recursive,logger){return new Proxy(target,{get:function get(target,name){var namestr=U.asString(name,null);if(!namestr)return undefined;if(name in target)return target[namestr];var suggestions=U.getClosestPropertyNames(Object.getOwnPropertyNames(target),namestr);logger.warn(\"\".concat(namestr,\" is not defined, did you meant \").concat(suggestions[0],\"?\\t\\nother suggestions:\"),suggestions);return namestr&&target[suggestions[0]];}});}},{key:\"arrayRemoveAll\",value:function arrayRemoveAll(arr,elem){var debug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var index;if(!arr)return;while(true){index=arr.indexOf(elem);Log.l(debug,'ArrayRemoveAll: index: ',index,'; arr:',arr,'; elem:',elem);if(index===-1){return;}arr.splice(index,1);Log.l(debug,'ArrayRemoveAll RemovedOne:',arr);}}},{key:\"arrayUnique\",value:function arrayUnique(arr){return _toConsumableArray(new Set(arr));}},{key:\"fileReadContent\",value:function fileReadContent(file,callback){var textType=/text.*/;try{if(!file.type||file.type.match(textType)){var reader=new FileReader();reader.onload=function(e){callback(''+reader.result);};reader.readAsText(file);return;}}catch(e){Log.e(true,\"Exception while trying to read file as text. Error: |\",e,\"|\",file);}Log.e(true,\"Wrong file type found: |\",file?file.type:null,\"|\",file);}},{key:\"fileRead\",value:function fileRead(onChange,extensions,readContent){// $(document).on('change', (e) => console.log(e));\nconsole.log(\"importEcore: pre file reader\");myFileReader.show(onChange,extensions,readContent);}},{key:\"clear\",value:function clear(htmlNode){if(htmlNode)while(htmlNode.firstChild){htmlNode.removeChild(htmlNode.firstChild);}}},{key:\"clearAllTimeouts\",value:function clearAllTimeouts(){var highestTimeoutId=setTimeout(function(){},1);for(var i=0;i<highestTimeoutId;i++){clearTimeout(i);}}},{key:\"getStackTrace\",value:function getStackTrace(){var sliceCalls=arguments.length>0&&arguments[0]!==undefined?arguments[0]:2;var ret=Error().stack;// try { var a = {}; a.debug(); } catch(ex) { ret = ex.stack; }\n// if (Array.isArray(ret)) return ret;\nif(!ret)return['UnknownStackTrace'];var arr=ret.split('\\n');// first 2 entries are \"Erorr\" and \"getStackTrace()\"\nreturn sliceCalls>0?arr.slice(sliceCalls):arr;}// 0 for caller, 1 for caller of caller, -1 for current function, up to -4 to see internal layers (useless)\n},{key:\"getCaller\",value:function getCaller(){var stacksToSkip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var stack=this.getStackTrace(4);// erase getStackTrace() and isFirstTimeCalled() + Error() first stack + n° of layer the caller wants.\nreturn stack[stacksToSkip];}},{key:\"isFirstTimeCalledByThisLine\",value:// todo: use in Log.once\n// returns true only the first time this line is reached, false in loops >1 loop, false in recursion >1 recursion, false even days after the first execution unless the page is reloaded\nfunction isFirstTimeCalledByThisLine(){var stacksToSkip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var caller=this.getCaller(stacksToSkip);if(U.gotcalledby[caller])return false;return U.gotcalledby[caller]=true;}},{key:\"lineKey\",value:function lineKey(){return this.getCaller(0);}// Prevent the backspace key from navigating back.\n},{key:\"preventBackSlashHistoryNavigation\",value:function preventBackSlashHistoryNavigation(event){if(!event||!event.key||event.key.toLowerCase()!=='backspace'){return true;}var types=['text','password','file','search','email','number','date','color','datetime','datetime-local','month','range','search','tel','time','url','week'];var srcElement=$(event['srcElement']||event.target);var disabled=srcElement.prop('readonly')||srcElement.prop('disabled');if(!disabled){if(srcElement[0].isContentEditable||srcElement.is('textarea')){return true;}if(srcElement.is('input')){var type=srcElement.attr('type');if(!type||types.indexOf(type.toLowerCase())>-1){return true;}}}event.preventDefault();return false;}},{key:\"SetMerge\",value:function SetMerge(){var modifyFirst=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;for(var _len5=arguments.length,iterables=new Array(_len5>1?_len5-1:0),_key15=1;_key15<_len5;_key15++){iterables[_key15-1]=arguments[_key15];}var set=modifyFirst?iterables[0]:new Set();Log.e(!(set instanceof Set),'U.SetMerge() used with modifyFirst = true requires the first argument to be a set');for(var _i3=0,_iterables=iterables;_i3<_iterables.length;_i3++){var iterable=_iterables[_i3];var _iterator6=_createForOfIteratorHelper(iterable),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var item=_step6.value;set.add(item);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}return set;}// merge with unique elements\n},{key:\"ArrayMergeU\",value:function ArrayMergeU(arr1){for(var _len6=arguments.length,arr2=new Array(_len6>1?_len6-1:0),_key16=1;_key16<_len6;_key16++){arr2[_key16-1]=arguments[_key16];}U.ArrayMerge0(true,arr1,arr2);}// merge without unique check\n},{key:\"ArrayMerge\",value:function ArrayMerge(arr1){for(var _len7=arguments.length,arr2=new Array(_len7>1?_len7-1:0),_key17=1;_key17<_len7;_key17++){arr2[_key17-1]=arguments[_key17];}U.ArrayMerge0(false,arr1,arr2);}// implementation\n},{key:\"ArrayMerge0\",value:function ArrayMerge0(unique,arrtarget){for(var _len8=arguments.length,arrays=new Array(_len8>2?_len8-2:0),_key18=2;_key18<_len8;_key18++){arrays[_key18-2]=arguments[_key18];}if(!arrtarget||!arrays)return;if(unique){var _iterator7=_createForOfIteratorHelper(arrays),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var arri=_step7.value;var _iterator8=_createForOfIteratorHelper(arri),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _e=_step8.value;U.ArrayAdd(arrtarget,_e);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}else{var _iterator9=_createForOfIteratorHelper(arrays),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _arri=_step9.value;Array.prototype.push.apply(arrtarget,_arri);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}}},{key:\"ArrayAdd\",value:function ArrayAdd(arr,elem){var unique=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var throwIfContained=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Log.ex(!arr||!Array.isArray(arr),'ArrayAdd arr null or not array:',arr);if(!unique){arr.push(elem);return true;}if(arr.indexOf(elem)===-1){arr.push(elem);return true;}Log.ex(throwIfContained,'ArrayAdd element already contained:',arr,elem);return false;}// static getID(): string { return U.idPrefix + U.maxID++; }\n},{key:\"getType\",value:function getType(param){var _param$constructor;switch(typeof param){default:return typeof param;case'object':return(param===null||param===void 0?void 0:(_param$constructor=param.constructor)===null||_param$constructor===void 0?void 0:_param$constructor.cname)||(param===null||param===void 0?void 0:param.className)||\"{_rawobject_}\";case'function':// and others\nreturn\"geType for function todo: distinguish betweeen arrow and classic\";}}},{key:\"stringCompare\",value:function stringCompare(s1,s2){return s1<s2?-1:s1>s2?1:0;}},{key:\"endsWith\",value:function endsWith(str,suffix){if(Array.isArray(suffix)){var _iterator10=_createForOfIteratorHelper(suffix),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var suf=_step10.value;if(U.endsWith(str,suf))return true;}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return false;}return str.length>=suffix.length&&str.lastIndexOf(suffix)===str.length-suffix.length;}},{key:\"arrayMergeInPlace\",value:function arrayMergeInPlace(arr1){for(var _len9=arguments.length,otherArrs=new Array(_len9>1?_len9-1:0),_key19=1;_key19<_len9;_key19++){otherArrs[_key19-1]=arguments[_key19];}for(var _i4=0,_otherArrs=otherArrs;_i4<_otherArrs.length;_i4++){var arr=_otherArrs[_i4];arr1.push.apply(arr1,arr||[]);}return arr1;}},{key:\"getEndingNumber\",value:function getEndingNumber(s){var ignoreNonNumbers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var allowDecimal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=s.length;var numberEnd=-1;while(--i>0){if(!isNaN(+s[i])){if(numberEnd===-1){numberEnd=i;}continue;}if(s[i]==='.'&&!allowDecimal){break;}if(s[i]==='.'){allowDecimal=false;continue;}if(!ignoreNonNumbers){break;}if(numberEnd!==-1){ignoreNonNumbers=false;}}s=numberEnd===-1?'1':s.substring(i,numberEnd);return+parseFloat(s);}},{key:\"increaseEndingNumber\",value:function increaseEndingNumber(s){var allowLastNonNumberChars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var allowDecimal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var increaseWhile=arguments.length>3?arguments[3]:undefined;var regexpstr='([0-9]+'+(allowDecimal?'|[0-9]+\\\\.[0-9]+':'')+')'+(allowLastNonNumberChars?'[^0-9]*':'')+'$';var matches=new RegExp(regexpstr,'g').exec(s);// Global (return multi-match) Single line (. matches \\n).\n// S flag removed for browser support (firefox), should work anyway.\nvar prefix;var num;if(!matches){prefix=s;num=2;}else{Log.ex(matches.length>2,'parsing error: /'+regexpstr+'/gs.match('+s+')');var i=s.length-matches[0].length;prefix=s.substring(0,i);num=1+ +matches[1];}if(increaseWhile)while(increaseWhile(prefix+num)){num++;}return prefix+num;}},{key:\"shallowEqual\",value:function shallowEqual(objA,objB){if(objA===objB){return true;}if(!objA||!objB||typeof objA!=='object'||typeof objB!=='object'){return false;}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;// if (keysA.length !== keysB.length) { return false; }\n// Test for A's keys different from B.\n// var bHasOwnProperty = hasOwnProperty.bind(objB);\nfor(var keya in objA){if(!Object.is(objA[keya],objB[keya]))return false;}// for (var i = 0; i < keysA.length; i++) if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) { return false; }\nreturn true;}// returns true only if parameter is already a number by type. UU.isNumber('3') will return false\n},{key:\"isNumber\",value:function isNumber(o){return typeof o===\"number\"&&!isNaN(o);}},{key:\"getAllPrototypes\",value:function getAllPrototypes(constructor){var _constructor$prototyp,_constructor$__proto_;var chainoutoutrecursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var currentRecursion=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var maxRecursion=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;var cache=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;// console.log('getAllPrototypes:', {name: constructor.name, currentRecursion, constructor, chainoutoutrecursive});\nif(cache&&constructor.__allprototypes)return constructor.__allprototypes;var prototype=((_constructor$prototyp=constructor.prototype)===null||_constructor$prototyp===void 0?void 0:_constructor$prototyp.name)&&constructor.prototype;var __proto__=((_constructor$__proto_=constructor.__proto__)===null||_constructor$__proto_===void 0?void 0:_constructor$__proto_.name)&&constructor.__proto__;if(!prototype&&!__proto__||currentRecursion>=maxRecursion)return chainoutoutrecursive;if(prototype)chainoutoutrecursive.push(prototype);if(__proto__)chainoutoutrecursive.push(__proto__);if(prototype)U.getAllPrototypes(prototype,chainoutoutrecursive,currentRecursion+1,maxRecursion);if(__proto__)U.getAllPrototypes(__proto__,chainoutoutrecursive,currentRecursion+1,maxRecursion);if(cache)constructor.__allprototypes=chainoutoutrecursive;return chainoutoutrecursive;}},{key:\"classIsExtending\",value:function classIsExtending(subconstructor,superconstructor){var _extends;return(superconstructor===null||superconstructor===void 0?void 0:(_extends=superconstructor._extends)===null||_extends===void 0?void 0:_extends.includes(subconstructor))||false;// return U.getAllPrototypes(subconstructor).includes(superconstructor);\n}},{key:\"isObject\",value:function isObject(v){var returnIfNull=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var returnIfUndefined=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var retIfArray=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(v===null){return returnIfNull;}if(v===undefined){return returnIfUndefined;}if(Array.isArray(v)){return retIfArray;}// nb: mind that typeof [] === 'object'\nreturn typeof v==='object';}},{key:\"objectFromArray\",value:function objectFromArray(arr,getKey){// @ts-ignore\nreturn arr.reduce(function(acc,val){acc[getKey(val)]=val;return acc;},{});}},{key:\"objectFromArrayValues\",value:function objectFromArrayValues(arr){var val=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;// @ts-ignore\nreturn arr.reduce(function(acc,val){acc[val]=val;return acc;},{});/*let ret: Dictionary = {};\r\n        for (let val of arr) { ret[val] = true; }\r\n        return ret;*/}},{key:\"toBoolString\",value:function toBoolString(bool){var ifNotBoolean=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return bool===true?'true':bool===false?'false':''+ifNotBoolean;}},{key:\"fromBoolString\",value:function fromBoolString(str){var defaultVal=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var allowNull=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var allowUndefined=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;str=(''+str).toLowerCase();if(allowNull&&str==='null')return null;if(allowUndefined&&str==='undefined')return undefined;if(str===\"true\"||str==='t'||str==='1')return true;// if (defaultVal === true) return str === \"false\" || str === 'f' || str === '0'; // false solo se è esplicitamente false, true se ambiguo.\nif(str===\"false\"||str==='f'||str==='0')return false;return defaultVal;}},{key:\"arrayDifference\",value:function arrayDifference(starting,final){var ret={};ret.starting=starting;ret.final=final;if(!starting)starting=[];if(!final)final=[];ret.removed=Uarr.arraySubtract(starting,final,false);// start & !end\nret.added=Uarr.arraySubtract(final,starting,false);// end & !start\nreturn ret;}// returns <\"what changed from old to neww\"> and in nested objects recursively\n// todo: how can i tell at what point it's the fina lvalue (might be a nestedobj) and up to when it's a delta to follow and unroll?   using __isAdelta:true ?\n// NB: this returns the delta that generates the future. if you want the delta that generate the past one, invert parameter order.\n},{key:\"objectDelta\",value:function objectDelta(old,neww){var deep=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var newwobj=neww;var oldobj=old;if(old===neww)return{};var diff=U.objdiff(old,neww);// todo: optimize this, remove the 3 loops below and add those directly in U.objdiff(old, neww, ret); writing inside the obj in third parameter\nvar ret={};// {__isAdelta:true};\nfor(var _key20 in diff.added){ret[_key20]=newwobj[_key20];}for(var _key21 in diff.changed){var subold=oldobj[_key21];var subnew=newwobj[_key21];if(typeof subold===typeof subnew&&typeof subold===\"object\"){ret[_key21]=deep?U.objectDelta(subold,subnew,true):subnew;}else ret[_key21]=subnew;}// todo: add to variable naming rules: can't start with \"_-\", like in \"_-keyname\", it means \"keyname\" removed in undo delta\nvar removedprefix=\"\";// \"_-\";\nfor(var _key22 in diff.removed){ret[removedprefix+_key22]=undefined;}//newwobj[key]; }\n// console.log(\"objdiff\", {old, neww, diff, ret});\nreturn ret;}// difference react-style. lazy check by === equality field by field. parameters are readonly\n},{key:\"objdiff\",value:function objdiff(old,neww){// let ret: GObject = {removed:{}, added:{}, changed:{}};\nvar ret={removed:{},added:{},changed:{},unchanged:{}};if(!neww&&!old){return ret;}if(!neww){ret.removed=old;return ret;}if(!old){ret.added=neww;return ret;}// let oldkeys: string[] = Object.keys(old); let newkeys: string[] = Object.keys(neww);\nvar key;for(key in old){// if (neww[key] === undefined){\n// if neww have a key with undefined value, it counts (and should) as having that property key defined\nif(!(key in neww)){ret.removed[key]=old[key];}else if(neww[key]===old[key]){ret.unchanged[key]=old[key];}else ret.changed[key]=old[key];}for(var _key23 in neww){if(!(_key23 in old)){ret.added[_key23]=neww[_key23];}}return ret;}/*  {a: { b: { c1: 1, c2:2, c3:3 } }, d: 1 }     ---->  {\"a.b.c1\":1, \"a.b.c2\":2, \"a.b.c3\":3. \"d\":1}*/},{key:\"flattenObjectToRoot\",value:function flattenObjectToRoot(obj){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var pathseparator=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'.';return Object.keys(obj).reduce(function(acc,k){var pre=prefix.length?prefix+pathseparator:'';if(typeof obj[k]==='object')Object.assign(acc,U.flattenObjectToRoot(obj[k],pre+k,pathseparator));else acc[pre+k]=obj[k];return acc;},{});}// from {a:{aa:true, ab:\"ab\"}, b:4} to [\"a.aa = true\", \"a.ab = \\\"ab\\\"\", \"a.b = 4\"]\n// maxkeylength is max length of any individual key, after it it will become: superlongpath --> supe...path\n// maxsubpaths is how many subpaths are displayed at most. after it it will be: super.rea.lly.long.pa.th --> super.rea.pa.th\n},{key:\"ObjectToAssignementStrings\",value:function ObjectToAssignementStrings(obj){var maxkeylength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var maxsubpaths=arguments.length>2&&arguments[2]!==undefined?arguments[2]:6;var maxvallength=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;var toolongreplacer=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"…\";var out=arguments.length>5?arguments[5]:undefined;var quotestrings=arguments.length>6&&arguments[6]!==undefined?arguments[6]:true;var pathseparator=\".\";var valueseparator=\" = \";var filterrow=function filterrow(rowpaths){return!rowpaths.includes(\"clonedCounter\")&&!rowpaths.includes(\"pointedBy\");};var flatten=U.flattenObjectToRoot(obj,'',pathseparator);var i=-1;var tmp;var ret=[];tmp=(maxkeylength-toolongreplacer.length)/2;var halfpath={start:window.Math.floor(tmp),end:window.Math.ceil(tmp)};tmp=(maxvallength-toolongreplacer.length)/2;var halfval={start:window.Math.floor(tmp),end:window.Math.ceil(tmp)};tmp=(maxsubpaths-toolongreplacer.length)/2;var halfsubpaths={start:window.Math.floor(tmp),end:window.Math.ceil(tmp)};var bestpathsize=0;var best=null;var countsize=function countsize(total,arrelem){return total+arrelem.length;};var filterbest=function filterbest(row){row.pathlength=row.fullstr.length;// row.fullpath.reduce<number>(countsize, 0);\nif(!best||bestpathsize<row.pathlength&&filterrow(row.fullpath)){best=row;bestpathsize=row.pathlength;if(out)out.best=best;ret.best=best.str;}};console.log(\"u get assignements\",{flatten:flatten,obj:obj});for(var _key24 in flatten){var row={fullpath:_key24.split(pathseparator),fullstr:_key24};// if (!filterrow(row.fullpath)) continue;\n// stringify(undefined) = undefined, so i add + \"\"\ntry{if(!quotestrings&&typeof flatten[_key24]===\"string\")row.fullvalue=flatten[_key24];else row.fullvalue=JSON.stringify(flatten[_key24])+\"\";}catch(e){row.fullvalue=\"⁜not serializable⁜\";}// console.log(\"U get assignements loop\", {row, key, flatten, obj});\nrow.val=row.fullvalue.length<=maxvallength?row.fullvalue:row.fullvalue.substring(0,halfval.start)+toolongreplacer+row.fullvalue.substring(halfval.start);if(row.fullpath.length>maxsubpaths){row.path=_toConsumableArray(row.fullpath);row.path.splice(halfsubpaths.start,row.fullpath.length-halfsubpaths.start-halfsubpaths.end,toolongreplacer);}else row.path=row.fullpath;// row.path = row.fullpath.length <= maxsubpaths ? row.fullpath : [...row.fullpath.slice(0, halfsubpaths.start), ...row.fullpath.toomanyarraycopies];\nrow.path=row.path.map(function(p){return p.length<=maxkeylength?p:p.substring(0,halfpath.start)+toolongreplacer+p.substring(p.length-halfpath.end);});if(out){out.push(row);}row.str=row.path.join(pathseparator)+valueseparator+row.val;ret.push(row.str);filterbest(row);}return ret;}},{key:\"download\",value:function download(){var filename=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'nameless.txt';var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var debug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!text){return;}filename=U.toFileName(filename);var htmla=document.createElement('a');var blob=new Blob([text],{type:'text/plain',endings:'native'});var blobUrl=URL.createObjectURL(blob);Log.l(debug,text+'|\\r\\n| <-- rn, |\\n| <--n.');htmla.style.display='none';htmla.href=blobUrl;htmla.download=filename;document.body.appendChild(htmla);htmla.click();window.URL.revokeObjectURL(blobUrl);document.body.removeChild(htmla);}},{key:\"formatXml\",value:function formatXml(xml){var reg=/(>)\\s*(<)(\\/*)/g;var wsexp=/ *(.*) +\\n/g;var contexp=/(<.+>)(.+\\n)/g;xml=xml.replace(reg,'$1\\n$2$3').replace(wsexp,'$1\\n').replace(contexp,'$1\\n$2');var pad=''||'\\t';var formatted='';var lines=xml.split('\\n');var indent=0;var lastType='other';// 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions\nvar transitions={'single->single':0,'single->closing':-1,'single->opening':0,'single->other':0,'closing->single':0,'closing->closing':-1,'closing->opening':0,'closing->other':0,'opening->single':1,'opening->closing':0,'opening->opening':1,'opening->other':1,'other->single':0,'other->closing':-1,'other->opening':0,'other->other':0};var i=0;for(i=0;i<lines.length;i++){var ln=lines[i];// Luca Viggiani 2017-07-03: handle optional <?xml ... ?> declaration\nif(ln.match(/\\s*<\\?xml/)){formatted+=ln+'\\n';continue;}// ---\nvar single=Boolean(ln.match(/<.+\\/>/));// is this line a single tag? ex. <br />\nvar closing=Boolean(ln.match(/<\\/.+>/));// is this a closing tag? ex. </a>\nvar opening=Boolean(ln.match(/<[^!].*>/));// is this even a tag (that's not <!something>)\nvar type=single?'single':closing?'closing':opening?'opening':'other';var fromTo=lastType+'->'+type;lastType=type;var padding='';indent+=transitions[fromTo];var j=void 0;for(j=0;j<indent;j++){padding+=pad;}if(fromTo==='opening->closing'){formatted=formatted.substr(0,formatted.length-1)+ln+'\\n';// substr removes line break (\\n) from prev loop\n}else{formatted+=padding+ln+'\\n';}}return formatted.trim();}// https://stackoverflow.com/questions/13861254/json-stringify-deep-objects  implementation with depth\n},{key:\"circularStringify\",value:function circularStringify(obj,replacer,space){var maxDepth_unsupported=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100;var cache=[];return JSON.stringify(obj,function(key,value){if(typeof value==='object'&&value!==null){// Duplicate reference found, discard key\nif(cache.includes(value))return\"[Circular Reference]\";// might happen both before and after the replacer func\nif(replacer){value=replacer(key,value);if(cache.includes(value))return\"[Circular Reference]\";// might happen both before and after the replacer func\n}// Store value in our collection\ncache.push(value);}return value;},space);}},{key:\"getFirstNumber\",value:function getFirstNumber(s){var allowDecimalDot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var allowDecimalComma=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var valueifmismatch=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var commamode=allowDecimalComma?allowDecimalDot?\"(\\\\.|\\\\,)\":\"\\\\,\":allowDecimalDot?\"\\\\.\":\"will not use this regex\";var floatregex=new RegExp(\"-?\"+commamode+\"?\\\\d+(\"+commamode+\"\\\\d{1,2})?\");var intregex=/-?\\d+/;var ret;if(allowDecimalDot||allowDecimalComma)ret=floatregex.exec(s);else ret=intregex.exec(s);ret=ret&&ret[0];// first match\nif(ret===null)return valueifmismatch;var tmpindex;if(allowDecimalComma)ret=U.replaceAll(ret,\",\",\".\");// while (allowDecimalComma && (tmpindex = ret.indexOf(\",\")) !== ret.lastIndexOf(\",\")) ret.substring(tmp+1) // ret.indexOf(.)\nwhile((allowDecimalDot||allowDecimalComma)&&(tmpindex=ret.indexOf(\".\"))!==ret.lastIndexOf(\".\")){ret=ret.substring(tmpindex+1);}// ret.indexOf(.)\n// if (ret[0]===\"-\" && (ret[1]===\",\" || ret[1]===\".\")) ret = \"-0.\"+ret.substring(2); automatically done bu js.    +\"-.5\" = -0.5\nreturn+ret;}// faster than jquery, underscore and many native methods checked https://stackoverflow.com/a/59787784\n},{key:\"isEmptyObject\",value:function isEmptyObject(obj){for(var i in obj){return false;}return true;}},{key:\"pairArrayElementsRepeatFunc\",value:function pairArrayElementsRepeatFunc(val,index,arr){return[arr[index],arr[index+1]];}},{key:\"pairArrayElementsReducerFunc\",value:function pairArrayElementsReducerFunc(accumulator,value,index,array){if(index%2===0)accumulator.push(array.slice(index,index+2));return accumulator;}// from arr[] to arr[][]. if is with repetitions is: [1,2], [2,3], [3,4]... (ret.length = source.length-1)\n// if without repetitions is: [1,2], [3,4].... (ret.length = Math.ceil(source.length/2);\n},{key:\"pairArrayElements\",value:function pairArrayElements(arr){var withRepetitions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(withRepetitions){return arr.map(U.pairArrayElementsRepeatFunc).slice(0,arr.length-1);}return arr.reduce(U.pairArrayElementsReducerFunc,[]);}// removes line // and block /**/ comments  todo: can likely be improved by a regular expression\n},{key:\"decomment_all\",value:function decomment_all(str){return this.decomment_line(this.decomment_block(str));}// removes line comments //\n},{key:\"decomment_line\",value:function decomment_line(str){var trimLines=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return str.split(\"\\n\").map(function(s){var i=s.indexOf(\"//\");s=i===-1?s:s.substring(i);return trimLines?s.trim():s;}).join(\"\\n\");}// removes block comments /**/\n},{key:\"decomment_block\",value:function decomment_block(str){// let maxcomments = 100;\nwhile(true){// if (--maxcomments===0) break;\nvar s=str.indexOf(\"/*\");if(s===-1)break;var _e2=str.indexOf(\"*/\",s+1);if(_e2===-1)_e2=str.length;str=str.substring(0,s)+str.substring(_e2+2);}return str;}},{key:\"uppercaseFirstLetter\",value:function uppercaseFirstLetter(str){if(typeof str!==\"string\")return str;return str.charAt(0).toUpperCase()+str.slice(1);}// CAREFUL! it's imperfect.\n// Does not handle strings starting with ( that are not ()=> arrow functions\n// or codes whose last chars are () but not in (function)() form\n},{key:\"wrapUserFunction\",value:function wrapUserFunction(str){str=str.trim();if(str[0]!=='('||str.indexOf(\"function\")!==0){str=\"()=>{\"+str+\"\\n}\";// last \\n important for line comments //\n}if(str[str.length-2]!==\"(\"||str[str.length-1]!==\")\")str=\"(\"+str+\")()\";return str;}// adds ellipsis in the middle of a string to truncate it when it's too long.\n},{key:\"stringMiddleCut\",value:function stringMiddleCut(str,maxLength){var ellipsisChar=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'…';var asArray=arguments.length>3?arguments[3]:undefined;if(!str||maxLength<0||str.length<=maxLength)return asArray?[str]:str;var midpoint=Math.ceil(str.length/2);var toremove=str.length-maxLength+ellipsisChar.length;// makes room for the additional ellipsis too\nvar lstrip=Math.ceil(toremove/2);// left strip is the bigger one if odd chars\nvar rstrip=toremove-lstrip;if(asArray)return[str.substring(0,midpoint-lstrip),ellipsisChar,str.substring(midpoint+rstrip)];else return str.substring(0,midpoint-lstrip)+ellipsisChar+str.substring(midpoint+rstrip);}// transform grays: if the color is <20% different from gray, transform it instead in black or white, 0 = don't, 1 = always black or white\n},{key:\"invertHex\",value:function invertHex(s){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'#';var transformGrays=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.2;if(s.indexOf(prefix)===0)s=s.substring(prefix.length);var r,g,b,h;// might be NaN if parseInt fails\nif(s.length===3||s.length===4){r=parseInt('0x'+s[0]);// works with hex numbers\ng=parseInt('0x'+s[1]);b=parseInt('0x'+s[2]);h=s.length===4?parseInt('0x'+s[4]):undefined;}else if(s.length===6||s.length===8){r=parseInt('0x'+s.substring(0,2));g=parseInt('0x'+s.substring(2,4));b=parseInt('0x'+s.substring(4,6));h=s.length===8?parseInt('0x'+s.substring(6,8)):undefined;}else return Log.ee(\"cannot invert hex color \"+s+\", invalid length\",{s:s});if(isNaN(r))return Log.ee(\"cannot invert hex color \"+s+\", invalid red\",{s:s});if(isNaN(g))return Log.ee(\"cannot invert hex color \"+s+\", invalid green\",{g:g});if(isNaN(b))return Log.ee(\"cannot invert hex color \"+s+\", invalid blue\",{b:b});transformGrays=transformGrays*128;r=Math.abs(r-128)<=transformGrays?r>=128?0:255:255-r;g=Math.abs(g-128)<=transformGrays?g>=128?0:255:255-g;b=Math.abs(b-128)<=transformGrays?b>=128?0:255:255-b;if(h||h===0)h=255-h;var rs=r.toString(16);if(rs.length===1)rs='0'+rs;var gs=g.toString(16);if(gs.length===1)gs='0'+gs;var bs=b.toString(16);if(bs.length===1)bs='0'+bs;var hs=h?h.toString(16):'';if(hs.length===1)hs='0'+hs;return prefix+rs+gs+bs+hs;}},{key:\"parentUntil\",value:function parentUntil(tagName,p){while(p&&p.tagName!==tagName){p=p.parentElement;}return p;}},{key:\"paletteSplit\",value:function paletteSplit(palette){var ret={color:{},number:{},text:{},path:{}};for(var _i5=0,_Object$entries=Object.entries(palette);_i5<_Object$entries.length;_i5++){var _entry=_Object$entries[_i5];var k=_entry[0];var v=_entry[1];ret[v.type][k]=v;}return ret;}},{key:\"mergeNamedArray\",value:function mergeNamedArray(ret,classes){var _iterator11=_createForOfIteratorHelper(Object.getOwnPropertyNames(classes)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _key25=_step11.value;// ownPropertyNames skips \"first, last, separator\" created by extending array prototype\nif(_key25===\"length\")continue;if(!isNaN(+_key25))ret.push(classes[_key25]);// not else, if a class is named like a number it can be accessed by name until is overwrite by index being reached.\nif(!ret[_key25])ret[_key25]=classes[_key25];}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}},{key:\"toNamedArray\",value:function toNamedArray(larr,darr){if(!darr||darr.length!==larr.length)darr=larr.map(function(l){return l.__raw;});for(var i=0;i<larr.length;i++){if(darr[i]&&larr[i])larr[\"$\"+darr[i].name]=larr[i];}/*for (let index of Object.getOwnPropertyNames(larr)) { // ownPropertyNames skips \"first, last, separator\" created by extending array prototype\r\n            if (index === \"length\") continue;\r\n            let d = darr[index as any as number];\r\n            let l = larr[index as any as number];\r\n            if (!d || !l) continue;\r\n            (larr as any)[\"$\" + (d as any).name] = l;\r\n        }*/return larr;}}]);return U;}(),_class4.isStrict=function(){return!this;}(),_class4.validIdentfierRegexp=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/,_class4.gotcalledby={},_class4.maxID=0,_class4.idPrefix='',_class4.getID=/*#__PURE__*/_regeneratorRuntime.mark(function idgenerator(){var i;return _regeneratorRuntime.wrap(function idgenerator$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:i=0;case 1:if(!true){_context3.next=6;break;}_context3.next=4;return i++;case 4:_context3.next=1;break;case 6:case\"end\":return _context3.stop();}}},idgenerator);})(),_class4))||_class3);export var DDate=/*#__PURE__*/function(){function DDate(){_classCallCheck(this,DDate);}_createClass(DDate,null,[{key:\"addDay\",value:function addDay(date,offset,inplace){var ret=inplace?date:new Date(date);ret.setDate(date.getDate()+offset);return ret;}},{key:\"addMonth\",value:function addMonth(date,offset,inplace){var ret=inplace?date:new Date(date);ret.setMonth(date.getMonth()+offset);return ret;}},{key:\"addYear\",value:function addYear(date,offset,inplace){var ret=inplace?date:new Date(date);ret.setFullYear(date.getFullYear()+offset);return ret;}}]);return DDate;}();DDate.cname=\"DDate\";export var myFileReader=/*#__PURE__*/function(){function myFileReader(){_classCallCheck(this,myFileReader);}_createClass(myFileReader,null,[{key:\"setinfos\",value:// constructor(onchange: (e: ChangeEvent) => void = null, fileTypes: FileReadTypeEnum[] | string[] = null) { myFileReader.setinfos(fileTypes, onchange); }\nfunction setinfos(fileTypes,onchange,readcontent){myFileReader.fileTypes=fileTypes||myFileReader.fileTypes;var debug=false;debug&&console.log('fileTypes:',myFileReader.fileTypes,fileTypes);myFileReader.input=document.createElement('input');var input=myFileReader.input;myFileReader.onchange=function(e){if(!readcontent){onchange(e,input.files,undefined);return;}var contentObj={};var fileLetti=0;var _loop=function _loop(i){var f=input.files[i];debug&&console.log('filereadContent['+i+']( file:',f,')');U.fileReadContent(f,function(content){var _input$files;debug&&console.log('file['+i+'] read complete. done: '+(1+fileLetti)+' / '+((_input$files=input.files)===null||_input$files===void 0?void 0:_input$files.length),'contentObj:',contentObj);contentObj[i]=content;// cannot use array, i'm not sure the callbacks will be called in order. using push is safer but could alter order.\n// this is last file to read.\nif(input.files&&++fileLetti===input.files.length){var contentArr=[];for(var j=0;j<input.files.length;j++){contentArr.push(contentObj[j]);}onchange(e,input.files,contentArr);}});};for(var i=0;input.files&&i<input.files.length;i++){_loop(i);}}||myFileReader.onchange;}},{key:\"reset\",value:function reset(){myFileReader.fileTypes=undefined;myFileReader.onchange=undefined;myFileReader.input=undefined;}},{key:\"show\",value:function show(onChange){var extensions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var readContent=arguments.length>2?arguments[2]:undefined;console.log(\"importEcore: pre file reader\",myFileReader.input);myFileReader.setinfos(extensions,onChange,readContent);//if (!myFileReader.input) return;\nmyFileReader.input.setAttribute('type','file');if(myFileReader.fileTypes){myFileReader.input.setAttribute('accept',myFileReader.fileTypes.join(','));}//console.log('fileTypes:', myFileReader.fileTypes, 'input:', myFileReader.input);\n$(myFileReader.input).on('change.custom',myFileReader.onchange).trigger('click');myFileReader.reset();}}]);return myFileReader;}();myFileReader.input=null;myFileReader.fileTypes=null;myFileReader.onchange=null;export var Uarr=(_dec3=RuntimeAccessible('Uarr'),_dec3(_class5=/*#__PURE__*/function(){function Uarr(){_classCallCheck(this,Uarr);}_createClass(Uarr,null,[{key:\"arrayIntersection\",value:function arrayIntersection(arr1,arr2){if(!arr1||!arr2)return null;return arr1.filter(function(e){return arr2.indexOf(e)>=0;});}},{key:\"arraySubtract\",value:function arraySubtract(arr1,arr2,inPlace){var i;var ret=inPlace?arr1:_toConsumableArray(arr1);for(i=0;i<arr2.length;i++){U.arrayRemoveAll(ret,arr2[i]);}return ret;}},{key:\"equals\",value:function equals(a1,a2,deep){Log.ex(deep,\"deep array comparison is not supported yet\");if(!a1||!a2)return false;if(a1.length!==a2.length)return false;for(var i=0;i<a1.length;i++){if(a1[i]!==a2[i])return false;}return true;}}]);return Uarr;}())||_class5);export var FocusHistoryEntry=function FocusHistoryEntry(e,element,time){_classCallCheck(this,FocusHistoryEntry);this.time=void 0;this.evt=void 0;this.element=void 0;this.evt=e;this.element=element||e.target;this.time=time||new Date();};FocusHistoryEntry.cname=\"FocusHistoryEntry\";export var ShortDefaultEClasses;(function(ShortDefaultEClasses){ShortDefaultEClasses[\"EObject\"]=\"EObject\";ShortDefaultEClasses[\"EAnnotation\"]=\"EAnnotation\";ShortDefaultEClasses[\"EClass\"]=\"EClass\";ShortDefaultEClasses[\"EPackage\"]=\"EPackage\";ShortDefaultEClasses[\"ENamedElement\"]=\"ENamedElement\";})(ShortDefaultEClasses||(ShortDefaultEClasses={}));export var ShortAttribETypes;// EDiagnosticChain = \"EDiagnosticChain\", // present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\n/*\r\n  ECharObj  = 'ECharObj',\r\n  EStringObj  = 'EStringObj',\r\n  EDateObj  = 'EDateObj',\r\n  EFloatObj  = 'EFloatObj',\r\n  EDoubleObj  = 'EDoubleObj',\r\n  EBooleanObj = 'EBooleanObj',\r\n  EByteObj  = 'EByteObj',\r\n  EShortObj  = 'EShortObj',\r\n  EIntObj  = 'EIntObj',\r\n  ELongObj  = 'ELongObj',\r\n  EELIST  = 'EELIST',*/(function(ShortAttribETypes){ShortAttribETypes[\"EVoid\"]=\"EVoid\";ShortAttribETypes[\"EChar\"]=\"EChar\";ShortAttribETypes[\"EString\"]=\"EString\";ShortAttribETypes[\"EDate\"]=\"EDate\";ShortAttribETypes[\"EBoolean\"]=\"EBoolean\";ShortAttribETypes[\"EByte\"]=\"EByte\";ShortAttribETypes[\"EShort\"]=\"EShort\";ShortAttribETypes[\"EInt\"]=\"EInt\";ShortAttribETypes[\"ELong\"]=\"ELong\";ShortAttribETypes[\"EFloat\"]=\"EFloat\";ShortAttribETypes[\"EDouble\"]=\"EDouble\";})(ShortAttribETypes||(ShortAttribETypes={}));windoww.ShortAttribETypes=ShortAttribETypes;export var ShortAttribSuperTypes={\"EVoid\":[],\"EChar\":[ShortAttribETypes.EString],\"EString\":[],\"EDate\":[],\"EBoolean\":[ShortAttribETypes.EByte,ShortAttribETypes.EShort,ShortAttribETypes.EInt,ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EByte\":[ShortAttribETypes.EShort,ShortAttribETypes.EInt,ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EShort\":[ShortAttribETypes.EInt,ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EInt\":[ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"ELong\":[ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EFloat\":[ShortAttribETypes.EDouble],\"EDouble\":[]};var ecoreprefix=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//\";var ecoreclasprefix=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//\";export function toShortEType(a){return a.substring(ecoreprefix.length);}export function toLongEType(a){return AttribETypes[a];// return ecoreprefix + a as any;\n}export function toShortEClass(a){return a.substring(ecoreclasprefix.length);}export function toLongEClass(a){return DefaultEClasses[a];}export var SelectorOutput=function SelectorOutput(){_classCallCheck(this,SelectorOutput);this.jqselector=void 0;this.attrselector=void 0;this.attrRegex=void 0;this.exception=void 0;this.resultSetAttr=void 0;this.resultSetElem=void 0;};// compare it with event.key\nexport var Keystrokes;// not even triggering event?\n(function(Keystrokes){Keystrokes[Keystrokes[\"clickLeft\"]=0]=\"clickLeft\";Keystrokes[Keystrokes[\"clickWheel\"]=1]=\"clickWheel\";Keystrokes[Keystrokes[\"clickRight\"]=2]=\"clickRight\";Keystrokes[Keystrokes[\"clickBackMouseButton\"]=3]=\"clickBackMouseButton\";Keystrokes[Keystrokes[\"clickForwardMouseButton\"]=4]=\"clickForwardMouseButton\";Keystrokes[\"escape\"]=\"Escape\";Keystrokes[\"capsLock\"]=\"CapsLock\";Keystrokes[\"shift\"]=\"Shift\";Keystrokes[\"tab\"]=\"Tab\";Keystrokes[\"alt\"]=\"Alt\";Keystrokes[\"control\"]=\"Control\";Keystrokes[\"end\"]=\"End\";Keystrokes[\"home\"]=\"Home\";Keystrokes[\"pageUp\"]=\"PageUp\";Keystrokes[\"pageDown\"]=\"PageDown\";Keystrokes[\"enter\"]=\"Enter\";Keystrokes[\"numpadEnter\"]=\"NumpadEnter\";Keystrokes[\"audioVolumeMute\"]=\"AudioVolumeMute\";Keystrokes[\"audioVolumeUp\"]=\"AudioVolumeUp\";Keystrokes[\"audioVolumeDown\"]=\"AudioVolumeDown\";Keystrokes[\"mediaTrackPrevious\"]=\"MediaTrackPrevious\";Keystrokes[\"delete\"]=\"Delete\";Keystrokes[\"backspace\"]=\"Backspace\";Keystrokes[\"space\"]=\" \";Keystrokes[\"altGraph\"]=\"AltGraph\";Keystrokes[\"arrowLeft\"]=\"ArrowLeft\";Keystrokes[\"arrowRight\"]=\"ArrowRight\";Keystrokes[\"arrowUp\"]=\"ArrowUp\";Keystrokes[\"arrowDown\"]=\"ArrowDown\";Keystrokes[\"insert\"]=\"Insert\";Keystrokes[\"f1\"]=\"F1\";Keystrokes[\"meta\"]=\"Meta\";Keystrokes[\"unidentified\"]=\"Unidentified\";Keystrokes[\"__NotReacting__\"]=\"fn, print, maybe others\";})(Keystrokes||(Keystrokes={}));export var DefaultEClasses;(function(DefaultEClasses){DefaultEClasses[\"EObject\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EObject\";DefaultEClasses[\"EAnnotation\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EAnnotation\";DefaultEClasses[\"EClass\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EClass\";DefaultEClasses[\"EPackage\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EPackage\";DefaultEClasses[\"ENamedElement\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//ENamedElement\";})(DefaultEClasses||(DefaultEClasses={}));export var AttribETypes;// present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\n// EDiagnosticChain = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDiagnosticChain',\n/*\r\n  ECharObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ECharObject',\r\n  EStringObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EStringObject',\r\n  EDateObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDateObject',\r\n  EFloatObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloatObject',\r\n  EDoubleObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubleObject',\r\n  EBooleanObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObj',\r\n  EByteObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByteObject',\r\n  EShortObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShortObject',\r\n  EIntObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject',\r\n  ELongObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject', */ // EELIST = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList', // List<E> = List<?>\n// export type Json = object;\n(function(AttribETypes){AttribETypes[\"EVoid\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EVoid\";AttribETypes[\"EChar\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EChar\";AttribETypes[\"EString\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\";AttribETypes[\"EDate\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate\";AttribETypes[\"EFloat\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloat\";AttribETypes[\"EDouble\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble\";AttribETypes[\"EBoolean\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean\";AttribETypes[\"EByte\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByte\";AttribETypes[\"EShort\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShort\";AttribETypes[\"EInt\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\";AttribETypes[\"ELong\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELong\";})(AttribETypes||(AttribETypes={}));export var ParseNumberOrBooleanOptions=function ParseNumberOrBooleanOptions(){var defaultValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var allowNull=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var nullValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var allowUndefined=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var undefinedValue=arguments.length>4&&arguments[4]!==undefined?arguments[4]:undefined;var allowedNan=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var nanValue=arguments.length>6&&arguments[6]!==undefined?arguments[6]:NaN;var allowBooleans=arguments.length>7&&arguments[7]!==undefined?arguments[7]:true;var trueValue=arguments.length>8&&arguments[8]!==undefined?arguments[8]:1;var falseValue=arguments.length>9&&arguments[9]!==undefined?arguments[9]:0;_classCallCheck(this,ParseNumberOrBooleanOptions);this.defaultValue=void 0;this.allowNull=void 0;this.nullValue=void 0;this.allowUndefined=void 0;this.undefinedValue=void 0;this.allowedNan=void 0;this.nanValue=void 0;this.allowBooleans=void 0;this.trueValue=void 0;this.falseValue=void 0;this.defaultValue=defaultValue;this.allowNull=allowNull;this.nullValue=nullValue;this.allowUndefined=allowUndefined;this.undefinedValue=undefinedValue;this.allowedNan=allowedNan;this.nanValue=nanValue;this.allowBooleans=allowBooleans;this.trueValue=trueValue;this.falseValue=falseValue;};export var Log=(_dec4=RuntimeAccessible('Log'),_dec4(_class6=(_class7=/*#__PURE__*/function(){function Log(){_classCallCheck(this,Log);}// public static history: Dictionary<string, Dictionary<string, any[]>> = {}; // history['pe']['key'] = ...parameters\n_createClass(Log,null,[{key:\"registerLogger\",value:// takes function name returns logger list\nfunction registerLogger(logger,triggerAt){var tname=triggerAt.cname||triggerAt.name;if(!Log.loggerMapping[tname])Log.loggerMapping[tname]=[];Log.loggerMapping[tname].push(logger);}},{key:\"disableConsole\",value:function disableConsole(){// @ts-ignore\nconsole['logg']=console.log;console.log=function(){};}},{key:\"enableConsole\",value:function enableConsole(){// @ts-ignore\nif(console['logg'])console.log=console['logg'];}},{key:\"log\",value:function(_log){function log(_x2,_x3,_x4,_x5){return _log.apply(this,arguments);}log.toString=function(){return _log.toString();};return log;}(function(prefix,category,originalFunc,b){for(var _len10=arguments.length,restArgs=new Array(_len10>4?_len10-4:0),_key26=4;_key26<_len10;_key26++){restArgs[_key26-4]=arguments[_key26];}if(!b){return'';}var key=windoww.U.getCaller(1);if(restArgs===null||restArgs===undefined){restArgs=[];}var str='['+prefix+']'+key+': ';for(var i=0;i<restArgs.length;i++){// console.log(prefix, {i, restArgs, curr:restArgs[i]});\nstr+=''+(typeof restArgs[i]==='symbol'?''+String(restArgs[i]):restArgs[i])+'\\t\\r\\n';}if(Log.loggerMapping[category]){var _iterator12=_createForOfIteratorHelper(Log.loggerMapping[category]),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var logger=_step12.value;logger.log(category,key,restArgs,str);}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}originalFunc.apply(void 0,[key].concat(_toConsumableArray(restArgs)));return str;})},{key:\"e\",value:function e(b){if(!b)return'';for(var _len11=arguments.length,restArgs=new Array(_len11>1?_len11-1:0),_key27=1;_key27<_len11;_key27++){restArgs[_key27-1]=arguments[_key27];}var str=Log.log.apply(Log,['Error','e',console.error,b].concat(restArgs));Log.lastError=restArgs;return str;// throw new Error(str);\n}},{key:\"eDev\",value:function eDev(b){if(!b)return'';for(var _len12=arguments.length,restArgs=new Array(_len12>1?_len12-1:0),_key28=1;_key28<_len12;_key28++){restArgs[_key28-1]=arguments[_key28];}var str=Log.log.apply(Log,['Dev Error','eDev',console.error,b].concat(restArgs));Log.lastError=restArgs;return str;// throw new Error(str);\n}},{key:\"ex\",value:function ex(b){if(!b)return null;for(var _len13=arguments.length,restArgs=new Array(_len13>1?_len13-1:0),_key29=1;_key29<_len13;_key29++){restArgs[_key29-1]=arguments[_key29];}var str=Log.log.apply(Log,['Error','e',console.error,b].concat(restArgs));Log.lastError=restArgs;windoww.ee=restArgs;windoww.e1=restArgs[1];throw _construct(MyError,[str].concat(restArgs));}},{key:\"exDev\",value:function exDev(b){if(!b)return null;for(var _len14=arguments.length,restArgs=new Array(_len14>1?_len14-1:0),_key30=1;_key30<_len14;_key30++){restArgs[_key30-1]=arguments[_key30];}var str=Log.log.apply(Log,['Dev Error','eDev',console.error,b].concat(restArgs));Log.lastError=restArgs;windoww.ee=restArgs;windoww.e1=restArgs[1];throw _construct(MyError,[str].concat(restArgs));}},{key:\"i\",value:function i(b){for(var _len15=arguments.length,restArgs=new Array(_len15>1?_len15-1:0),_key31=1;_key31<_len15;_key31++){restArgs[_key31-1]=arguments[_key31];}return Log.log.apply(Log,['Info','i',console.log,b].concat(restArgs));}},{key:\"l\",value:function l(b){for(var _len16=arguments.length,restArgs=new Array(_len16>1?_len16-1:0),_key32=1;_key32<_len16;_key32++){restArgs[_key32-1]=arguments[_key32];}return Log.log.apply(Log,['Log','l',console.log,b].concat(restArgs));}},{key:\"w\",value:function w(b){for(var _len17=arguments.length,restArgs=new Array(_len17>1?_len17-1:0),_key33=1;_key33<_len17;_key33++){restArgs[_key33-1]=arguments[_key33];}return Log.log.apply(Log,['Warn','w',console.warn,b].concat(restArgs));}},{key:\"eDevv\",value:function eDevv(firstParam){for(var _len18=arguments.length,restAgs=new Array(_len18>1?_len18-1:0),_key34=1;_key34<_len18;_key34++){restAgs[_key34-1]=arguments[_key34];}return Log.eDev.apply(Log,[true].concat([firstParam].concat(restAgs)));}},{key:\"ee\",value:function ee(){for(var _len19=arguments.length,restAgs=new Array(_len19),_key35=0;_key35<_len19;_key35++){restAgs[_key35]=arguments[_key35];}return Log.e.apply(Log,[true].concat(restAgs));}},{key:\"exDevv\",value:function exDevv(firstParam){for(var _len20=arguments.length,restAgs=new Array(_len20>1?_len20-1:0),_key36=1;_key36<_len20;_key36++){restAgs[_key36-1]=arguments[_key36];}return Log.exDev.apply(Log,[true].concat([firstParam].concat(restAgs)));}},{key:\"exx\",value:function exx(){for(var _len21=arguments.length,restAgs=new Array(_len21),_key37=0;_key37<_len21;_key37++){restAgs[_key37]=arguments[_key37];}return Log.ex.apply(Log,[true].concat(restAgs));}},{key:\"ii\",value:function ii(){for(var _len22=arguments.length,restAgs=new Array(_len22),_key38=0;_key38<_len22;_key38++){restAgs[_key38]=arguments[_key38];}return Log.i.apply(Log,[true].concat(restAgs));}},{key:\"ll\",value:function ll(){for(var _len23=arguments.length,restAgs=new Array(_len23),_key39=0;_key39<_len23;_key39++){restAgs[_key39]=arguments[_key39];}return Log.l.apply(Log,[true].concat(restAgs));}},{key:\"ww\",value:function ww(){for(var _len24=arguments.length,restAgs=new Array(_len24),_key40=0;_key40<_len24;_key40++){restAgs[_key40]=arguments[_key40];}return Log.w.apply(Log,[true].concat(restAgs));}}]);return Log;}(),_class7.lastError=void 0,_class7.loggerMapping={},_class7))||_class6);export var FileReadTypeEnum=function FileReadTypeEnum(){_classCallCheck(this,FileReadTypeEnum);};// console.info('loaded ts U');\nFileReadTypeEnum.image=\"image/*\";FileReadTypeEnum.audio=\"audio/*\";FileReadTypeEnum.video=\"video/*\";FileReadTypeEnum.AndManyOthersButThereAreTooMuch=\"And many others... https://www.iana.org/assignments/media-types/media-types.xhtml\";FileReadTypeEnum.OrJustPutFileExtension=\"OrJustPutFileExtension\";","map":{"version":3,"names":["JsType","LModelElement","LNamedElement","MyError","RuntimeAccessible","store","windoww","Swal","Storage","compressToUTF16","decompressFromUTF16","console","warn","Color","_dec","_class","r","g","b","_classCallCheck","_createClass","key","value","getHex","undefined","mixWith","c","getHLS","duplicate","fromHex","hex","fromHLS","_ref","h","l","s","U","_dec2","_class3","_class4","_decompressState","_asyncToGenerator","_regeneratorRuntime","mark","_callee","state","wrap","_callee$","_context","prev","next","abrupt","sent","stop","decompressState","_x","apply","arguments","_compressedState","_callee2","_callee2$","_context2","JSON","stringify","getState","compressedState","isOffline","read","refresh","window","location","reload","extractByKey","dict","path","keys","split","topic","data","values","Array","isArray","_iterator","_createForOfIteratorHelper","_step","n","done","d","_iterator2","_step2","k","hasOwnProperty","err","e","f","push","extractKeys","traverse","obj","concat","wrapper","json","dElement","parse","__raw","hexToPalette","_len","length","hexs","_key3","type","map","substring","a","Number","parseInt","Log","exDev","i","fatherChain","me","fathers","id","toCheck","element","pop","father","isShallowEqualWithProxies","obj1","obj2","skipKeys","out","depth","maxDepth","returnIfMaxDepth","tobj1","tobj2","reason","error","isNaN","toString","o1Raw","o2Raw","className","clonedCounter","oldp","newp","deepEqual","x","y","tx","ty","Object","every","sleep","Promise","resolve","setTimeout","getRandomString","characters","randomString","index","randomNumber","Math","floor","random","charAt","alert","title","text","color","toLowerCase","html","result","fire","backdrop","showCloseButton","showConfirmButton","popup","filteredPointedBy","label","models","_iterator3","pointedBy","_step3","source","fromPointer","getFatherFieldToDelete","field","initializeValue","typeclassifier","pointer","name","Date","toJSON","slice","orderChildrenByTimestamp","context","children","proxyObject","orderedChildren","Map","_iterator4","_step4","child","timestamp","set","_toConsumableArray","entries","sort","followPath","base","patharr","base0","ret","chain","lastObject","lastkey","failedRemainingPath","lastval","Error","multiReplaceAllKV","kv","vals","multiReplaceAll","searchText","replacement","replaceAll","str","debug","join","toFileName","trim","objectMergeInPlace","output","_len2","objarr","_key6","_iterator5","_step5","o","_out$_key","log","clear","removeEmptyObjectKeys","_i","_Object$keys","objectMergeInPlace_conditional","condition","_len3","_key9","_i2","_objarr","buildFunctionDocumentation","isFunction","parameters","returns","fname","isLambda","signature","starti","indexOf","endi","parcounter","parameterStr","substr","returnstarti","returnendi","bodystarti","max","regexp","match","exec","par","defaultVal","typedesc","parseFunctionWithContextAndScope","codeStr0","context0","scope0","codestrParamNames","protectShallowValues","doIdentifierValidation","codeStr","scopeParams","scope","scopekeys","_key11","validIdentfierRegexp","test","filter","innerFuncParams","_jevalfunc","evalmode","params","eval","Function","bind","evalInContextAndScopeNew","injectScopeToo","evalInContextAndScope","ex","_ret","_objectSpread","__proto__","w","eDev","prefixDeclarations","postfixDeclarations","isStrict","_eval","__codeStr","call","_ref2","_len4","_key13","execInContextAndScope","func","execInScope_DO_NOT_USE","_construct","evalInContext","js","highOrderFunctionExampleTyped","funcName","cname","time","results","timeEnd","asClass","classe","elseReturn","asString","propKey","isString","loadScript","useEval","script","document","createElement","src","body","append","ancestorArray","domelem","stopNode","includeSelf","arr","tmp","parentNode","toHtml","container","containerTag","innerHTML","firstChild","removeChild","levenshtein","cost","min","getClosestPropertyName","names","lowest","Infinity","reduce","previous","current","distance","getClosestPropertyNames","distances","autoCorrectProxy","target","recursive","logger","Proxy","get","namestr","suggestions","getOwnPropertyNames","arrayRemoveAll","elem","splice","arrayUnique","Set","fileReadContent","file","callback","textType","reader","FileReader","onload","readAsText","fileRead","onChange","extensions","readContent","myFileReader","show","htmlNode","clearAllTimeouts","highestTimeoutId","clearTimeout","getStackTrace","sliceCalls","stack","getCaller","stacksToSkip","isFirstTimeCalledByThisLine","caller","gotcalledby","lineKey","preventBackSlashHistoryNavigation","event","types","srcElement","$","disabled","prop","isContentEditable","is","attr","preventDefault","SetMerge","modifyFirst","_len5","iterables","_key15","_i3","_iterables","iterable","_iterator6","_step6","item","add","ArrayMergeU","arr1","_len6","arr2","_key16","ArrayMerge0","ArrayMerge","_len7","_key17","unique","arrtarget","_len8","arrays","_key18","_iterator7","_step7","arri","_iterator8","_step8","ArrayAdd","_iterator9","_step9","prototype","throwIfContained","getType","param","_param$constructor","constructor","stringCompare","s1","s2","endsWith","suffix","_iterator10","_step10","suf","lastIndexOf","arrayMergeInPlace","_len9","otherArrs","_key19","_i4","_otherArrs","getEndingNumber","ignoreNonNumbers","allowDecimal","numberEnd","parseFloat","increaseEndingNumber","allowLastNonNumberChars","increaseWhile","regexpstr","matches","RegExp","prefix","num","shallowEqual","objA","objB","keysA","keysB","keya","isNumber","getAllPrototypes","_constructor$prototyp","_constructor$__proto_","chainoutoutrecursive","currentRecursion","maxRecursion","cache","__allprototypes","classIsExtending","subconstructor","superconstructor","_extends","includes","isObject","v","returnIfNull","returnIfUndefined","retIfArray","objectFromArray","getKey","acc","val","objectFromArrayValues","toBoolString","bool","ifNotBoolean","fromBoolString","allowNull","allowUndefined","arrayDifference","starting","final","removed","Uarr","arraySubtract","added","objectDelta","old","neww","deep","newwobj","oldobj","diff","objdiff","changed","subold","subnew","removedprefix","unchanged","flattenObjectToRoot","pathseparator","pre","assign","ObjectToAssignementStrings","maxkeylength","maxsubpaths","maxvallength","toolongreplacer","quotestrings","valueseparator","filterrow","rowpaths","flatten","halfpath","start","end","ceil","halfval","halfsubpaths","bestpathsize","best","countsize","total","arrelem","filterbest","row","pathlength","fullstr","fullpath","fullvalue","p","download","filename","htmla","blob","Blob","endings","blobUrl","URL","createObjectURL","style","display","href","appendChild","click","revokeObjectURL","formatXml","xml","reg","wsexp","contexp","replace","pad","formatted","lines","indent","lastType","transitions","ln","single","Boolean","closing","opening","fromTo","padding","j","circularStringify","replacer","space","maxDepth_unsupported","getFirstNumber","allowDecimalDot","allowDecimalComma","valueifmismatch","commamode","floatregex","intregex","tmpindex","isEmptyObject","pairArrayElementsRepeatFunc","pairArrayElementsReducerFunc","accumulator","array","pairArrayElements","withRepetitions","decomment_all","decomment_line","decomment_block","trimLines","uppercaseFirstLetter","toUpperCase","wrapUserFunction","stringMiddleCut","maxLength","ellipsisChar","asArray","midpoint","toremove","lstrip","rstrip","invertHex","transformGrays","ee","abs","rs","gs","bs","hs","parentUntil","tagName","parentElement","paletteSplit","palette","number","_i5","_Object$entries","entry","mergeNamedArray","classes","_iterator11","_step11","toNamedArray","larr","darr","maxID","idPrefix","getID","idgenerator","idgenerator$","_context3","DDate","addDay","date","offset","inplace","setDate","getDate","addMonth","setMonth","getMonth","addYear","setFullYear","getFullYear","setinfos","fileTypes","onchange","readcontent","input","files","contentObj","fileLetti","_loop","content","_input$files","contentArr","reset","setAttribute","on","trigger","_dec3","_class5","arrayIntersection","inPlace","equals","a1","a2","FocusHistoryEntry","evt","ShortDefaultEClasses","ShortAttribETypes","ShortAttribSuperTypes","EString","EByte","EShort","EInt","ELong","EFloat","EDouble","ecoreprefix","ecoreclasprefix","toShortEType","toLongEType","AttribETypes","toShortEClass","toLongEClass","DefaultEClasses","SelectorOutput","jqselector","attrselector","attrRegex","exception","resultSetAttr","resultSetElem","Keystrokes","ParseNumberOrBooleanOptions","defaultValue","nullValue","undefinedValue","allowedNan","nanValue","NaN","allowBooleans","trueValue","falseValue","_dec4","_class6","_class7","registerLogger","triggerAt","tname","loggerMapping","disableConsole","enableConsole","_log","_x2","_x3","_x4","_x5","category","originalFunc","_len10","restArgs","_key26","String","_iterator12","_step12","_len11","_key27","lastError","_len12","_key28","_len13","_key29","e1","_len14","_key30","_len15","_key31","_len16","_key32","_len17","_key33","eDevv","firstParam","_len18","restAgs","_key34","_len19","_key35","exDevv","_len20","_key36","exx","_len21","_key37","ii","_len22","_key38","ll","_len23","_key39","ww","_len24","_key40","FileReadTypeEnum","image","audio","video","AndManyOthersButThereAreTooMuch","OrJustPutFileExtension"],"sources":["C:/d/Programming/web/jodel-mde/src/common/U.ts"],"sourcesContent":["// import * as detectzoooom from 'detect-zoom'; alternative: https://www.npmjs.com/package/zoom-level\r\n// import {Mixin} from \"ts-mixer\";\r\nimport type {\r\n    AbstractConstructor,\r\n    Constructor,\r\n    Dictionary,\r\n    DocString,\r\n    GObject,\r\n    Pointer,\r\n    PrimitiveType,\r\n    Temporary,\r\n    LPointerTargetable,\r\n    DPointerTargetable,\r\n} from \"../joiner\";\r\nimport {\r\n    DClassifier,\r\n    DModelElement,\r\n    Json,\r\n    JsType,\r\n    LClassifier,\r\n    LModelElement,\r\n    LNamedElement,\r\n    LogicContext,\r\n    MyError,\r\n    RuntimeAccessible,\r\n    RuntimeAccessibleClass, store,\r\n    windoww\r\n} from \"../joiner\";\r\nimport Swal from \"sweetalert2\";\r\nimport Storage from '../data/storage';\r\nimport {compressToUTF16, decompressFromUTF16} from \"async-lz-string\";\r\nimport {NumberControl, PaletteControl, PaletteType, PathControl, StringControl} from \"../view/viewElement/view\";\r\nimport tinycolor from \"tinycolor2\";\r\nimport {StringDecoder} from \"string_decoder\";\r\n// import KeyDownEvent = JQuery.KeyDownEvent; // https://github.com/tombigel/detect-zoom broken 2013? but works\r\n\r\nconsole.warn('loading ts U log');\r\n\r\n@RuntimeAccessible('Color')\r\nexport class Color {\r\n    r: number;\r\n    g: number;\r\n    b: number;\r\n\r\n    constructor(r: number, g: number, b: number) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n    }\r\n\r\n    static fromHex(hex:string): Color {\r\n        return undefined as any;\r\n    }\r\n    static fromHLS({h, l, s}:{h: number, l:number, s: number}): Color {\r\n        return undefined as any;\r\n    }\r\n    getHex(): string {\r\n        return undefined as any;\r\n    }\r\n    mixWith(c: Color): void {\r\n\r\n    }\r\n    getHLS(): {h: number, l:number, s: number} {\r\n        return undefined as any;\r\n    }\r\n    duplicate(): Color {\r\n        return undefined as any;\r\n    }\r\n}\r\n@RuntimeAccessible('U')\r\nexport class U {\r\n\r\n    static async decompressState(state: string): Promise<string> {\r\n        return await decompressFromUTF16(state);\r\n    }\r\n    static async compressedState(): Promise<string> {\r\n        return await compressToUTF16(JSON.stringify(store.getState()));\r\n    }\r\n    static isOffline(): boolean {\r\n        return Storage.read('offline') === 'true';\r\n    }\r\n    static refresh(): void {\r\n        window.location.reload();\r\n    }\r\n\r\n    static extractByKey(dict: Dictionary, path: string): PrimitiveType[]|undefined {\r\n        const keys = path.split('.');\r\n        const topic = keys[0];\r\n        const data = dict[topic];\r\n        const values: PrimitiveType[] = [];\r\n        if(!Array.isArray(data)) return undefined;\r\n        for(const d of data) {\r\n            let value = d;\r\n            for (const k of keys) if (value.hasOwnProperty(k)) value = value[k];\r\n            values.push(value);\r\n        }\r\n        return values;\r\n\r\n    }\r\n\r\n    static extractKeys(dict: Dictionary): string[] {\r\n        const keys: string[] = [];\r\n        function traverse(obj: any, path: string) {\r\n            for (const key in obj) {\r\n                if (typeof obj[key] === 'object') traverse(obj[key], path ? `${path}.${key}` : key);\r\n                else keys.push(path ? `${path}.${key}` : key);\r\n            }\r\n        }\r\n        for (const key in dict) {\r\n            traverse(dict[key][0], key);\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    // damiano: eseguire una funzione costa in performance, anche se è brutto fare questi cast\r\n    static wrapper<T>(obj: any): T {\r\n        return obj as unknown as T;\r\n    }\r\n    // damiano: mi sa che c'era un metodo l.__serialize or something\r\n    static json(dElement: GObject): Json {\r\n        return JSON.parse(JSON.stringify(dElement.__raw));\r\n    }\r\n\r\n    static hexToPalette(...hexs: string[]): PaletteControl{\r\n        return {type: \"color\", value: hexs.map( hex => {\r\n                if (hex[0] === '#') hex = hex.substring(1);\r\n                let r: number, g: number, b: number, a: number = 1;\r\n                if (hex.length === 4) {\r\n                    a = Number.parseInt('0x' + hex[3] + hex[3])/255;\r\n                    hex = hex.substring(0, 3);\r\n                }\r\n                if (hex.length === 7) {\r\n                    a = Number.parseInt('0x' + hex[5] + hex[6])/255;\r\n                    hex = hex.substring(0, 6);\r\n                }\r\n                Log.exDev(hex.length !== 3 && hex.length !== 6, \"invalid hex length\", {hex, a});\r\n                let i: number = 0;\r\n                if (hex.length === 3) {\r\n                    r =  Number.parseInt('0x' + hex[i] + hex[i++]);\r\n                    g =  Number.parseInt('0x' + hex[i] + hex[i++]);\r\n                    b =  Number.parseInt('0x' + hex[i] + hex[i]);\r\n                }\r\n                else {\r\n                    r =  Number.parseInt('0x' + hex[i++] + hex[i++]);\r\n                    g =  Number.parseInt('0x' + hex[i++] + hex[i++]);\r\n                    b =  Number.parseInt('0x' + hex[i++] + hex[i]);\r\n                }\r\n                return {r,g,b,a} as tinycolor.ColorFormats.RGBA;\r\n            })};\r\n    }\r\n    public static fatherChain(me: LModelElement): Pointer<DModelElement, 0, 'N', LModelElement> {\r\n        if(!me) return [];  // without this line go through delete error\r\n        const fathers: Pointer<DModelElement, 0, 'N', LModelElement>= [me.id];\r\n        const toCheck: LModelElement[] = [me];\r\n        while(toCheck.length > 0) {\r\n            const element = toCheck.pop();\r\n            if(element && element.father) {\r\n                fathers.push(element.father.id);\r\n                toCheck.push(element.father);\r\n            }\r\n        }\r\n        return fathers;\r\n    }\r\n\r\n    /// maxDepth = 2 is the minimum to check the content of objects inside usageDeclarations or node state. like node.errors.naming\r\n    static isShallowEqualWithProxies(obj1: GObject, obj2: GObject, skipKeys: Dictionary<string, any>={}, out?: {reason?: string},\r\n                                     depth: number = 0, maxDepth: number = 2, returnIfMaxDepth:boolean = false): boolean {\r\n        let tobj1 = obj1 === null ? 'null' : typeof obj1;\r\n        let tobj2 = obj2 === null ? 'null' : typeof obj2;\r\n        if (obj1 === obj2) {\r\n            // if (out) { out.reason = \"identical objects\"; }\r\n            return true; }\r\n        if (tobj1 !== tobj2) { if (out) { out.reason = \"type changed: \" + tobj1 + \" --> \" + tobj2; } return false; }\r\n\r\n        // at this point: same type, but different values\r\n        switch (tobj1) {\r\n            default: // primitive with different values\r\n                console.error(\"unexpected case in isshallowequal:\", {tobj1, obj1, obj2});\r\n                if (out) {\r\n                    if (undefined === tobj1) out.reason = 'primitive value newly introduced';\r\n                    else if (undefined === tobj2) out.reason = 'primitive value got deleted';\r\n                    else out.reason = 'primitive value changedd';\r\n                }\r\n                return false;\r\n            case 'string': case 'boolean': // primitive with different values\r\n                if (out) {\r\n                    if (undefined === tobj1) out.reason = 'primitive value newly introduced';\r\n                    else if (undefined === tobj2) out.reason = 'primitive value got deleted';\r\n                    else out.reason = 'primitive value changedd';\r\n                }\r\n                return false;\r\n            case \"number\": // if both re nan it fails\r\n                // NB: infinities are not nan, and they compare with === like normal numbers. weird js...\r\n                if (isNaN(obj1 as any) && isNaN(obj2 as any)) return true;\r\n                if (out) out.reason = 'number changed';\r\n                return false;\r\n\r\n            case \"function\":\r\n                if (obj1.toString() === obj2.toString()) break;\r\n                if (out) out.reason = 'function body changed';\r\n                return false;\r\n\r\n            case \"object\":\r\n                let o1Raw = obj1.__raw;\r\n                let o2Raw = obj2.__raw;\r\n                if (o1Raw) {\r\n                    if (!o2Raw) {\r\n                        if (out) out.reason = o1Raw.className + 'replaced by another object type:' + o2Raw?.className;\r\n                        return false;\r\n                    }\r\n                    obj1 = o1Raw;\r\n                    obj2 = o2Raw;\r\n                }\r\n                // for proxies and DObjects\r\n                if (obj1.clonedCounter !== undefined && obj2.clonedCounter !== obj1.clonedCounter) {\r\n                    if (out) out.reason = 'clonedCounter difference ' + obj1.clonedCounter+ ' != ' + obj2.clonedCounter;\r\n                    return false;\r\n                }/*\r\n                if (obj1.className !== obj2.className) {\r\n                 removed: too unlikely to happen that a DObject is raplaced in the same path with another type of DObject with same clonedCounter\r\n                 nd it's checked anyway in for(let key in obj1)\r\n                    if (out) out.reason = o1Raw.className + 'replaced by another object type:' + o2Raw?.className;\r\n                    return false;\r\n                }*/\r\n                if (Array.isArray(obj1)) {\r\n                    if (obj1.length !== obj2.length) {\r\n                        if (out) out.reason = 'array length different: ' + obj1.length + \" !== \" + obj2.length;\r\n                        return false;\r\n                    }\r\n                    if (!Array.isArray(obj2)){\r\n                        if (out) out.reason = 'array became an object';\r\n                        return false;\r\n                    }\r\n                }\r\n                if (depth > maxDepth) {\r\n                    // to debug and see where is too deep, make returnIfMaxDepth = false, so the path is displayed in out.reason\r\n                    if (out) out.reason = 'max depth reached, assumed ' + returnIfMaxDepth;\r\n                    return returnIfMaxDepth;\r\n                }\r\n                for (let key in obj1) {\r\n                    if (key in skipKeys) continue;\r\n                    let oldp: any = obj2[key];\r\n                    let newp: any = obj1[key];\r\n                    if (oldp === newp) continue;\r\n                    if (!U.isShallowEqualWithProxies(newp, oldp, skipKeys, out, depth +1, maxDepth, returnIfMaxDepth)) {\r\n                        if (out) out.reason = '['+key+']'+out.reason;\r\n                        return false;\r\n                    }\r\n                }\r\n                // just check for keys that were in props and are not in nextProps\r\n                for (let key in obj2) {\r\n                    if ((key in skipKeys) || (key in obj1)) continue;\r\n                    if (out) out.reason = \"deleted subobject property: \" + key;\r\n                    return false;\r\n                }\r\n            // else retIfMaxDepthReached; split the above if\r\n        }\r\n\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    public static deepEqual (x: GObject, y: GObject): boolean {\r\n        const tx = typeof x, ty = typeof y;\r\n        return x && y && tx === 'object' && tx === ty ? (\r\n            Object.keys(x).length === Object.keys(y).length && Object.keys(x).every(key => U.deepEqual(x[key], y[key]))\r\n        ) : (x === y);\r\n    }\r\n\r\n    public static sleep(s: number): Promise<void> {\r\n        return new Promise((resolve) => setTimeout(resolve, s * 1000));\r\n    }\r\n\r\n    public static getRandomString(length: number): string {\r\n        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n        let randomString = '';\r\n        let index = 0;\r\n        while(index < length) {\r\n            const randomNumber = Math.floor(Math.random() * characters.length);\r\n            randomString += characters.charAt(randomNumber);\r\n            index += 1;\r\n        }\r\n        return randomString;\r\n    }\r\n\r\n    public static alert(title: string, text: string) {\r\n        let color = 'text-';\r\n        switch(title.toLowerCase()) {\r\n            case 'error': color += 'danger'; break;\r\n            default: color += 'primary'\r\n        }\r\n        let html = '<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>';\r\n        html += `<div><b><label class='fs-5 mb-2 text-uppercase ${color}'>${title}</label></b><hr/>`;\r\n        html += `<label class='fs-6 mt-3'>${text}</label><br/>`;\r\n        const result = Swal.fire({\r\n            html: html,\r\n            backdrop: false,\r\n            showCloseButton: true,\r\n            showConfirmButton: false\r\n            //confirmButtonText: 'GOT IT'\r\n        })\r\n    }\r\n\r\n    public static popup(element: any) {\r\n        let html = '<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>'+ element;\r\n        const result = Swal.fire({\r\n            html: html,\r\n            backdrop: false,\r\n            showCloseButton: true,\r\n            showConfirmButton: false\r\n            //confirmButtonText: 'GOT IT'\r\n        })\r\n    }\r\n    public static filteredPointedBy(data: LModelElement, label: string): LModelElement[] {\r\n        const models: LModelElement[] = [];\r\n        for(let dict of data.pointedBy) {\r\n            const pointedBy = dict.source.split('.');\r\n            if(pointedBy.length === 3 && pointedBy[2] === label) {\r\n                models.push(LModelElement.fromPointer(pointedBy[1]));\r\n            }\r\n        }\r\n        return models;\r\n    }\r\n\r\n    public static getFatherFieldToDelete(data: LModelElement): keyof DModelElement|null {\r\n        const father = data.father;\r\n        let field = '';\r\n        switch(father.className + '|' + data.className) {\r\n            // DPackage\r\n            case 'DModel|DPackage': field = 'packages'; break;\r\n            case 'DPackage|DPackage': field = 'subpackages'; break;\r\n            // DEnumerator and DClass\r\n            case 'DPackage|DEnumerator':\r\n            case 'DPackage|DClass': field = 'classifiers'; break;\r\n            // DAttribute\r\n            case 'DClass|DAttribute': field = 'attributes'; break;\r\n            // DReference\r\n            case 'DClass|DReference': field = 'references'; break;\r\n            // DOperation\r\n            case 'DClass|DOperation': field = 'operations'; break;\r\n            // DEnumLiteral\r\n            case 'DEnumerator|DEnumLiteral': field = 'literals'; break;\r\n            // DObject\r\n            case 'DModel|DObject': field = 'objects'; break;\r\n            // DParameter\r\n            case 'DOperation|DParameter': field = 'parameters'; break;\r\n            // DValue\r\n            case 'DObject|DValue': field = 'features'; break;\r\n            // Error\r\n            default: return null;\r\n        }\r\n        return field as keyof DModelElement;\r\n    }\r\n\r\n    public static initializeValue(typeclassifier: undefined|DClassifier|LClassifier|Pointer<DClassifier, 1, 1, LClassifier>): string {\r\n        // if(!classifier) return 'null';\r\n        const pointer: Pointer = typeof typeclassifier === 'string' ? typeclassifier : (typeclassifier as DClassifier)?.id;\r\n        const me: LNamedElement = LNamedElement.fromPointer(pointer);\r\n        switch(me?.name) {\r\n            default:\r\n            case 'EString': return '';\r\n            case 'EChar':  return 'a';\r\n            case 'EInt': return '0';\r\n            case 'ELong': return '0';\r\n            case 'EShort': return '0';\r\n            case 'Byte': return '0';\r\n            case 'EFloat': return '0';\r\n            case 'EDouble': return '0';\r\n            case 'EBoolean': return 'false';\r\n            case 'EDate': return new Date().toJSON().slice(0,10);\r\n        }\r\n        return 'null';\r\n    }\r\n\r\n    public static orderChildrenByTimestamp(context: LogicContext): LModelElement[] {\r\n        const children = context.proxyObject.children;\r\n        if(children && children.length > 0) {\r\n            let orderedChildren = new Map<number, LModelElement>();\r\n            for(let child of children) {\r\n                let timestamp = child.id.slice(-13);\r\n                orderedChildren.set(+timestamp, child);\r\n            }\r\n            orderedChildren = new Map([...orderedChildren.entries()].sort());\r\n            return [...orderedChildren.values()];\r\n        } else return [];\r\n    }\r\n\r\n\r\n    public static followPath(base: GObject, path: string): {chain: GObject[], lastObject: GObject, keys:string[], lastkey: string, lastval: any, failedRemainingPath: string[]} {\r\n        let patharr = path.split('.');\r\n        let base0 = base;\r\n        let ret: {chain: GObject[], lastObject: GObject, keys: string[], lastkey: string, lastval: any, failedRemainingPath: string[]}  = {} as any;\r\n        ret.keys = patharr;\r\n        ret.chain = [base];\r\n        let lastObject = base;\r\n\r\n        for (let i = 0; i < patharr.length; i++) {\r\n            let path = ret.lastkey = patharr[i];\r\n            lastObject = base;\r\n            base = base[path];\r\n            ret.chain.push(base);\r\n            if (typeof base !== \"object\" || i + 1 === patharr.length) {\r\n                ret.failedRemainingPath = patharr.slice(i);\r\n                ret.lastval = base;\r\n                ret.lastObject = lastObject;\r\n                return ret;\r\n            }\r\n        }\r\n        throw new Error(\"followPath should never reach here\");\r\n        return ret;\r\n    }\r\n\r\n    static multiReplaceAllKV(a: string, kv: string[][] = []): string {\r\n        const keys: string[] = [];\r\n        const vals: string[] = [];\r\n        let i: number;\r\n        for (i = 0; i < kv.length; i++) { keys.push(kv[i][0]); vals.push(kv[i][0]); }\r\n        return U.multiReplaceAll(a, keys, vals); }\r\n\r\n    // if replacement is empty, it will be filled with '';\r\n    // if replacement length < searchText, replacement will be filled with copies of his elements cycling from 0 to his length until his length matches searchText.length\r\n    static multiReplaceAll(a: string, searchText: string[] = [], replacement: string[] = []): string {\r\n        // Log.ex(searchText.length !== replacement.length, 'search and replacement must be have same length: ' + searchText.length + \"vs\" + replacement.length + \" \" +JSON.stringify(searchText) + \"   \" + JSON.stringify(replacement));\r\n        let i = -1;\r\n        while (replacement.length !== 0 && replacement.length < searchText.length) replacement.push(replacement[++i]);\r\n        i = -1;\r\n        while (++i < searchText.length) { a = U.replaceAll(a, searchText[i], replacement[i]); }\r\n        return a; }\r\n\r\n    static replaceAll(str: string, searchText: string, replacement: string | undefined, debug: boolean = false, warn: boolean = true): string {\r\n        if (!str) { return str; }\r\n        return str.split(searchText).join(replacement||''); }\r\n\r\n    static toFileName(a: string = 'nameless.txt'): string {\r\n        if (!a) { a = 'nameless.txt'; }\r\n        a = U.multiReplaceAll(a.trim(), ['\\\\', '//', ':', '*', '?', '<', '>', '\"', '|'],\r\n            ['[lslash]', '[rslash]', ';', '°', '_', '{', '}', '\\'', '!']);\r\n        return a;\r\n    }\r\n\r\n\r\n    // warn: this check if the scope containing the function is strict, to check if a specific external scope-file is strict\r\n    // you have to write inline the code:        var isStrict = true; eval(\"var isStrict = false\"); if (isStrict)...\r\n    // @ts-ignore\r\n    public static isStrict: boolean = ( function() { return !this; })();\r\n\r\n    // merge properties with first found first kept (first parameters have priority on override). only override null|undefined values, not (false|0|'') values\r\n    static objectMergeInPlace<A extends object, B extends object>(output: A, ...objarr: B[]): void {\r\n        const out: GObject = output;\r\n        if (objarr)\r\n            for (let o of objarr) {\r\n                if (o && typeof o === \"object\")\r\n                    for (let key in o) {\r\n                        // noinspection BadExpressionStatementJS,JSUnfilteredForInLoop\r\n                        out[key] ?? (out[key] = o[key]);\r\n                    }\r\n            }\r\n    }\r\n\r\n    public static log(obj: unknown, label: string = '###') {\r\n        console.clear();\r\n        console.log(label, obj);\r\n    }\r\n\r\n    static removeEmptyObjectKeys(obj: GObject): void{\r\n        for (let key of Object.keys(obj)) {\r\n            if (obj[key] === null || obj[key] === undefined) delete obj[key];\r\n        }\r\n    }\r\n\r\n    // usage example: objectMergeInPlace_conditional(baseobj, (out, key, current) => !out[key] && current[key];\r\n    // culprit of \"couldn't find intersection\" problem: condition type: (out:A&B, key: string | number, current:B, objarr?: B[], indexOfCurrent?: number) => boolean\r\n    static objectMergeInPlace_conditional<A extends GObject, B extends GObject>(output: A, condition: (...a:any)=>any, ...objarr: B[]): A & B {\r\n        const out: GObject<\"A & B\"> = output;\r\n        let i: number = 0;\r\n        for (let o of objarr) for (let key in o) { if (condition(out, key, o, objarr, i++)) out[key] = o[key]; }\r\n        return out as  A & B; }\r\n\r\n    static buildFunctionDocumentation(f: Function): {parameters: {name: string, defaultVal: string | undefined, typedesc: string | null}[], returns: string | undefined, f: Function, fname: string | undefined, isLambda: boolean, signature: string} {\r\n        Log.e(!JsType.isFunction(f), 'getFunctionSignature() parameter must be a function', f);\r\n        // let parameters: {name: string, defaultVal: string, typedesc: string}[] = []; //{name: '', defaultVal: undefined, typedesc: ''};\r\n        let ret: {parameters: {name: string, defaultVal: string | undefined, typedesc: string | null}[], returns: string | undefined, f: Function, fname: string | undefined, isLambda: boolean, signature: string}\r\n            = {parameters: [], returns: undefined, f: f, fname: undefined, isLambda: null as Temporary, signature: ''};\r\n        let str: string = f.toString();\r\n        let starti: number = str.indexOf('(');\r\n        let endi: number;\r\n        let parcounter: number = 1;\r\n        for (endi = starti + 1; endi < str.length; endi++) {\r\n            if (str[endi] === ')' && --parcounter === 0) break;\r\n            if (str[endi] === '(') parcounter++; }\r\n\r\n        let parameterStr = str.substring(starti + 1, endi);\r\n        // console.log('getfuncsignature starti:', starti, 'endi', endi, 'fname:', str.substr(0, starti), 'parameterStr:', parameterStr);\r\n        ret.fname = str.substr(0, starti).trim();\r\n        ret.fname = ret.fname.substr(0, ret.fname.indexOf(' ')).trim();\r\n        // 2 casi: anonimo \"function (par1...){}\" e \"() => {}\", oppure nominato: \"function a1(){}\"\r\n        if (ret.fname === '' || ret.fname === 'function') ret.fname = undefined; // 'anonymous function';\r\n\r\n\r\n\r\n        let returnstarti: number = str.indexOf('/*', endi + 1);\r\n        let returnendi: number = -1;\r\n        let bodystarti: number = str.indexOf('{', endi + 1);\r\n        if (returnstarti === -1 || bodystarti !== -1 && bodystarti < returnstarti) {\r\n            // no return type or comment is past body\r\n            ret.returns = undefined;\r\n        } else {\r\n            returnendi = str.indexOf('*/', returnstarti + 2);\r\n            ret.returns = str.substring(returnstarti + 2, returnendi).trim();\r\n            bodystarti = str.indexOf('{', returnendi); }\r\n        if (ret.returns === '') ret.returns = undefined;\r\n\r\n        // is lambda if do not have curly body or contains => between return comment and body\r\n        // console.log('isLambda:', bodystarti, str.substring(Math.max(endi, returnendi)+1, bodystarti));\r\n        ret.isLambda =  bodystarti === -1 || str.substring((window as any).Math.max(endi, returnendi)+1, bodystarti).trim() === '=>';\r\n\r\n        let regexp = /([^=\\/\\,]+)(=?)([^,]*?)(\\/\\*[^,]*?\\*\\/)?,/g; // only problem: the last parameter won't match because it does not end with \",\", so i will append it everytime.\r\n        let match;\r\n        while ((match = regexp.exec(parameterStr + ','))) {\r\n            // match[0] is always the full match (not a capture group)\r\n            // match[2] can only be \"=\" or empty string\r\n            // nb: match[4] can be \"/*something*/\" or \",\" a single , without spaces.\r\n            let par: {name: string, defaultVal: string | undefined, typedesc: string | null} = {name: match[1], defaultVal: match[3], typedesc: match[4] && match[4].length > 1 ? match[4] : null};\r\n            par.name = par.name.trim();\r\n            par.defaultVal = par.defaultVal ? par.defaultVal.trim() : undefined;\r\n            par.typedesc = par.typedesc && par.typedesc && par.typedesc.length > 1 ? par.typedesc.substring(2, par.typedesc.length - 2).trim() || null : null;\r\n            ret.parameters.push(par); }\r\n        // set signature\r\n\r\n        ret.signature = '' + (ret.fname ? '/*' + ret.fname + '*/' : '') + '(';\r\n        let i: number;\r\n        for (i = 0; i < ret.parameters.length; i++) {\r\n            let par = ret.parameters[i];\r\n            ret.signature += (i === 0 ? '' : ', ') + par.name + (par.typedesc ? '/*' + par.typedesc + '*/' : '') + (par.defaultVal ? ' = ' + par.defaultVal : '');\r\n        }\r\n        ret.signature += ')' + (ret.returns ? '/*' + ret.returns + '*/' : '');\r\n        return ret; }\r\n\r\n\r\n\r\n    // NB: need to use result.apply(context) to have a usable \"this\"\r\n    // if you want to pass a parameter to the function, pass it through scope insteand !! AND UNDECLARE the parameter in function string signature !!\r\n    //if inner funcstr have parameters, need to declare them as codestrParamNames arr, and pass them in that order, after the scope which is fixed as first argument.\r\n    // rest values are declared with ellipsis in codestrParamNames\r\n    // !!! scope passed here, is only used for keys. values are not bound. scope is set as first parameter when you call the function.\r\n    // context is bound, but can be re-assigned by calling .bind(), .call() or .apply(), so neither context nor scope assigned in parsing phase are final.\r\n    // innerfunc params do not have to match the name on the string function, but only the correct amount. they can have any name i think, but i list them correctly to documentate.\r\n    public static parseFunctionWithContextAndScope<ParamNames extends string[], T extends Function = Function, TT extends GObject | undefined = GObject>(\r\n        codeStr0: string | Function, context0: GObject | undefined, scope0: TT, codestrParamNames?: ParamNames, protectShallowValues: boolean = false, doIdentifierValidation: boolean = false):\r\n        (TT extends undefined ? (...params: any)=>any : (scopee:TT, ...paramss: { [K in keyof ParamNames]: any;})=>any){\r\n        if (!codestrParamNames) codestrParamNames = [] as any;\r\n\r\n        let codeStr: string = typeof codeStr0 === \"function\" ? codeStr0.toString() : codeStr0;\r\n        let scopeParams: string = '';\r\n        let scope: GObject | undefined;\r\n        let context: GObject | undefined;\r\n        if (protectShallowValues) {\r\n            if (scope0) { //scope = {...scope0}; scope.__proto__ = scope0.__proto__; // for...in gets values in __proto__ too, {...o} instead gets only hasOwnProperty copied\r\n                scope = {};\r\n                for (let k in scope0) scope[k] = scope0[k];\r\n            } else scope = undefined;\r\n            if (context0) { // context = {...context0}; context.__proto__ = context0.__proto__;\r\n                context = {};\r\n                for (let k in context0) context[k] = context0[k];\r\n            } else context = undefined;\r\n        } else { scope = scope0; context = context0; }\r\n\r\n\r\n        if (scope) {\r\n            let scopekeys: string[] = Object.keys(scope);\r\n            if (doIdentifierValidation) scopekeys.map((key)=>{\r\n                key = key?.trim() || '';\r\n                if (!key || !U.validIdentfierRegexp.test(key)) return undefined;\r\n                return key;\r\n            }).filter(k=>!!k);\r\n            scopeParams = '{'+scopekeys.join(',')+'}';\r\n        }\r\n\r\n        let innerFuncParams = (codestrParamNames as string[]).join(',');\r\n        let _jevalfunc = undefined as any; // is set by eval\r\n        const evalmode = false;\r\n        console.log('parseFunctionWithContextAndScope', {codeStr, scope, context, params:{scopeParams, innerFuncParams}});\r\n        scopeParams = scopeParams && innerFuncParams ? scopeParams + ',' + innerFuncParams : scopeParams + innerFuncParams;\r\n        if (evalmode) {\r\n            codeStr = \"_jevalfunc = function (\"+scopeParams+\") { return (\"+codeStr+\")(\"+innerFuncParams+\") }\";\r\n            eval(codeStr);\r\n        } else {\r\n            _jevalfunc = new Function(scopeParams, \" return (\"+codeStr+\")(\"+innerFuncParams+\")\");\r\n        }\r\n\r\n        console.log('parseFunctionWithContextAndScope', {_jevalfunc, params:{scopeParams}});\r\n\r\n        if (context) return _jevalfunc.bind(context);\r\n        else return _jevalfunc;\r\n    }/*\r\n    public static evalInContextAndScope<T = any>(...a:any):any {return undefined}\r\n    public static evalInContextAndScopeNew<T = any>(...a:any):any {return undefined}*/\r\n    public static evalInContextAndScopeNew<T = any>(codeStr: string | ((...a:any)=>any), context0: GObject, injectScopeToo: boolean,\r\n                                                    protectShallowValues?: boolean, doIdentifierValidation?: boolean): T {\r\n        return U.evalInContextAndScope(codeStr, context0, injectScopeToo ? context0 : undefined, protectShallowValues, doIdentifierValidation);\r\n    }\r\n\r\n    // important! this is a simplified version. the correct one allows unicode chars and is 11kb long of regex expression\r\n    public static validIdentfierRegexp = /^[a-zA-Z_$][0-9a-zA-Z_$]*$/;\r\n\r\n    // warn: if return is not explicitly inserted (if that's the case set imlicitReturn = false) with a scope and the code have multiple statemepts it will fail.\r\n    // can modify scope AND context\r\n    // warn: can access global scope (window)\r\n    // if the context (this) is missing it will take the scope as context.\r\n    // warn: cannot set different scope and context, \"this\" della funzione sovrascrive anche il \"this\" interno allo scope come chiave dell'oggetto\r\n    // warn: !context && scope is impossible, so it gets autofixed by assigning context = scope; check Log messages inside function for details.\r\n    // warn: context && scope is impossible if context !== scope and cannot be hotfixed, that will cause a crash.\r\n    public static evalInContextAndScope<T = any>(codeStr: string | ((...a:any)=>any), scope0: GObject | undefined, context0?: GObject,\r\n                                                 protectShallowValues?: boolean, doIdentifierValidation?:boolean): T {\r\n        // console.log('evalInContextAndScope', {codeStr, scope, context});\r\n        // scope per accedere a variabili direttamente \"x + y\"\r\n        // context per accedervi tramite this, possono essere impostati come diversi.\r\n        if (!scope0 && !context0) { Log.ex(true, 'evalInContextAndScope: must specify at least one of scope || context', {codeStr, scope0, context0}); }\r\n\r\n        // scope.this = scope.this || context || scope; non funziona\r\n        // console.log('\"with(this){ return eval( \\'\" + codeStr + \"\\' ); }\"', \"with(this){ return eval( '\" + codeStr + \"' ); }\");\r\n        // eslint-disable-next-line no-restricted-syntax,no-with\r\n        // if (allowScope && allowContext) { return function(){ with(this){ return eval( '\" + codeStr + \"' ); }}.call(scopeAndContext); }\r\n        // if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr + \"' ); }\").call(scopeAndContext); }\r\n        let _ret: T = null as any;\r\n        let scope: GObject | undefined;\r\n        let context: GObject | undefined;\r\n        if (protectShallowValues) {\r\n            if (scope0) { scope = {...scope0, __proto__: scope0.__proto__}; scope.__proto__ = scope0.__proto__; } else scope = undefined;\r\n            if (context0) { context = {...context0, __proto__: context0.__proto__}; context.__proto__ = context0.__proto__; } else context = undefined;\r\n        } else { scope = scope0; context = context0; }\r\n\r\n        Log.w(!!(!context && scope),\r\n            \"evalInContextAndScope() Context is mandatory, as scope && !context case is not working properly \\n\" +\r\n            \"because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\\n\" +\r\n            \"Autofixed by assigning context = scope;\");\r\n        Log.eDev(!!((context && scope) && (context !== scope)),\r\n            \"evalInContextAndScope() Context and scope cannot be different if both present.\\n\" +\r\n            \"Because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\");\r\n        if (!context) context = scope; // se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\r\n\r\n\r\n        /*\r\n        if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr.replace(/'/g, \"\\\\'\") + \"' ); }\").call(scopeAndContext); }\r\n        if (!allowScope && allowContext) { return new Function( \"return eval( '\" + codeStr + \"' );\").call(scopeAndContext); }\r\n        if (allowScope && !allowContext) { return eval(\"with(scopeAndContext){ \" + codeStr + \" }\"); }*/\r\n//      U.pe(!!scope && U.isStrict(), 'cannot change scope while in strict mode (\"use strict\")');\r\n        let prefixDeclarations: string = \"\", postfixDeclarations: string = '';\r\n        if (scope) {\r\n            if (U.isStrict) {\r\n                for (let key in scope) {\r\n                    if (doIdentifierValidation) {\r\n                        key = key.trim();\r\n                        if (!key || !U.validIdentfierRegexp.test(key)) continue;\r\n                    }\r\n                    // anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\r\n                    prefixDeclarations += \"const \" + key + \"=this.\" + key + \";\";\r\n                    postfixDeclarations = \"\";\r\n                }\r\n            } else {\r\n                prefixDeclarations = \"with(\" + (context ? \"this._eval.\" : \"\") + \"scope){ \";\r\n                postfixDeclarations = \" }\";\r\n            }\r\n        }\r\n\r\n        if (scope && context) {\r\n            if (typeof codeStr === \"function\") { codeStr = codeStr.toString(); } // functions cannot change scope (with statement is deprecated)\r\n            (context as any)._eval = {__codeStr: codeStr}; // necessary to reach this._eval.codeStr inside the eval()\r\n            // console.log(\"evalincontextandscope: \", {fullCodeStr: prefixDeclarations + \"return eval( this._eval._codeStr );\" + postfixDeclarations, codeStr});\r\n            _ret = new (Function as any)(prefixDeclarations + \"; return eval( this._eval.__codeStr );\" + postfixDeclarations).call(context);\r\n            delete (context as any)._eval;\r\n        } else\r\n        if (!scope && context) {\r\n            if (typeof codeStr === \"function\") {\r\n                _ret = (function(...a: any){ return (codeStr as Function).call(context, ...a)}) as any;\r\n                // _ret = (...a: any)=>codeStr.call(context, ...a);\r\n            } else {\r\n                // cannot just eval(codeStr).call(context) because the result might not be a function but only a piece of code or an expression\r\n                (context as any)._eval = {__codeStr: codeStr}; // necessary to reach this._eval.codeStr inside the eval()\r\n                _ret = new (Function as any)(\"return eval( this._eval.__codeStr );\").call(context);\r\n                delete (context as any)._eval;\r\n                // this below  is not good, as i need to quote the expanded result of codeStr,\r\n                // but since it might contain quotes as well i would need to escape them too.\r\n                // _ret = new (Function as any)(\"return eval( \" + codeStr + \" );\").call(context);\r\n            }\r\n        } else\r\n        if (scope && !context) {\r\n            // NB: potrei creare lo scope con \"let key = value;\" per ogni chiave, ma dovrei fare json stringify e non è una serializzazione perfetta e può dare eccezioni(circolarità)\r\n            // console.log({isStrict: U.isStrict, eval: \"eval(\" + prefixDeclarations + codeStr + postfixDeclarations + \")\"});\r\n            if (typeof codeStr === \"function\") { codeStr = codeStr.toString(); } // functions cannot change scope (with statement is deprecated)\r\n            _ret = eval(prefixDeclarations + codeStr + postfixDeclarations); }\r\n\r\n        return _ret; }\r\n\r\n    //T extends ( ((...args: any[]) => any) | (() => any)\r\n    public static execInContextAndScope<T extends (...args: any) => any>(func: T, parameters: Parameters<T>, scope?: GObject, context?: GObject): ReturnType<T>{\r\n        Log.l(false, 'execInCtxScope', {func, parameters, scope, context});\r\n        let ret: any;\r\n        const _eval = {context, scope, func, parameters: parameters || []};\r\n        let prefixDeclarations: string = \"\", postfixDeclarations: string = '';\r\n        if (scope) {\r\n            if (U.isStrict) {\r\n                for (let key in scope) {\r\n                    // anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\r\n                    prefixDeclarations += \"const \" + key + \" = this.\" + key + \"; \";\r\n                    postfixDeclarations = \"\";\r\n                }\r\n            } else {\r\n                prefixDeclarations = \"with(\" + (context ? \"this._eval.\" : \"\") + \"scope){ \";\r\n                postfixDeclarations = \" }\";\r\n            }\r\n        }\r\n        if (!scope && !context) { Log.ex(true, 'execInContextAndScope: must specify at least one of scope || context', {func, scope, context}); }\r\n        if (!context) context = scope; // se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\r\n        if (scope && context) {\r\n            context._eval = _eval;\r\n            // will the scope work with \"with\" outside the function body?\r\n            ret = new Function( prefixDeclarations + \"return this._eval.func.apply(this._eval.context, this._eval.parameters);\" + postfixDeclarations).call(context);\r\n            delete context._eval;\r\n        }\r\n        if (!scope && context) { return _eval.func.apply(_eval.context, _eval.parameters); }\r\n        if (scope && !context) {\r\n            // todo: non credo funzioni, _eval non dovrebbe essere accessibile dopo la \"with\" forse devo fare scope._eval = _eval;\r\n            return eval(prefixDeclarations + \"return _eval.func(..._eval.parameters);\" + postfixDeclarations); }\r\n        return ret; }\r\n\r\n    // warn: aggiunge un layer di scope ma ha accesso anche agli scope precedenti (del chiamante della funzione e superiori)\r\n    // warn2: può modificare lo scope internamente all'eval ma ogni cambiamento è perso all'uscita dell'esecuzione (modifica copie)\r\n    // warn3: gli oggetti nested variabili dentro oggetti dello scope) sono modificabili con modifiche persistenti perchè vengono pasate per puntatore.\r\n    // warn4: richiede un return per leggere il valore\r\n    // insomma: sta funzione fa schifo ma non c'è di meglio e non puoi nè permettere nè vietare completamente le modifiche allo scope.\r\n    private static execInScope_DO_NOT_USE(codeStr: string, scope: GObject) {\r\n        return (new Function(...Object.keys(scope), codeStr))(...Object.values(scope));\r\n    }\r\n\r\n    // can modify context in-place, requires \"this\" before variable\r\n    private static evalInContext(js: string, context: GObject): unknown {\r\n        //# Return the results of the in-line anonymous function we .call with the passed context\r\n        return function() { return eval(js); }.call(context);\r\n    }/*\r\n    / *\r\n    // NO: ha 2 problemi: il contesto non è persistente e puoi accedere al contesto solo con \"this\" ma non direttamente usando i nomi delle variabili\r\n    public static evalInContext(contextObj: GObject, code: string): any{\r\n        return U.evalContextFunction.call(contextObj || {}, code);\r\n    }\r\n\r\n    // only create a context for \"this\", wich is bound by .call(), should never be called without .call()\r\n    private static evalContextFunction(code: string): any { eval(code); }\r\n*/\r\n    public static highOrderFunctionExampleTyped<T extends (...args: any[]) => ReturnType<T>>(func: T): (...funcArgs: Parameters<T>) => ReturnType<T> {\r\n        const funcName = (func as any).cname || func.name;\r\n\r\n        // Return a new function that tracks how long the original took\r\n        return (...args: Parameters<T>): ReturnType<T> => {\r\n            console.time(funcName);\r\n            const results = func(...args);\r\n            console.timeEnd(funcName);\r\n            return results; };\r\n    }\r\n\r\n    static asClass<T extends Function>(obj: any, classe: T, elseReturn: T | null = null): null | T { return obj instanceof classe ? obj as any as T: elseReturn; }\r\n    static asString<T>(propKey: unknown, elseReturn: T | null = null): string | null | T { return typeof propKey === 'string' ? propKey : elseReturn; }\r\n    static isString(propKey: unknown): boolean { return typeof propKey === 'string'; }\r\n\r\n    static loadScript(path: string, useEval: boolean = false): void {\r\n        const script = document.createElement('script');\r\n        script.src = path;\r\n        script.type = 'text/javascript';\r\n        Log.eDev(useEval, 'loadScript', 'useEval','useEval todo. potrebbe essere utile per avviare codice fuori dalle funzioni in futuro.');\r\n        document.body.append(script); }\r\n\r\n    static ancestorArray<T extends Element>(domelem: T, stopNode?: Node, includeSelf: boolean = true): Array<T> {\r\n        // [0]=element, [1]=father, [2]=grandfather... [n]=document\r\n        if (domelem === null || domelem === undefined) { return []; }\r\n        const arr = includeSelf ? [domelem] : [];\r\n        let tmp: T = domelem.parentNode as T;\r\n        while (tmp !== null && tmp !== stopNode) {\r\n            arr.push(tmp);\r\n            tmp = tmp.parentNode as T; }\r\n        return arr; }\r\n\r\n    static toHtml<T extends Element>(html: string, container?: Element, containerTag: string = 'div'): T {\r\n        if (!container) { container = document.createElement(containerTag); }\r\n        Log.e(!html || html === '', 'toHtml', 'require a non-empty string', html);\r\n        container.innerHTML = html;\r\n        const ret: T = container.firstChild as any;\r\n        if (ret) container.removeChild(ret);\r\n        return ret; }\r\n\r\n    public static levenshtein(a: string, b: string): number {\r\n        if (!a.length) return b.length;\r\n        if (!b.length) return a.length;\r\n        let cost = (a.charAt(a.length - 1) === b.charAt(b.length - 1)) ? 0 : 1;\r\n        return (window as any).Math.min(\r\n            U.levenshtein(a.substring(0, a.length - 1), b) + 1,\r\n            U.levenshtein(a, b.substring(0, b.length - 1)) + 1,\r\n            U.levenshtein(a.substring(0, a.length - 1), b.substring(0, b.length - 1)) + cost,\r\n        );\r\n    }\r\n\r\n    public static getClosestPropertyName(names: string[], name: string): string {\r\n        let lowest = Infinity;\r\n        return names.reduce(function(previous, current) {\r\n            let distance = U.levenshtein(current, name);\r\n            if (distance < lowest) {\r\n                lowest = distance;\r\n                return current;\r\n            }\r\n            return previous;\r\n        }, '');\r\n    }\r\n    public static getClosestPropertyNames(names: string[], name: string): string[] {\r\n        let distances: {distance: number, value: string}[] = names.map( value => { return {distance: U.levenshtein(value, name), value}; });\r\n        return distances.sort( (a, b) => a.distance - b.distance).map( e => e.value);\r\n    }\r\n\r\n    //todo for console\r\n    public static autoCorrectProxy<T extends GObject>(target: T, recursive: boolean, logger: Console): ProxyHandler<T> {\r\n        return new Proxy(target, {\r\n            get: function(target, name) {\r\n                let namestr = U.asString(name, null);\r\n                if (!namestr) return undefined;\r\n                if (name in target) return target[namestr];\r\n                const suggestions: string[] = U.getClosestPropertyNames(Object.getOwnPropertyNames(target), namestr);\r\n                logger.warn(`${namestr} is not defined, did you meant ${suggestions[0]}?\\t\\nother suggestions:`, suggestions);\r\n                return namestr && target[suggestions[0]];\r\n            },\r\n        });\r\n    }\r\n\r\n    static arrayRemoveAll<T>(arr: Array<T>, elem: T, debug: boolean = false): void {\r\n        let index;\r\n        if (!arr) return;\r\n        while (true) {\r\n            index = arr.indexOf(elem);\r\n            Log.l(debug, 'ArrayRemoveAll: index: ', index, '; arr:', arr, '; elem:', elem);\r\n            if (index === -1) { return; }\r\n            arr.splice(index, 1);\r\n            Log.l(debug, 'ArrayRemoveAll RemovedOne:', arr);\r\n        }\r\n    }\r\n\r\n    static arrayUnique<T>(arr: T[]): Array<T> { return [ ...new Set<T>(arr)]; }\r\n\r\n    static fileReadContent(file: File, callback: (content :string) => void): void {\r\n        const textType = /text.*/;\r\n        try { if (!file.type || file.type.match(textType)) {\r\n            let reader = new FileReader();\r\n            reader.onload = function(e) { callback( '' + reader.result ); };\r\n            reader.readAsText(file);\r\n            return;\r\n        } } catch(e) { Log.e(true, \"Exception while trying to read file as text. Error: |\", e, \"|\", file); }\r\n        Log.e(true, \"Wrong file type found: |\", file ? file.type : null, \"|\", file); }\r\n\r\n    static fileRead(onChange: (e: Event, files: FileList | null, contents?: string[]) => void, extensions: string[] | FileReadTypeEnum[], readContent: boolean): void {\r\n        // $(document).on('change', (e) => console.log(e));\r\n        console.log(\"importEcore: pre file reader\");\r\n        myFileReader.show(onChange, extensions, readContent);\r\n    }\r\n\r\n    public static clear(htmlNode: Element): void {\r\n        if (htmlNode) while (htmlNode.firstChild) { htmlNode.removeChild(htmlNode.firstChild); }\r\n    }\r\n\r\n    static clearAllTimeouts(): void {\r\n        const highestTimeoutId: number = setTimeout(() => {}, 1) as any;\r\n        for (let i = 0 ; i < highestTimeoutId ; i++) { clearTimeout(i); }\r\n    }\r\n\r\n    static getStackTrace(sliceCalls: number = 2): string[] {\r\n        const ret: string | undefined = Error().stack;\r\n        // try { var a = {}; a.debug(); } catch(ex) { ret = ex.stack; }\r\n        // if (Array.isArray(ret)) return ret;\r\n        if (!ret) return ['UnknownStackTrace'];\r\n        const arr: string[] = ret.split('\\n');\r\n        // first 2 entries are \"Erorr\" and \"getStackTrace()\"\r\n        return sliceCalls > 0 ? arr.slice( sliceCalls ) : arr; }\r\n\r\n    // 0 for caller, 1 for caller of caller, -1 for current function, up to -4 to see internal layers (useless)\r\n    public static getCaller(stacksToSkip: number = 0): string {\r\n        const stack: string[] = this.getStackTrace(4);\r\n        // erase getStackTrace() and isFirstTimeCalled() + Error() first stack + n° of layer the caller wants.\r\n        return stack[stacksToSkip]; }\r\n\r\n    private static gotcalledby: Dictionary<string, boolean> = {};\r\n\r\n    // todo: use in Log.once\r\n    // returns true only the first time this line is reached, false in loops >1 loop, false in recursion >1 recursion, false even days after the first execution unless the page is reloaded\r\n    public static isFirstTimeCalledByThisLine(stacksToSkip: number = 0): boolean {\r\n        const caller: string = this.getCaller(stacksToSkip);\r\n        if (U.gotcalledby[caller]) return false;\r\n        return U.gotcalledby[caller] = true; }\r\n\r\n    public static lineKey(): string { return this.getCaller(0); }\r\n\r\n    // Prevent the backspace key from navigating back.\r\n    static preventBackSlashHistoryNavigation(event: JQuery.KeyDownEvent): boolean {\r\n        if (!event || !event.key || event.key.toLowerCase() !== 'backspace') { return true; }\r\n        const types: string[] = ['text', 'password', 'file', 'search', 'email', 'number', 'date',\r\n            'color', 'datetime', 'datetime-local', 'month', 'range', 'search', 'tel', 'time', 'url', 'week'];\r\n        const srcElement: JQuery<any> = $((event as any)['srcElement'] || event.target);\r\n        const disabled = srcElement.prop('readonly') || srcElement.prop('disabled');\r\n        if (!disabled) {\r\n            if (srcElement[0].isContentEditable || srcElement.is('textarea')) { return true; }\r\n            if (srcElement.is('input')) {\r\n                const type = srcElement.attr('type');\r\n                if (!type || types.indexOf(type.toLowerCase()) > -1) { return true; }\r\n            }\r\n        }\r\n        event.preventDefault();\r\n        return false; }\r\n\r\n    static SetMerge<T>(modifyFirst: boolean = true, ...iterables: Iterable<T>[]): Set<T> {\r\n        const set: Set<T> = modifyFirst ? iterables[0] as Set<T>: new Set<T>();\r\n        Log.e(!(set instanceof Set), 'U.SetMerge() used with modifyFirst = true requires the first argument to be a set');\r\n        for (let iterable of iterables) { for (let item of iterable) { set.add(item); } }\r\n        return set; }\r\n\r\n    // merge with unique elements\r\n    static ArrayMergeU(arr1: any[], ...arr2: any[]): void { U.ArrayMerge0(true, arr1, arr2); }\r\n    // merge without unique check\r\n    static ArrayMerge(arr1: any[], ...arr2: any[]): void { U.ArrayMerge0(false, arr1, arr2); }\r\n    // implementation\r\n    static ArrayMerge0(unique: boolean, arrtarget: any[], ...arrays: any[]): void {\r\n        if (!arrtarget || !arrays) return;\r\n\r\n        if (unique) { for (let arri of arrays) for (let e of arri) U.ArrayAdd(arrtarget, e); }\r\n        else { for (let arri of arrays) Array.prototype.push.apply(arrtarget, arri); }\r\n    }\r\n\r\n    static ArrayAdd<T>(arr: Array<T>, elem: T, unique: boolean = true, throwIfContained: boolean = false): boolean {\r\n        Log.ex(!arr || !Array.isArray(arr), 'ArrayAdd arr null or not array:', arr);\r\n        if (!unique) { arr.push(elem); return true; }\r\n        if (arr.indexOf(elem) === -1) { arr.push(elem); return true; }\r\n        Log.ex(throwIfContained, 'ArrayAdd element already contained:', arr, elem);\r\n        return false; }\r\n\r\n\r\n    private static maxID: number = 0;\r\n    public static idPrefix: string = '';\r\n    // static getID(): string { return U.idPrefix + U.maxID++; }\r\n    static getID: Generator<number> = function* idgenerator(): Generator<number> { let i: number = 0; while(true) yield i++; }();\r\n\r\n\r\n    static getType(param: any): string {\r\n        switch (typeof param) {\r\n            default: return typeof param;\r\n            case 'object':\r\n                return (param?.constructor as typeof RuntimeAccessibleClass)?.cname || param?.className || \"{_rawobject_}\";\r\n            case 'function': // and others\r\n                return \"geType for function todo: distinguish betweeen arrow and classic\";\r\n        }\r\n    }\r\n\r\n    static stringCompare(s1: string, s2: string): -1 | 0 | 1 { return (s1 < s2) ? -1 : (s1 > s2) ? 1 : 0; }\r\n\r\n    static endsWith(str: string, suffix: string | string[]): boolean {\r\n        if (Array.isArray(suffix)) {\r\n            for (let suf of suffix) {\r\n                if (U.endsWith(str, suf)) return true;\r\n            }\r\n            return false;\r\n        }\r\n        return str.length >= suffix.length && str.lastIndexOf(suffix) === str.length - suffix.length;\r\n    }\r\n\r\n\r\n    static arrayMergeInPlace<T>(arr1: T[], ...otherArrs: T[][]): T[] {\r\n        for (const arr of otherArrs) arr1.push.apply(arr1, arr || []);\r\n        return arr1; }\r\n\r\n    static getEndingNumber(s: string, ignoreNonNumbers: boolean = false, allowDecimal: boolean = false): number {\r\n        let i = s.length;\r\n        let numberEnd = -1;\r\n        while (--i > 0) {\r\n            if (!isNaN(+s[i])) { if (numberEnd === -1) { numberEnd = i; } continue; }\r\n            if (s[i] === '.' && !allowDecimal) { break; }\r\n            if (s[i] === '.') { allowDecimal = false; continue; }\r\n            if (!ignoreNonNumbers) { break; }\r\n            if (numberEnd !== -1) { ignoreNonNumbers = false; }\r\n        }\r\n        s = numberEnd === -1 ? '1' : s.substring(i, numberEnd);\r\n        return +parseFloat(s); }\r\n\r\n    static increaseEndingNumber(s: string, allowLastNonNumberChars: boolean = false, allowDecimal: boolean = false, increaseWhile?: ((x: string) => boolean)): string {\r\n        let regexpstr = '([0-9]+' + (allowDecimal ? '|[0-9]+\\\\.[0-9]+' : '') + ')' + (allowLastNonNumberChars ? '[^0-9]*' : '') + '$';\r\n        const matches: RegExpExecArray | null = new RegExp(regexpstr, 'g').exec(s); // Global (return multi-match) Single line (. matches \\n).\r\n        // S flag removed for browser support (firefox), should work anyway.\r\n        let prefix: string;\r\n        let num: number;\r\n        if (!matches) {\r\n            prefix = s;\r\n            num = 2;\r\n        } else {\r\n            Log.ex(matches.length > 2, 'parsing error: /' + regexpstr + '/gs.match(' + s + ')');\r\n            let i = s.length - matches[0].length;\r\n            prefix = s.substring(0, i);\r\n            num = 1 + (+matches[1]);\r\n        }\r\n        if (increaseWhile) while (increaseWhile(prefix + num)) { num++; }\r\n        return prefix + num; }\r\n\r\n\r\n    public static shallowEqual(objA: GObject, objB: GObject): boolean {\r\n        if (objA === objB) { return true; }\r\n\r\n        if (!objA || !objB || typeof objA !== 'object' || typeof objB !== 'object') { return false; }\r\n\r\n        var keysA = Object.keys(objA);\r\n        var keysB = Object.keys(objB);\r\n        if (keysA.length !== keysB.length) return false;\r\n\r\n        // if (keysA.length !== keysB.length) { return false; }\r\n        // Test for A's keys different from B.\r\n        // var bHasOwnProperty = hasOwnProperty.bind(objB);\r\n        for (let keya in objA) if (!Object.is(objA[keya], objB[keya])) return false;\r\n\r\n        // for (var i = 0; i < keysA.length; i++) if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) { return false; }\r\n        return true;\r\n    }\r\n\r\n    // returns true only if parameter is already a number by type. UU.isNumber('3') will return false\r\n    static isNumber(o: any): o is number { return typeof o === \"number\" && !isNaN(o); }\r\n\r\n    public static getAllPrototypes(constructor: Constructor, chainoutoutrecursive: GObject[] = [], currentRecursion = 0, maxRecursion = 20, cache: boolean = true): GObject[] {\r\n        // console.log('getAllPrototypes:', {name: constructor.name, currentRecursion, constructor, chainoutoutrecursive});\r\n        if (cache && (constructor as any).__allprototypes) return (constructor as any).__allprototypes;\r\n        let prototype = (constructor.prototype?.name) && constructor.prototype;\r\n        let __proto__ = (constructor.__proto__?.name) && constructor.__proto__;\r\n        if (!prototype && !__proto__ || currentRecursion >= maxRecursion) return chainoutoutrecursive;\r\n        if (prototype) chainoutoutrecursive.push(prototype);\r\n        if (__proto__) chainoutoutrecursive.push(__proto__);\r\n        if (prototype) U.getAllPrototypes(prototype, chainoutoutrecursive, currentRecursion + 1, maxRecursion);\r\n        if (__proto__) U.getAllPrototypes(__proto__, chainoutoutrecursive, currentRecursion + 1, maxRecursion);\r\n        if (cache) (constructor as any).__allprototypes = chainoutoutrecursive;\r\n        return chainoutoutrecursive;\r\n    }\r\n\r\n    public static classIsExtending(subconstructor: Constructor | AbstractConstructor, superconstructor: Constructor | AbstractConstructor): boolean {\r\n        return (superconstructor as typeof DPointerTargetable)?._extends?.includes(subconstructor as any) || false;\r\n        // return U.getAllPrototypes(subconstructor).includes(superconstructor);\r\n    }\r\n\r\n    static isObject(v: GObject|any, returnIfNull: boolean = true, returnIfUndefined: boolean = false, retIfArray: boolean = false): boolean {\r\n        if (v === null) { return returnIfNull; }\r\n        if (v === undefined) { return returnIfUndefined; }\r\n        if (Array.isArray(v)) { return retIfArray; }\r\n        // nb: mind that typeof [] === 'object'\r\n        return typeof v === 'object'; }\r\n\r\n    static objectFromArray<V extends any>(arr: V[], getKey: (entry:V) => string): Dictionary<string, V>{\r\n        // @ts-ignore\r\n        return arr.reduce((acc, val) => { acc[getKey(val)] = val; return acc; }, {});\r\n    }\r\n\r\n    static objectFromArrayValues<T extends any>(arr: (string | number)[], val: T = true as T): Dictionary<string | number, T> {\r\n        // @ts-ignore\r\n        return arr.reduce((acc, val) => { acc[val] = val; return acc; }, {});\r\n        /*let ret: Dictionary = {};\r\n        for (let val of arr) { ret[val] = true; }\r\n        return ret;*/\r\n    }\r\n\r\n    static toBoolString(bool: boolean, ifNotBoolean: boolean = false): string { return bool === true ? 'true' : (bool === false ? 'false' : '' + ifNotBoolean); }\r\n    static fromBoolString<T extends any>(str: string | boolean): boolean;\r\n    static fromBoolString<T extends any>(str: string | boolean, defaultVal?: T): boolean | T;\r\n    static fromBoolString<T extends any>(str: string | boolean, defaultVal?: T, allowNull?: boolean): boolean | null | T;\r\n    static fromBoolString<T extends any>(str: string | boolean, defaultVal: T = false as any, allowNull: boolean = false, allowUndefined: boolean = false): boolean | null | undefined | T {\r\n        str = ('' + str).toLowerCase();\r\n        if (allowNull && (str === 'null')) return null;\r\n        if (allowUndefined && (str === 'undefined')) return undefined;\r\n\r\n        if (str === \"true\" || str === 't' || str === '1') return true;\r\n        // if (defaultVal === true) return str === \"false\" || str === 'f' || str === '0'; // false solo se è esplicitamente false, true se ambiguo.\r\n        if (str === \"false\" || str === 'f' || str === '0') return false;\r\n        return defaultVal;\r\n    }\r\n\r\n    static arrayDifference<T>(starting: T[], final: T[]): {added: T[], removed: T[], starting: T[], final: T[]} {\r\n        let ret: {added: T[], removed: T[], starting: T[], final: T[]} = {} as any;\r\n        ret.starting = starting;\r\n        ret.final = final;\r\n        if (!starting) starting = [];\r\n        if (!final) final = [];\r\n        ret.removed = Uarr.arraySubtract(starting, final, false); // start & !end\r\n        ret.added = Uarr.arraySubtract(final, starting, false); // end & !start\r\n        return ret;\r\n    }\r\n\r\n    // returns <\"what changed from old to neww\"> and in nested objects recursively\r\n    // todo: how can i tell at what point it's the fina lvalue (might be a nestedobj) and up to when it's a delta to follow and unroll?   using __isAdelta:true ?\r\n    // NB: this returns the delta that generates the future. if you want the delta that generate the past one, invert parameter order.\r\n    public static objectDelta<T extends object>(old: T, neww: T, deep: boolean = true): Partial<T>{\r\n        let newwobj: GObject = neww;\r\n        let oldobj: GObject = old;\r\n        if (old === neww) return {};\r\n        let diff = U.objdiff(old, neww); // todo: optimize this, remove the 3 loops below and add those directly in U.objdiff(old, neww, ret); writing inside the obj in third parameter\r\n\r\n        let ret: GObject = {}; // {__isAdelta:true};\r\n        for (let key in diff.added) { ret[key] = newwobj[key]; }\r\n        for (let key in diff.changed) {\r\n            let subold = oldobj[key];\r\n            let subnew = newwobj[key];\r\n            if (typeof subold === typeof subnew && typeof subold === \"object\") { ret[key] = deep ? U.objectDelta(subold, subnew, true) : subnew; }\r\n            else ret[key] = subnew;\r\n        }\r\n        // todo: add to variable naming rules: can't start with \"_-\", like in \"_-keyname\", it means \"keyname\" removed in undo delta\r\n        let removedprefix = \"\"; // \"_-\";\r\n        for (let key in diff.removed) { ret[removedprefix + key] = undefined; } //newwobj[key]; }\r\n        // console.log(\"objdiff\", {old, neww, diff, ret});\r\n        return ret as Partial<T>;\r\n    }\r\n\r\n    // difference react-style. lazy check by === equality field by field. parameters are readonly\r\n    public static objdiff<T extends GObject>(old:T, neww: T): {removed: Partial<T>, added: Partial<T>, changed: Partial<T>, unchanged: Partial<T>} {\r\n        // let ret: GObject = {removed:{}, added:{}, changed:{}};\r\n        let ret: {removed: Partial<T>, added: Partial<T>, changed: Partial<T>, unchanged: Partial<T>}  = {removed:{}, added:{}, changed:{}, unchanged: {}};\r\n        if (!neww && !old) { return ret; }\r\n        if (!neww) { ret.removed = old; return ret; }\r\n        if (!old) { ret.added = neww; return ret; }\r\n        // let oldkeys: string[] = Object.keys(old); let newkeys: string[] = Object.keys(neww);\r\n\r\n        let key: any;\r\n        for (key in old) {\r\n            // if (neww[key] === undefined){\r\n            // if neww have a key with undefined value, it counts (and should) as having that property key defined\r\n            if (!(key in neww)){ (ret.removed as GObject)[key] = old[key]; }\r\n            else if (neww[key] === old[key]) { (ret.unchanged as GObject)[key] = old[key] }\r\n            else (ret.changed as GObject)[key] = old[key];\r\n        }\r\n        for (let key in neww) {\r\n            if (!(key in old)){ (ret.added as GObject)[key] = neww[key]; }\r\n        }\r\n        return ret;\r\n    }\r\n    /*  {a: { b: { c1: 1, c2:2, c3:3 } }, d: 1 }     ---->  {\"a.b.c1\":1, \"a.b.c2\":2, \"a.b.c3\":3. \"d\":1}*/\r\n    public static flattenObjectToRoot(obj: GObject, prefix: string = '', pathseparator: string = '.'): GObject{\r\n        return Object.keys(obj).reduce((acc: GObject, k: string) => {\r\n            const pre = prefix.length ? prefix + pathseparator : '';\r\n            if (typeof obj[k] === 'object') Object.assign(acc, U.flattenObjectToRoot(obj[k], pre + k, pathseparator));\r\n            else acc[pre + k] = obj[k];\r\n            return acc;\r\n        }, {});\r\n    }\r\n\r\n    // from {a:{aa:true, ab:\"ab\"}, b:4} to [\"a.aa = true\", \"a.ab = \\\"ab\\\"\", \"a.b = 4\"]\r\n    // maxkeylength is max length of any individual key, after it it will become: superlongpath --> supe...path\r\n    // maxsubpaths is how many subpaths are displayed at most. after it it will be: super.rea.lly.long.pa.th --> super.rea.pa.th\r\n    public static ObjectToAssignementStrings<R extends {str: string, fullstr: string, path:string[], fullpath:string[], val: string, fullvalue: string, pathlength?: number}>\r\n    (obj: GObject, maxkeylength: number = 10, maxsubpaths: number = 6, maxvallength: number = 20, toolongreplacer: string = \"…\", out?:{best: R}&R[], quotestrings: boolean = true): {best: string}&string[] {\r\n        const pathseparator = \".\";\r\n        const valueseparator = \" = \";\r\n        const filterrow = (rowpaths: string[]) => { return (!rowpaths.includes(\"clonedCounter\") && !rowpaths.includes(\"pointedBy\")); };\r\n        let flatten = U.flattenObjectToRoot(obj, '', pathseparator);\r\n        let i = -1;\r\n        let tmp;\r\n        let ret: {best: string} & string[] = [] as GObject as {best: string} & string[];\r\n        tmp = (maxkeylength - toolongreplacer.length)/2;\r\n        let halfpath = { start: (window as any).Math.floor(tmp), end: (window as any).Math.ceil(tmp) };\r\n        tmp = (maxvallength - toolongreplacer.length)/2;\r\n        let halfval = { start: (window as any).Math.floor(tmp), end: (window as any).Math.ceil(tmp) };\r\n        tmp = (maxsubpaths - toolongreplacer.length)/2;\r\n        let halfsubpaths = { start: (window as any).Math.floor(tmp), end: (window as any).Math.ceil(tmp) };\r\n\r\n\r\n        let bestpathsize = 0;\r\n        let best: R | null = null;\r\n        let countsize = (total: number, arrelem: string): number => total + arrelem.length;\r\n        const filterbest = (row: R) => {\r\n            row.pathlength = row.fullstr.length; // row.fullpath.reduce<number>(countsize, 0);\r\n            if (!best || bestpathsize < row.pathlength && filterrow(row.fullpath)) {\r\n                best = row; bestpathsize = row.pathlength;\r\n                if (out) out.best = best;\r\n                ret.best = best.str;\r\n            }\r\n        }\r\n        console.log(\"u get assignements\", {flatten, obj});\r\n\r\n        for (let key in flatten) {\r\n            let row: R = {fullpath: key.split(pathseparator), fullstr: key} as R;\r\n            // if (!filterrow(row.fullpath)) continue;\r\n            // stringify(undefined) = undefined, so i add + \"\"\r\n            try {\r\n                if (!quotestrings && typeof flatten[key] === \"string\") row.fullvalue = flatten[key];\r\n                else row.fullvalue = JSON.stringify(flatten[key]) + \"\";\r\n            } catch(e) { row.fullvalue = \"⁜not serializable⁜\"; }\r\n            // console.log(\"U get assignements loop\", {row, key, flatten, obj});\r\n            row.val = row.fullvalue.length <= maxvallength ? row.fullvalue : row.fullvalue.substring(0, halfval.start) + toolongreplacer + row.fullvalue.substring(halfval.start);\r\n            if (row.fullpath.length > maxsubpaths) {\r\n                row.path = [...row.fullpath];\r\n                row.path.splice( halfsubpaths.start, row.fullpath.length - halfsubpaths.start - halfsubpaths.end, toolongreplacer);\r\n            } else row.path = row.fullpath;\r\n\r\n            // row.path = row.fullpath.length <= maxsubpaths ? row.fullpath : [...row.fullpath.slice(0, halfsubpaths.start), ...row.fullpath.toomanyarraycopies];\r\n            row.path = row.path.map((p: string) => (p.length <= maxkeylength ? p : p.substring(0, halfpath.start) + toolongreplacer + p.substring(p.length - halfpath.end)));\r\n            if (out) { out.push(row); }\r\n            row.str = row.path.join(pathseparator) + valueseparator + row.val;\r\n            ret.push( row.str );\r\n            filterbest(row);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n\r\n    static download(filename: string = 'nameless.txt', text: string = '', debug: boolean = true): void {\r\n        if (!text) { return; }\r\n        filename = U.toFileName(filename);\r\n        const htmla: HTMLAnchorElement = document.createElement('a');\r\n        const blob: Blob = new Blob([text], {type: 'text/plain', endings: 'native'});\r\n        const blobUrl: string = URL.createObjectURL(blob);\r\n        Log.l(debug, text + '|\\r\\n| <-- rn, |\\n| <--n.');\r\n        htmla.style.display = 'none';\r\n        htmla.href = blobUrl;\r\n        htmla.download = filename;\r\n        document.body.appendChild(htmla);\r\n        htmla.click();\r\n        window.URL.revokeObjectURL(blobUrl);\r\n        document.body.removeChild(htmla); }\r\n\r\n    static formatXml(xml: string): string {\r\n        const reg = /(>)\\s*(<)(\\/*)/g;\r\n        const wsexp = / *(.*) +\\n/g;\r\n        const contexp = /(<.+>)(.+\\n)/g;\r\n        xml = xml.replace(reg, '$1\\n$2$3').replace(wsexp, '$1\\n').replace(contexp, '$1\\n$2');\r\n        const pad: string = '' || '\\t';\r\n        let formatted = '';\r\n        const lines = xml.split('\\n');\r\n        let indent = 0;\r\n        let lastType = 'other';\r\n        // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions\r\n        const transitions: GObject = {\r\n            'single->single': 0,\r\n            'single->closing': -1,\r\n            'single->opening': 0,\r\n            'single->other': 0,\r\n            'closing->single': 0,\r\n            'closing->closing': -1,\r\n            'closing->opening': 0,\r\n            'closing->other': 0,\r\n            'opening->single': 1,\r\n            'opening->closing': 0,\r\n            'opening->opening': 1,\r\n            'opening->other': 1,\r\n            'other->single': 0,\r\n            'other->closing': -1,\r\n            'other->opening': 0,\r\n            'other->other': 0\r\n        };\r\n        let i = 0;\r\n        for (i = 0; i < lines.length; i++) {\r\n            const ln = lines[i];\r\n\r\n            // Luca Viggiani 2017-07-03: handle optional <?xml ... ?> declaration\r\n            if (ln.match(/\\s*<\\?xml/)) {\r\n                formatted += ln + '\\n';\r\n                continue;\r\n            }\r\n            // ---\r\n\r\n            const single = Boolean(ln.match(/<.+\\/>/)); // is this line a single tag? ex. <br />\r\n            const closing = Boolean(ln.match(/<\\/.+>/)); // is this a closing tag? ex. </a>\r\n            const opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)\r\n            const type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';\r\n            const fromTo = lastType + '->' + type;\r\n            lastType = type;\r\n            let padding = '';\r\n\r\n            indent += transitions[fromTo];\r\n            let j: number;\r\n            for (j = 0; j < indent; j++) {\r\n                padding += pad;\r\n            }\r\n            if (fromTo === 'opening->closing') {\r\n                formatted = formatted.substr(0, formatted.length - 1) + ln + '\\n'; // substr removes line break (\\n) from prev loop\r\n            } else {\r\n                formatted += padding + ln + '\\n';\r\n            }\r\n        }\r\n\r\n        return formatted.trim(); }\r\n\r\n\r\n    // https://stackoverflow.com/questions/13861254/json-stringify-deep-objects  implementation with depth\r\n    static circularStringify(obj: GObject, replacer?: null | ((key: string, value: any) => any), space?: string | number, maxDepth_unsupported: number = 100): string {\r\n        const cache: any[] = [];\r\n        return JSON.stringify(obj, (key, value: any) => {\r\n            if (typeof value === 'object' && value !== null) {\r\n                // Duplicate reference found, discard key\r\n                if (cache.includes(value)) return \"[Circular Reference]\"; // might happen both before and after the replacer func\r\n                if (replacer){\r\n                    value = replacer(key, value);\r\n                    if (cache.includes(value)) return \"[Circular Reference]\"; // might happen both before and after the replacer func\r\n                }\r\n                // Store value in our collection\r\n                cache.push(value);\r\n            }\r\n            return value;\r\n        }, space);\r\n    }\r\n\r\n    static getFirstNumber(s: string, allowDecimalDot: boolean = true, allowDecimalComma: boolean = true, valueifmismatch: any = null): number {\r\n        let commamode = (allowDecimalComma ? (allowDecimalDot ?\"(\\\\.|\\\\,)\" : \"\\\\,\") : (allowDecimalDot ? \"\\\\.\" : \"will not use this regex\"));\r\n        let floatregex = new RegExp(\"-?\" + commamode  + \"?\\\\d+(\" + commamode + \"\\\\d{1,2})?\");\r\n        let intregex = /-?\\d+/;\r\n        let ret: any;\r\n        if (allowDecimalDot || allowDecimalComma) ret = floatregex.exec(s);\r\n        else ret = intregex.exec(s);\r\n        ret = ret && ret[0]; // first match\r\n        if (ret === null) return valueifmismatch;\r\n\r\n        let tmpindex:number;\r\n        if (allowDecimalComma) ret = U.replaceAll(ret, \",\", \".\");\r\n        // while (allowDecimalComma && (tmpindex = ret.indexOf(\",\")) !== ret.lastIndexOf(\",\")) ret.substring(tmp+1) // ret.indexOf(.)\r\n        while ((allowDecimalDot || allowDecimalComma) && (tmpindex = ret.indexOf(\".\")) !== ret.lastIndexOf(\".\")) ret = ret.substring(tmpindex+1) // ret.indexOf(.)\r\n        // if (ret[0]===\"-\" && (ret[1]===\",\" || ret[1]===\".\")) ret = \"-0.\"+ret.substring(2); automatically done bu js.    +\"-.5\" = -0.5\r\n        return +ret;\r\n    }\r\n\r\n    // faster than jquery, underscore and many native methods checked https://stackoverflow.com/a/59787784\r\n    public static isEmptyObject(obj: GObject | undefined): boolean {\r\n        for(var i in obj) return false;\r\n        return true;\r\n    }\r\n\r\n    private static pairArrayElementsRepeatFunc<T>(val: T, index: number, arr:T[]): T[]{ return [arr[index], arr[index+1]] }\r\n    private static pairArrayElementsReducerFunc<T>(accumulator: T[][], value: T, index: number, array: T[]):T[][] {\r\n        if (index % 2 === 0) accumulator.push(array.slice(index, index + 2));\r\n        return accumulator; }\r\n\r\n    // from arr[] to arr[][]. if is with repetitions is: [1,2], [2,3], [3,4]... (ret.length = source.length-1)\r\n    // if without repetitions is: [1,2], [3,4].... (ret.length = Math.ceil(source.length/2);\r\n    public static pairArrayElements<T>(arr:T[], withRepetitions:boolean = false):T[][] {\r\n        if (withRepetitions) { return arr.map(U.pairArrayElementsRepeatFunc).slice(0, arr.length-1); }\r\n        return arr.reduce( U.pairArrayElementsReducerFunc as ((accumulator: T[][], value: T, index: number, array: T[]) => T[][]), []); }\r\n\r\n    // removes line // and block /**/ comments  todo: can likely be improved by a regular expression\r\n    public static decomment_all(str: string): string { return this.decomment_line(this.decomment_block(str)); }\r\n    // removes line comments //\r\n    public static decomment_line(str: string, trimLines: boolean = true): string {\r\n        return str\r\n            .split(\"\\n\")\r\n            .map(s=> { let i = s.indexOf(\"//\"); s = (i === -1 ? s : s.substring(i)); return trimLines ? s.trim() : s; } )\r\n            .join(\"\\n\");\r\n    }\r\n    // removes block comments /**/\r\n    public static decomment_block(str: string): string {\r\n        // let maxcomments = 100;\r\n        while(true){\r\n            // if (--maxcomments===0) break;\r\n            let s: number = str.indexOf(\"/*\");\r\n            if (s === -1) break;\r\n            let e: number = str.indexOf(\"*/\", s+1);\r\n            if (e === -1) e = str.length;\r\n            str = str.substring(0, s) + str.substring(e+2);\r\n        }\r\n        return str; }\r\n\r\n    static uppercaseFirstLetter<T extends (string | GObject<\"jsx\">)>(str: T): T {\r\n        if (typeof str !== \"string\") return str;\r\n        return str.charAt(0).toUpperCase() + str.slice(1) as T;\r\n    }\r\n\r\n    // CAREFUL! it's imperfect.\r\n    // Does not handle strings starting with ( that are not ()=> arrow functions\r\n    // or codes whose last chars are () but not in (function)() form\r\n    static wrapUserFunction(str: string): string {\r\n        str = str.trim();\r\n        if (str[0]!=='(' || str.indexOf(\"function\") !== 0) {\r\n            str = \"()=>{\" + str + \"\\n}\"; // last \\n important for line comments //\r\n        }\r\n        if (str[str.length - 2] !== \"(\" || str[str.length - 1] !== \")\") str = \"(\" + str + \")()\";\r\n        return str;\r\n    }\r\n\r\n    // adds ellipsis in the middle of a string to truncate it when it's too long.\r\n    public static stringMiddleCut<T extends boolean | undefined, RET extends string | string[] = T extends true ? string[] : string>\r\n    (str: string, maxLength: number, ellipsisChar: string = '…', asArray?: T): RET{\r\n        if (!str as unknown || maxLength < 0 || str.length <= maxLength) return (asArray ? [str] : str) as RET;\r\n        var midpoint = Math.ceil(str.length / 2);\r\n        var toremove = str.length - maxLength + ellipsisChar.length; // makes room for the additional ellipsis too\r\n        var lstrip = Math.ceil(toremove/2); // left strip is the bigger one if odd chars\r\n        var rstrip = toremove - lstrip;\r\n        if (asArray) return [str.substring(0, midpoint-lstrip), ellipsisChar, str.substring(midpoint+rstrip)] as RET;\r\n        else return str.substring(0, midpoint-lstrip) + ellipsisChar + str.substring(midpoint+rstrip) as RET;\r\n    }\r\n\r\n    // transform grays: if the color is <20% different from gray, transform it instead in black or white, 0 = don't, 1 = always black or white\r\n    public static invertHex(s: string, prefix: string='#', transformGrays: number = 0.2): string {\r\n        if (s.indexOf(prefix) === 0) s = s.substring(prefix.length);\r\n        let r: number, g: number, b: number, h: number | undefined; // might be NaN if parseInt fails\r\n        if (s.length === 3 || s.length === 4) {\r\n            r = parseInt('0x'+s[0]);// works with hex numbers\r\n            g = parseInt('0x'+s[1]);\r\n            b = parseInt('0x'+s[2]);\r\n            h = s.length === 4 ? parseInt('0x'+s[4]) : undefined;\r\n        } else if (s.length === 6 || s.length === 8){\r\n            r = parseInt('0x'+s.substring(0, 2));\r\n            g = parseInt('0x'+s.substring(2, 4));\r\n            b = parseInt('0x'+s.substring(4, 6));\r\n            h = s.length === 8 ? parseInt('0x'+s.substring(6, 8)) : undefined;\r\n        } else return Log.ee(\"cannot invert hex color \" + s + \", invalid length\", {s});\r\n        if (isNaN(r)) return Log.ee(\"cannot invert hex color \" + s +\", invalid red\", {s});\r\n        if (isNaN(g)) return Log.ee(\"cannot invert hex color \" + s +\", invalid green\", {g});\r\n        if (isNaN(b)) return Log.ee(\"cannot invert hex color \" + s +\", invalid blue\", {b});\r\n\r\n        transformGrays = transformGrays * 128;\r\n        r = Math.abs(r-128) <= transformGrays ? (r >= 128 ? 0 : 255) : 255 - r;\r\n        g = Math.abs(g-128) <= transformGrays ? (g >= 128 ? 0 : 255) : 255 - g;\r\n        b = Math.abs(b-128) <= transformGrays ? (b >= 128 ? 0 : 255) : 255 - b;\r\n        if (h || h === 0) h = 255 - h;\r\n\r\n        let rs = r.toString(16);\r\n        if (rs.length === 1) rs = '0'+rs;\r\n        let gs = g.toString(16);\r\n        if (gs.length === 1) gs = '0'+gs;\r\n        let bs = b.toString(16);\r\n        if (bs.length === 1) bs = '0'+bs;\r\n        let hs = h ? h.toString(16) : '';\r\n        if (hs.length === 1) hs = '0'+hs;\r\n\r\n        return (prefix) + rs+gs+bs+hs;\r\n    }\r\n\r\n    public static parentUntil(tagName: string, p: Element | null): Element | null {\r\n        while (p && p.tagName !== tagName) p = p.parentElement;\r\n        return p;\r\n    }\r\n\r\n    static paletteSplit(palette: Readonly<PaletteType>): {\r\n        color: Dictionary<string, PaletteControl>,\r\n        number: Dictionary<string, NumberControl>,\r\n        text: Dictionary<string, StringControl>,\r\n        path: Dictionary<string, PathControl>,\r\n    } {\r\n        type clist = PaletteControl | NumberControl | StringControl | PathControl;\r\n        let ret = {\r\n            color: {} as Dictionary<string, PaletteControl>,\r\n            number: {} as Dictionary<string, NumberControl>,\r\n            text: {} as Dictionary<string, StringControl>,\r\n            path: {} as Dictionary<string, PathControl>,\r\n        } as Dictionary<(clist)[\"type\"], Dictionary<string, any>>;\r\n        for (let entry of Object.entries(palette)) {\r\n            let k = entry[0];\r\n            let v = entry[1];\r\n            ret[(v as clist).type][k] = v;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    static mergeNamedArray<T extends GObject>(ret: T[] & Dictionary<DocString<\"$name\">, T>, classes: T[] & Dictionary<DocString<\"$name\">, T>) {\r\n        for (let key of Object.getOwnPropertyNames(classes)) { // ownPropertyNames skips \"first, last, separator\" created by extending array prototype\r\n            if (key === \"length\") continue;\r\n            if (!isNaN(+key)) ret.push(classes[key]);\r\n            // not else, if a class is named like a number it can be accessed by name until is overwrite by index being reached.\r\n            if (!ret[key]) ret[key] = classes[key];\r\n        }\r\n    }\r\n    static toNamedArray<D extends DPointerTargetable, L extends LPointerTargetable>(larr:L[], darr?:D[]): L[] & Dictionary<DocString<\"$name\">, L>{\r\n        if (!darr || darr.length !== larr.length) darr = larr.map(l=>l.__raw as D);\r\n\r\n        for (let i = 0; i < larr.length; i++) if (darr[i] && larr[i]) (larr as GObject)[\"$\"+(darr[i] as GObject).name] = larr[i];\r\n        /*for (let index of Object.getOwnPropertyNames(larr)) { // ownPropertyNames skips \"first, last, separator\" created by extending array prototype\r\n            if (index === \"length\") continue;\r\n            let d = darr[index as any as number];\r\n            let l = larr[index as any as number];\r\n            if (!d || !l) continue;\r\n            (larr as any)[\"$\" + (d as any).name] = l;\r\n        }*/\r\n        return larr as any;\r\n    }\r\n}\r\nexport class DDate{\r\n    static cname: string = \"DDate\";\r\n\r\n    public static addDay(date: Date, offset: number, inplace: boolean): Date {\r\n        const ret: Date = inplace ? date : new Date(date);\r\n        ret.setDate(date.getDate() + offset);\r\n        return ret;\r\n    }\r\n    public static addMonth(date: Date, offset: number, inplace: boolean): Date {\r\n        const ret: Date = inplace ? date : new Date(date);\r\n        ret.setMonth(date.getMonth() + offset);\r\n        return ret;\r\n    }\r\n    public static addYear(date: Date, offset: number, inplace: boolean): Date {\r\n        const ret: Date = inplace ? date : new Date(date);\r\n        ret.setFullYear(date.getFullYear() + offset);\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport class myFileReader {\r\n    private static input: HTMLInputElement = null as any;\r\n    private static fileTypes: string[] = null as any;\r\n    private static onchange: (e: Event) => void = null as any;\r\n    // constructor(onchange: (e: ChangeEvent) => void = null, fileTypes: FileReadTypeEnum[] | string[] = null) { myFileReader.setinfos(fileTypes, onchange); }\r\n    private static setinfos(fileTypes: undefined | FileReadTypeEnum[] | string[], onchange: (e: Event, files: FileList | null, contents: string[] | undefined ) => void, readcontent: boolean) {\r\n        myFileReader.fileTypes = (fileTypes || myFileReader.fileTypes) as string[];\r\n        const debug: boolean = false;\r\n        debug&&console.log('fileTypes:', myFileReader.fileTypes, fileTypes);\r\n        myFileReader.input = document.createElement('input');\r\n        const input: HTMLInputElement = myFileReader.input;\r\n        myFileReader.onchange = function (e: Event): void {\r\n            if (!readcontent) { onchange(e, input.files, undefined); return; }\r\n            let contentObj: Dictionary<number, string> = {};\r\n            let fileLetti: number = 0;\r\n            for (let i: number = 0; input.files && i <input.files.length; i++) {\r\n                const f: File = input.files[i];\r\n                debug&&console.log('filereadContent['+i+']( file:', f, ')');\r\n                U.fileReadContent(f, (content: string) => {\r\n                    debug&&console.log('file['+i+'] read complete. done: ' + ( 1 + fileLetti) + ' / ' + input.files?.length, 'contentObj:', contentObj);\r\n                    contentObj[i] = content; // cannot use array, i'm not sure the callbacks will be called in order. using push is safer but could alter order.\r\n                    // this is last file to read.\r\n                    if (input.files && ++fileLetti === input.files.length) {\r\n                        const contentArr: string[] = [];\r\n                        for (let j: number = 0; j < input.files.length; j++) { contentArr.push(contentObj[j]); }\r\n                        onchange(e, input.files, contentArr);\r\n                    }\r\n                });\r\n            }\r\n        } || myFileReader.onchange;\r\n    }\r\n    private static reset(): void {\r\n        myFileReader.fileTypes = undefined as any;\r\n        myFileReader.onchange = undefined as any;\r\n        myFileReader.input = undefined as any;\r\n    }\r\n    public static show(onChange: (e: Event, files: FileList | null, contents?: string[]) => void, extensions: undefined | string[] | FileReadTypeEnum[] = undefined, readContent: boolean): void {\r\n        console.log(\"importEcore: pre file reader\", myFileReader.input);\r\n        myFileReader.setinfos(extensions, onChange, readContent);\r\n        //if (!myFileReader.input) return;\r\n        myFileReader.input.setAttribute('type', 'file');\r\n        if (myFileReader.fileTypes) {\r\n            myFileReader.input.setAttribute('accept', myFileReader.fileTypes.join(','));\r\n        }\r\n        //console.log('fileTypes:', myFileReader.fileTypes, 'input:', myFileReader.input);\r\n        $(myFileReader.input).on('change.custom' as any, myFileReader.onchange).trigger('click');\r\n        myFileReader.reset();\r\n    }\r\n\r\n}\r\n@RuntimeAccessible('Uarr')\r\nexport class Uarr{\r\n    public static arrayIntersection<T>(arr1: T[], arr2: T[]): T[]{\r\n        if (!arr1 || ! arr2) return null as any;\r\n        return arr1.filter( e => arr2.indexOf(e) >= 0);\r\n    }\r\n\r\n    static arraySubtract(arr1: any[], arr2: any[], inPlace: boolean): any[]{\r\n        let i: number;\r\n        const ret: any[] = inPlace ? arr1 : [...arr1];\r\n        for (i = 0; i < arr2.length; i++) { U.arrayRemoveAll(ret, arr2[i]); }\r\n        return ret; }\r\n\r\n    static equals<T extends any>(a1: T[], a2: T[], deep: boolean): boolean {\r\n        Log.ex(deep, \"deep array comparison is not supported yet\");\r\n        if (!a1 || !a2) return false;\r\n        if (a1.length !== a2.length) return false;\r\n        for (let i = 0; i < a1.length; i++) if (a1[i] !== a2[i]) return false;\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class FocusHistoryEntry {\r\n    static cname: string = \"FocusHistoryEntry\";\r\n    time: Date;\r\n    evt: JQuery.FocusInEvent;\r\n    element: Element;\r\n    constructor(e: JQuery.FocusInEvent, element?: Element, time?: Date) {\r\n        this.evt = e;\r\n        this.element = element || e.target;\r\n        this.time = time || new Date();\r\n    }\r\n}\r\nexport enum ShortDefaultEClasses{\r\n    EObject = \"EObject\",\r\n    EAnnotation = \"EAnnotation\",\r\n    EClass = \"EClass\",\r\n    EPackage = \"EPackage\",\r\n    ENamedElement = \"ENamedElement\",\r\n}\r\nexport enum ShortAttribETypes {\r\n    EVoid = 'EVoid',\r\n    EChar  = 'EChar',\r\n    EString  = 'EString',\r\n    EDate  = 'EDate',\r\n    EBoolean = 'EBoolean',\r\n    EByte  = 'EByte',\r\n    EShort  = 'EShort',\r\n    EInt  = 'EInt',\r\n    ELong  = 'ELong',\r\n    EFloat  = 'EFloat',\r\n    EDouble  = 'EDouble',\r\n    // EDiagnosticChain = \"EDiagnosticChain\", // present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\r\n    /*\r\n  ECharObj  = 'ECharObj',\r\n  EStringObj  = 'EStringObj',\r\n  EDateObj  = 'EDateObj',\r\n  EFloatObj  = 'EFloatObj',\r\n  EDoubleObj  = 'EDoubleObj',\r\n  EBooleanObj = 'EBooleanObj',\r\n  EByteObj  = 'EByteObj',\r\n  EShortObj  = 'EShortObj',\r\n  EIntObj  = 'EIntObj',\r\n  ELongObj  = 'ELongObj',\r\n  EELIST  = 'EELIST',*/\r\n\r\n}\r\nwindoww.ShortAttribETypes = ShortAttribETypes;\r\n\r\nexport const ShortAttribSuperTypes: Dictionary<ShortAttribETypes, ShortAttribETypes[]> = {\r\n    \"EVoid\"    : [],\r\n    \"EChar\"    : [ShortAttribETypes.EString],\r\n    \"EString\"  : [],\r\n    \"EDate\"    : [],\r\n    \"EBoolean\" : [ShortAttribETypes.EByte, ShortAttribETypes.EShort, ShortAttribETypes.EInt, ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EByte\"    : [ShortAttribETypes.EShort, ShortAttribETypes.EInt, ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EShort\"   : [ShortAttribETypes.EInt, ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EInt\"     : [ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"ELong\"    : [ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EFloat\"   : [ShortAttribETypes.EDouble],\r\n    \"EDouble\"  : []\r\n};\r\nlet ecoreprefix = \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//\";\r\nlet ecoreclasprefix = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//\";\r\nexport function toShortEType(a: AttribETypes): ShortAttribETypes{ return a.substring(ecoreprefix.length) as any; }\r\nexport function toLongEType(a: ShortAttribETypes): AttribETypes {\r\n    return AttribETypes[a];\r\n    // return ecoreprefix + a as any;\r\n}\r\n\r\nexport function toShortEClass(a: DefaultEClasses): ShortDefaultEClasses{ return a.substring(ecoreclasprefix.length) as any; }\r\nexport function toLongEClass(a: ShortDefaultEClasses): DefaultEClasses { return DefaultEClasses[a]; }\r\n\r\nexport class SelectorOutput {\r\n    jqselector!: string;\r\n    attrselector!: string;\r\n    attrRegex!: RegExp;\r\n    exception!: any;\r\n    resultSetAttr!: Attr[];\r\n    resultSetElem!: JQuery<Element>;\r\n}\r\n// compare it with event.key\r\nexport enum Keystrokes {\r\n    clickLeft = 0,\r\n    clickWheel = 1,\r\n    clickRight = 2,\r\n    clickBackMouseButton = 3,\r\n    clickForwardMouseButton = 4,\r\n\r\n    // keyboard\r\n    escape = 'Escape',\r\n    capsLock = 'CapsLock',\r\n    shift = 'Shift',\r\n    tab = 'Tab',\r\n    alt = 'Alt',\r\n    control = 'Control',\r\n    end = 'End',\r\n    home = 'Home',\r\n    pageUp = 'PageUp',\r\n    pageDown = 'PageDown',\r\n    enter = 'Enter', // event.code = 'NumpadEnter' se fatto da numpad, oppure \"numpad3\", \"NumpadMultiply\", ShiftLeft, etc...\r\n    numpadEnter = 'NumpadEnter',\r\n    audioVolumeMute = 'AudioVolumeMute',\r\n    audioVolumeUp = 'AudioVolumeUp',\r\n    audioVolumeDown = 'AudioVolumeDown',\r\n    mediaTrackPrevious = 'MediaTrackPrevious',\r\n    delete = 'Delete', // canc\r\n    backspace = 'Backspace',\r\n    space = ' ',\r\n    altGraph = 'AltGraph',\r\n    arrowLeft = 'ArrowLeft',\r\n    arrowRight = 'ArrowRight',\r\n    arrowUp = 'ArrowUp',\r\n    arrowDown = 'ArrowDown',\r\n    insert = 'Insert',\r\n    f1 = 'F1',\r\n    // weird ones:\r\n    meta = 'Meta', // f1, or other f's with custom binding and windows key\r\n    unidentified = 'Unidentified', // brightness\r\n    __NotReacting__ = 'fn, print, maybe others', // not even triggering event?\r\n}\r\n\r\nexport enum DefaultEClasses{\r\n    EObject = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EObject\",\r\n    EAnnotation = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EAnnotation\",\r\n    EClass = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EClass\",\r\n    EPackage = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EPackage\",\r\n    ENamedElement = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//ENamedElement\",\r\n}\r\nexport enum AttribETypes {\r\n    EVoid = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EVoid', // ??? i invented this.\r\n    EChar = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EChar',\r\n    EString = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString',\r\n    EDate = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate',\r\n    EFloat = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloat',\r\n    EDouble = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble',\r\n    EBoolean = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean',\r\n    EByte = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByte',\r\n    EShort = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShort',\r\n    EInt = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt',\r\n    ELong = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELong',\r\n    // present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\r\n    // EDiagnosticChain = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDiagnosticChain',\r\n    /*\r\n  ECharObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ECharObject',\r\n  EStringObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EStringObject',\r\n  EDateObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDateObject',\r\n  EFloatObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloatObject',\r\n  EDoubleObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubleObject',\r\n  EBooleanObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObj',\r\n  EByteObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByteObject',\r\n  EShortObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShortObject',\r\n  EIntObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject',\r\n  ELongObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject', */\r\n    // EELIST = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList', // List<E> = List<?>\r\n}\r\n\r\n// export type Json = object;\r\n\r\nexport class ParseNumberOrBooleanOptions{\r\n    defaultValue?: any;\r\n    allowNull?: boolean; nullValue?: any;\r\n    allowUndefined?: boolean; undefinedValue?: any;\r\n    allowedNan?: boolean; nanValue?: any;\r\n    allowBooleans?: boolean; trueValue?: any; falseValue?: any;\r\n    constructor(\r\n        defaultValue: any = null, allowNull: boolean = false, nullValue: any = null,\r\n        allowUndefined: boolean = false, undefinedValue: any = undefined,\r\n        allowedNan: boolean = false, nanValue: any = NaN,\r\n        allowBooleans: boolean = true, trueValue : any = 1, falseValue: any = 0) {\r\n        this.defaultValue = defaultValue; this.allowNull = allowNull; this.nullValue = nullValue;\r\n        this.allowUndefined = allowUndefined; this.undefinedValue = undefinedValue;\r\n        this.allowedNan = allowedNan; this.nanValue = nanValue;\r\n        this.allowBooleans = allowBooleans; this.trueValue = trueValue; this.falseValue = falseValue;\r\n    }\r\n}\r\n\r\n@RuntimeAccessible('Log')\r\nexport class Log{\r\n    constructor() { }\r\n    // public static history: Dictionary<string, Dictionary<string, any[]>> = {}; // history['pe']['key'] = ...parameters\r\n    public static lastError: any[];\r\n    private static loggerMapping: Dictionary<string, LoggerInterface[]> = {} // takes function name returns logger list\r\n    public static registerLogger(logger: LoggerInterface, triggerAt: (typeof windoww.U.pe) & {name: string, cname:string}) {\r\n        let tname: string = (triggerAt as any).cname || (triggerAt as any).name;\r\n        if (!Log.loggerMapping[tname]) Log.loggerMapping[tname] = [];\r\n        Log.loggerMapping[tname].push(logger);\r\n    }\r\n\r\n    static disableConsole(){\r\n        // @ts-ignore\r\n        console['logg'] = console.log;\r\n        console.log = () => {}; }\r\n\r\n    static enableConsole() {\r\n        // @ts-ignore\r\n        if (console['logg']) console.log = console['logg']; }\r\n\r\n    private static log(prefix: string, category: string, originalFunc: typeof console.log, b: boolean, ...restArgs: any[]): string {\r\n        if (!b) { return ''; }\r\n        const key: string = windoww.U.getCaller(1);\r\n        if (restArgs === null || restArgs === undefined) { restArgs = []; }\r\n        let str = '[' + prefix + ']' + key + ': ';\r\n        for (let i = 0; i < restArgs.length; i++) {\r\n            // console.log(prefix, {i, restArgs, curr:restArgs[i]});\r\n            str += '' +\r\n                (typeof restArgs[i] === 'symbol' ?\r\n                    '' + String(restArgs[i]) :\r\n                    restArgs[i])\r\n                + '\\t\\r\\n'; }\r\n        if (Log.loggerMapping[category]) for (const logger of Log.loggerMapping[category]) { logger.log(category, key, restArgs, str); }\r\n        originalFunc(key, ...restArgs);\r\n        return str; }\r\n\r\n    public static e(b: boolean, ...restArgs: any[]): string {\r\n        if (!b) return '';\r\n        const str = Log.log('Error', 'e', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        return str;\r\n        // throw new Error(str);\r\n    }\r\n\r\n    public static eDev(b: boolean, ...restArgs: any[]): string {\r\n        if (!b) return '';\r\n        const str = Log.log('Dev Error','eDev', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        return str;\r\n        // throw new Error(str);\r\n    }\r\n\r\n    public static ex(b: boolean, ...restArgs: any[]): null | never | any {\r\n        if (!b) return null;\r\n        const str = Log.log('Error', 'e', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        windoww.ee = restArgs;\r\n        windoww.e1 = restArgs[1];\r\n        throw new MyError(str, ...restArgs); }\r\n\r\n    public static exDev(b: boolean, ...restArgs: any[]): null | never | any {\r\n        if (!b) return null;\r\n        const str = Log.log('Dev Error','eDev', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        windoww.ee = restArgs;\r\n        windoww.e1 = restArgs[1];\r\n        throw new MyError(str, ...restArgs); }\r\n\r\n    public static i(b: boolean, ...restArgs: any[]): string { return Log.log('Info', 'i', console.log, b, ...restArgs); }\r\n    public static l(b: boolean, ...restArgs: any[]): string { return Log.log('Log', 'l', console.log, b, ...restArgs); }\r\n    public static w(b: boolean, ...restArgs: any[]): string { return Log.log('Warn', 'w', console.warn, b, ...restArgs); }\r\n\r\n\r\n    public static eDevv<T extends any = any>(firstParam?: NotBool<T>, ...restAgs: any): string { return Log.eDev(true, ...[firstParam, ...restAgs]); }\r\n    public static ee(...restAgs: any): string { return Log.e(true, ...restAgs); }\r\n    public static exDevv<T extends any = any>(firstParam?: NotBool<T>, ...restAgs: any): never | any { return Log.exDev(true, ...[firstParam, ...restAgs]); }\r\n    public static exx(...restAgs: any): never | any { return Log.ex(true, ...restAgs); }\r\n    public static ii(...restAgs: any): string { return Log.i(true, ...restAgs); }\r\n    public static ll(...restAgs: any): string { return Log.l(true, ...restAgs); }\r\n    public static ww(...restAgs: any): string { return Log.w(true, ...restAgs); }\r\n}\r\n\r\ntype NotBool<T> = Exclude<T, boolean>;\r\n\r\ninterface LoggerInterface{\r\n    log: (category: string, key: string, data: any[], fullconcat?: string) => any;\r\n}\r\n\r\n\r\n\r\nexport class FileReadTypeEnum {\r\n    public static image: FileReadTypeEnum = \"image/*\" as any;\r\n    public static audio: FileReadTypeEnum = \"audio/*\" as any;\r\n    public static video: FileReadTypeEnum = \"video/*\" as any;\r\n    /// a too much huge list https://www.iana.org/assignments/media-types/media-types.xhtml\r\n    public static AndManyOthersButThereAreTooMuch: string = \"And many others... https://www.iana.org/assignments/media-types/media-types.xhtml\";\r\n    public static OrJustPutFileExtension: string = \"OrJustPutFileExtension\";\r\n}\r\n\r\n// console.info('loaded ts U');\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}