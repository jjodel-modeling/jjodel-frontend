{"ast":null,"code":"import _regeneratorRuntime from \"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { useEffect, useReducer, useRef } from 'react';\nfunction useFetch(url, options) {\n  var _this = this;\n  var cache = useRef({});\n  var cancelRequest = useRef(false);\n  var initialState = {\n    error: undefined,\n    data: undefined\n  };\n  var fetchReducer = function fetchReducer(state, action) {\n    switch (action.type) {\n      case 'loading':\n        return Object.assign({}, initialState);\n      case 'fetched':\n        return Object.assign(Object.assign({}, initialState), {\n          data: action.payload\n        });\n      case 'error':\n        return Object.assign(Object.assign({}, initialState), {\n          error: action.payload\n        });\n      default:\n        return state;\n    }\n  };\n  var _useReducer = useReducer(fetchReducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  useEffect(function () {\n    if (!url) return;\n    cancelRequest.current = false;\n    var fetchData = function fetchData() {\n      return __awaiter(_this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: 'loading'\n                });\n                if (!cache.current[url]) {\n                  _context.next = 4;\n                  break;\n                }\n                dispatch({\n                  type: 'fetched',\n                  payload: cache.current[url]\n                });\n                return _context.abrupt(\"return\");\n              case 4:\n                _context.prev = 4;\n                _context.next = 7;\n                return fetch(url, options);\n              case 7:\n                response = _context.sent;\n                if (response.ok) {\n                  _context.next = 10;\n                  break;\n                }\n                throw new Error(response.statusText);\n              case 10:\n                _context.next = 12;\n                return response.json();\n              case 12:\n                data = _context.sent;\n                cache.current[url] = data;\n                if (!cancelRequest.current) {\n                  _context.next = 16;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 16:\n                dispatch({\n                  type: 'fetched',\n                  payload: data\n                });\n                _context.next = 24;\n                break;\n              case 19:\n                _context.prev = 19;\n                _context.t0 = _context[\"catch\"](4);\n                if (!cancelRequest.current) {\n                  _context.next = 23;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 23:\n                dispatch({\n                  type: 'error',\n                  payload: _context.t0\n                });\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[4, 19]]);\n      }));\n    };\n    void fetchData();\n    return function () {\n      cancelRequest.current = true;\n    };\n  }, [url]);\n  return state;\n}\nexport default useFetch;","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","useEffect","useReducer","useRef","useFetch","url","options","_this","cache","cancelRequest","initialState","error","undefined","data","fetchReducer","state","action","type","Object","assign","payload","_useReducer","_useReducer2","_slicedToArray","dispatch","current","fetchData","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","abrupt","fetch","sent","ok","Error","statusText","json","t0","stop"],"sources":["C:/d/Programming/web/jodel-mde/node_modules/usehooks-ts/dist/esm/useFetch/useFetch.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { useEffect, useReducer, useRef } from 'react';\nfunction useFetch(url, options) {\n    const cache = useRef({});\n    const cancelRequest = useRef(false);\n    const initialState = {\n        error: undefined,\n        data: undefined,\n    };\n    const fetchReducer = (state, action) => {\n        switch (action.type) {\n            case 'loading':\n                return Object.assign({}, initialState);\n            case 'fetched':\n                return Object.assign(Object.assign({}, initialState), { data: action.payload });\n            case 'error':\n                return Object.assign(Object.assign({}, initialState), { error: action.payload });\n            default:\n                return state;\n        }\n    };\n    const [state, dispatch] = useReducer(fetchReducer, initialState);\n    useEffect(() => {\n        if (!url)\n            return;\n        cancelRequest.current = false;\n        const fetchData = () => __awaiter(this, void 0, void 0, function* () {\n            dispatch({ type: 'loading' });\n            if (cache.current[url]) {\n                dispatch({ type: 'fetched', payload: cache.current[url] });\n                return;\n            }\n            try {\n                const response = yield fetch(url, options);\n                if (!response.ok) {\n                    throw new Error(response.statusText);\n                }\n                const data = (yield response.json());\n                cache.current[url] = data;\n                if (cancelRequest.current)\n                    return;\n                dispatch({ type: 'fetched', payload: data });\n            }\n            catch (error) {\n                if (cancelRequest.current)\n                    return;\n                dispatch({ type: 'error', payload: error });\n            }\n        });\n        void fetchData();\n        return () => {\n            cancelRequest.current = true;\n        };\n    }, [url]);\n    return state;\n}\nexport default useFetch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}