{"ast":null,"code":"var _jsxFileName = \"C:\\\\d\\\\Programming\\\\web\\\\jodel-mde\\\\src\\\\components\\\\rightbar\\\\nestedViewEditor\\\\ViewEditorNestedVersion.tsx\",\n  _s = $RefreshSig$(),\n  _this = this;\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { DPointerTargetable, Input, LPointerTargetable, TRANSACTION, windoww } from '../../../joiner';\nimport { DUser, DViewPoint, LUser, U } from '../../../joiner';\nimport { useStateIfMounted } from 'use-state-if-mounted';\nimport { GenericTree } from \"../../forEndUser/Tree\";\nimport \"./VPNestedTree.scss\";\nimport ViewData from '../viewsEditor/View';\nimport { Tooltip } from \"../../forEndUser/Tooltip\";\n// import \"./tree.scss\" already imported by <Tree> subcomponent\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction NestedViewComponent(props) {\n  _s();\n  const project = props.project;\n  const viewpoints = props.viewpoints;\n  const active = props.active;\n  const editName = (evt, vp) => {\n    vp.name = evt.target.value;\n  };\n  const addVP = () => {\n    let name = 'viewpoint_' + 0;\n    let viewpointNames = viewpoints.map(vp => vp && vp.name);\n    name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\n    DViewPoint.newVP(name);\n  };\n  const deleteV = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n  const deleteVP = (e, viewPoint) => {\n    e.stopPropagation();\n    TRANSACTION(() => {\n      // viewPoint.subViews.map(v => v.delete());\n      viewPoint.delete();\n      // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n    });\n  };\n  const activateVP = viewPoint => {\n    project.activeViewpoint = viewPoint;\n  };\n  const clone = v => {\n    v.duplicate(true);\n  };\n  const getSubElements = v => v.subViews || {};\n  let activeViewpointId = project.activeViewpoint.id;\n  function renderEntry(e, childrens, isExpanded, toggleExpansion, depth, path, metadata) {\n    let d = e;\n    let appliableTo;\n    if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;else appliableTo = \"Any\";\n    appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\n    let parr = Object.keys(childrens);\n    let scoreBoost = (metadata === null || metadata === void 0 ? void 0 : metadata.scoreBoost) || 0;\n    let l = LPointerTargetable.fromD(d);\n    const preventClick = e => e.stopPropagation();\n    let isVP = d.className === DViewPoint.cname;\n    let isDefault = d.id.indexOf('Pointer_View') === 0;\n    function select(ptr) {\n      project.activeViewpoint = ptr;\n    }\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"entry-root \" + d.className + (d.id === activeViewpointId ? ' selected' : ''),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-row\",\n        onClick: () => !isVP && setView(d.id),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-stuff vertical-centering\",\n          onClick: preventClick,\n          children: parr.length >= 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: 'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right'),\n              onClick: toggleExpansion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"expansion-line\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 44\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'bi bi-caret-right-fill d-block my-auto'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mid-stuff vertical-centering\",\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            tooltip: 'test',\n            inline: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `icon type tree-${appliableTo} ${d.className}`,\n              children: isVP ? 'VP' : appliableTo === \"Any\" ? \"✲\" : appliableTo[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 61\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: d.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hover-stuff vertical-centering d-flex\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ms-auto d-flex\",\n            onClick: preventClick,\n            children: [isVP && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg btn-delete my-auto ms-2 green\",\n              disabled: active.id === d.id,\n              onClick: evt => {\n                select(d.id);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-check2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 34\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg btn-delete my-auto ms-2 green\",\n              onClick: e => {\n                l.duplicate();\n                preventClick(e);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bx bx-duplicate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 129\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg btn-delete my-auto ms-2\",\n              onClick: e => {\n                l.delete();\n                preventClick(e);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"p-1 bi bi-dash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 120\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-stuff vertical-centering\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-content\",\n            onClick: preventClick,\n            children: [isVP ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spacer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 33\n              }, this)\n            }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"priority\",\n                children: [\"priority: \", l.explicitApplicationPriority, \" *\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"spacer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"number\",\n                className: \"change-boost hidden-input\",\n                inputClassName: \"change-boost hidden-input\",\n                readonly: false,\n                data: l,\n                getter: () => scoreBoost + '',\n                setter: v => {\n                  l.subViews = {\n                    ...childrens,\n                    [d.id]: +v\n                  };\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"right-icon ocl-ico vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\"),\n                children: \"OCL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"right-icon js-ico vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\"),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"bi bi-lightning\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 37\n                }, this), \"JS\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(Tooltip, {\n              tooltip: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"is \", d.isExclusiveView ? \"\" : \"not\", \" mutually exclusive with other \\\"Ex\\\" views.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 43\n              }, this),\n              position: \"bottom\",\n              inline: true,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"right-icon ex-ico vertical-centering \" + (d.isExclusiveView ? '' : \"hidden\"),\n                children: \"Ex\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: isExpanded && parr.map((ptr, i) => /*#__PURE__*/_jsxDEV(GenericTree, {\n          data: DPointerTargetable.from(ptr),\n          getSubElements: getSubElements,\n          renderEntry: renderEntry,\n          depth: depth + 1,\n          path: [...path, i],\n          metadata: {\n            setView: metadata.setView,\n            scoreBoost: childrens[ptr]\n          },\n          initialHidingState: depth < 100\n          // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\n        }, ptr, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this)]\n    }, d.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 16\n    }, this);\n  }\n  let test = windoww;\n  let [view, setView] = useStateIfMounted(undefined);\n  let vieweditor = view && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"single-view-content\",\n    children: /*#__PURE__*/_jsxDEV(ViewData, {\n      viewid: view,\n      viewpoints: viewpoints.map(v => v.id),\n      setSelectedView: setView\n    }, view, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 69\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 30\n  }, this);\n  if (test) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"view-editor-root\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"view-editor-fullsize-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'd-flex ps-2 pt-2',\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          className: 'ms-1 my-auto',\n          children: \"Views\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-primary ms-auto',\n          onClick: addVP,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-plus'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }, this), vieweditor, /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"ps-2 pt-2\",\n        children: viewpoints.map(vp => /*#__PURE__*/_jsxDEV(GenericTree, {\n          data: vp.__raw,\n          getSubElements: getSubElements,\n          renderEntry: renderEntry,\n          metadata: {\n            setView,\n            scoreBoost: 0\n          },\n          initialHidingState: vp.id === activeViewpointId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 22\n  }, this);\n  let hoverID = '';\n  function setHoverID(a) {}\n  function selectt(a) {}\n  let validation; // props.validation\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [viewpoints.map((viewpoint, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'd-flex p-1 mt-1 border round mx-1',\n        onMouseEnter: e => setHoverID(viewpoint.id),\n        onMouseLeave: e => setHoverID(''),\n        style: {\n          backgroundColor: active.id === viewpoint.id ? 'white' : hoverID === viewpoint.id ? '#E0E0E0' : 'transparent'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: 'p-0 input hidden-input',\n          value: viewpoint.name,\n          type: 'text',\n          onChange: evt => {\n            editName(evt, viewpoint);\n          },\n          disabled: index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          className: \"ms-auto\",\n          data: viewpoint,\n          field: \"isExclusiveView\",\n          type: \"checkbox\",\n          label: \"Is exclusive\",\n          readonly: validation || index <= 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }, this), (!validation || true) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          disabled: active.id === viewpoint.id,\n          onClick: evt => {\n            selectt(viewpoint.id);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-check2'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 43\n        }, this)\n        // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\n        , /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-success ms-1',\n          onClick: evt => {\n            clone(viewpoint);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-clipboard2-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn btn-danger ms-1',\n          disabled: index <= 0 || active.id === viewpoint.id,\n          onClick: e => deleteV(e, viewpoint),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: 'p-1 bi bi-trash3-fill'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 20\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"label\", {\n      className: 'p-1',\n      children: \"*To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 13\n  }, this);\n}\n_s(NestedViewComponent, \"6MsH1nAsNExaYE8azqm/ah8Qw/k=\", false, function () {\n  return [useStateIfMounted];\n});\n_c = NestedViewComponent;\nfunction mapStateToProps(state, ownProps) {\n  const ret = {};\n  const user = LUser.fromPointer(DUser.current, state);\n  ret.project = user.project;\n  ret.viewpoints = ret.project.viewpoints.filter(vp => !!vp /* && vp.isValidation === ownProps.validation*/);\n  ret.active = ret.project.activeViewpoint;\n  return ret;\n}\nfunction mapDispatchToProps(dispatch) {\n  const ret = {};\n  return ret;\n}\nexport const NestedViewConnected = connect(mapStateToProps, mapDispatchToProps)(NestedViewComponent);\nexport const NestedView = function (props) {\n  let children = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return /*#__PURE__*/_jsxDEV(NestedViewConnected, {\n    ...props,\n    children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 12\n  }, _this);\n};\n_c2 = NestedView;\nexport default NestedView;\nvar _c, _c2;\n$RefreshReg$(_c, \"NestedViewComponent\");\n$RefreshReg$(_c2, \"NestedView\");","map":{"version":3,"names":["React","connect","DPointerTargetable","Input","LPointerTargetable","TRANSACTION","windoww","DUser","DViewPoint","LUser","U","useStateIfMounted","GenericTree","ViewData","Tooltip","jsxDEV","_jsxDEV","Fragment","_Fragment","NestedViewComponent","props","_s","project","viewpoints","active","editName","evt","vp","name","target","value","addVP","viewpointNames","map","increaseEndingNumber","newName","indexOf","newVP","deleteV","e","viewPoint","stopPropagation","delete","deleteVP","activateVP","activeViewpoint","clone","v","duplicate","getSubElements","subViews","activeViewpointId","id","renderEntry","childrens","isExpanded","toggleExpansion","depth","path","metadata","d","appliableTo","appliableToClasses","length","substring","replaceAll","parr","Object","keys","scoreBoost","l","fromD","preventClick","isVP","className","cname","isDefault","select","ptr","children","onClick","setView","fileName","_jsxFileName","lineNumber","columnNumber","tooltip","inline","disabled","explicitApplicationPriority","type","inputClassName","readonly","data","getter","setter","oclCondition","jsCondition","isExclusiveView","position","i","from","initialHidingState","test","view","undefined","vieweditor","viewid","setSelectedView","__raw","hoverID","setHoverID","a","selectt","validation","viewpoint","index","onMouseEnter","onMouseLeave","style","backgroundColor","onChange","field","label","_c","mapStateToProps","state","ownProps","ret","user","fromPointer","current","filter","mapDispatchToProps","dispatch","NestedViewConnected","NestedView","arguments","_this","_c2","$RefreshReg$"],"sources":["C:/d/Programming/web/jodel-mde/src/components/rightbar/nestedViewEditor/ViewEditorNestedVersion.tsx"],"sourcesContent":["import React, {Dispatch, ReactElement} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    DPointerTargetable,\r\n    DState,\r\n    DViewElement,\r\n    Input, LPointerTargetable,\r\n    LViewElement,\r\n    Pointer,\r\n    TRANSACTION,\r\n    windoww\r\n} from '../../../joiner';\r\nimport {DUser, DViewPoint, LProject, LUser, LViewPoint, U, SetFieldAction} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {Dictionary, FakeStateProps} from '../../../joiner/types';\r\nimport {add} from \"lodash\";\r\nimport Tree, {GenericTree} from \"../../forEndUser/Tree\";\r\nimport \"./VPNestedTree.scss\"\r\nimport ViewData from '../viewsEditor/View';\r\nimport {Tooltip} from \"../../forEndUser/Tooltip\";\r\n// import \"./tree.scss\" already imported by <Tree> subcomponent\r\ntype Metadata = {setView: (p: Pointer)=>any, scoreBoost: number}\r\nfunction NestedViewComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const viewpoints = props.viewpoints;\r\n    const active = props.active;\r\n\r\n    const editName = (evt: React.ChangeEvent<HTMLInputElement>, vp: LViewElement) => { vp.name = evt.target.value; }\r\n    const addVP = () => {\r\n        let name = 'viewpoint_' + 0;\r\n        let viewpointNames: string[] = viewpoints.map(vp => vp && vp.name);\r\n        name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\r\n        DViewPoint.newVP(name);\r\n    }\r\n    const deleteV = (e: React.MouseEvent, viewPoint: LViewElement) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n    const deleteVP = (e: React.MouseEvent, viewPoint: LViewPoint) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n\r\n    const activateVP = (viewPoint: LViewPoint) => { project.activeViewpoint = viewPoint; }\r\n    const clone = (v: LViewElement) => { v.duplicate(true); }\r\n    const getSubElements = (v: DViewElement) => v.subViews || {};\r\n    let activeViewpointId: Pointer<DPointerTargetable> = project.activeViewpoint.id;\r\n\r\n    function renderEntry(e: DViewElement, childrens: Dictionary<Pointer, number>, isExpanded: boolean, toggleExpansion: ()=>any, depth: number, path: number[], metadata: Metadata): JSX.Element{\r\n        let d = e;\r\n        let appliableTo: string;\r\n        if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);\r\n        else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;\r\n        else appliableTo = \"Any\";\r\n        appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\r\n        let parr = Object.keys(childrens);\r\n        let scoreBoost = metadata?.scoreBoost || 0;\r\n        let l: LViewElement = LPointerTargetable.fromD(d);\r\n\r\n        const preventClick = (e: any)=>e.stopPropagation();\r\n        let isVP = d.className === DViewPoint.cname;\r\n        let isDefault = d.id.indexOf('Pointer_View') === 0;\r\n\r\n        function select(ptr: Pointer<DViewPoint>){ project.activeViewpoint = ptr as any; }\r\n\r\n        return <li className={\"entry-root \" + d.className + (d.id === activeViewpointId ? ' selected' : '')} key={d.id}>\r\n            <div className={\"inline-row\"} onClick={()=>!isVP && setView(d.id)}>\r\n                <div className={\"left-stuff vertical-centering\"} onClick={preventClick}>\r\n                    {parr.length >= 1 ?\r\n                        <>\r\n                            <i className={'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right')} onClick={toggleExpansion} />\r\n                            {isExpanded && <div className={\"expansion-line\"} />}\r\n                        </>\r\n                        :\r\n                        <i className={'bi bi-caret-right-fill d-block my-auto'} />\r\n                    }\r\n                </div>\r\n                <div className={\"mid-stuff vertical-centering\"}>\r\n                    <Tooltip tooltip={'test'} inline={true}><div className={`icon type tree-${appliableTo} ${d.className}`}>{\r\n                        isVP ? 'VP' : (appliableTo === \"Any\" ? \"✲\" : appliableTo[0])\r\n                    }</div></Tooltip>\r\n                    <div>{d.name}</div>\r\n                </div>\r\n                <div className={\"hover-stuff vertical-centering d-flex\"}>\r\n                    <div className={\"ms-auto d-flex\"} onClick={preventClick}>\r\n                        {isVP && <button className=\"bg btn-delete my-auto ms-2 green\" disabled={active.id === d.id}\r\n                                         onClick={(evt) => {select(d.id)}}>\r\n                            <i className='bi bi-check2' />\r\n                        </button>\r\n                        }\r\n                        <button className=\"bg btn-delete my-auto ms-2 green\" onClick={(e)=> { l.duplicate(); preventClick(e);}}><i className='bx bx-duplicate' /></button>\r\n                        <button className=\"bg btn-delete my-auto ms-2\" onClick={(e)=> { l.delete(); preventClick(e);}}><i className=\"p-1 bi bi-dash\" /></button>\r\n                    </div>\r\n                </div>\r\n                <div className={\"right-stuff vertical-centering\"}>\r\n                    <div className={\"right-content\"} onClick={preventClick}>\r\n                        {\r\n                            isVP ? <>\r\n                                <div className={\"spacer\"}/>\r\n                            </> : <>\r\n                                <span className={\"priority\"}>priority: {l.explicitApplicationPriority} *</span>\r\n                                <div className={\"spacer\"}/>\r\n                                <Input type=\"number\"\r\n                                       className={\"change-boost hidden-input\"}\r\n                                       inputClassName={\"change-boost hidden-input\"}\r\n                                       readonly={false}\r\n                                       data={l}\r\n                                       getter={()=>scoreBoost + ''}\r\n                                       setter={(v)=>{l.subViews = {...childrens, [d.id]: +v} as any}} />\r\n                                <span className={\"right-icon ocl-ico vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\")}>OCL</span>\r\n                                <span className={\"right-icon js-ico vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\")}>\r\n                                    <i className=\"bi bi-lightning\" />JS\r\n                                </span>\r\n                            </>\r\n                        }\r\n                        <Tooltip tooltip={<div>is {d.isExclusiveView ? \"\" : \"not\"} mutually exclusive with other \"Ex\" views.</div>} position={\"bottom\"} inline={true}>\r\n                            <span className={\"right-icon ex-ico vertical-centering \" + (d.isExclusiveView ? '' : \"hidden\")}>Ex</span></Tooltip>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul>{isExpanded && parr.map( (ptr, i) => (\r\n                <GenericTree key={ptr}\r\n                             data={DPointerTargetable.from(ptr)}\r\n                             getSubElements={getSubElements}\r\n                             renderEntry={renderEntry}\r\n                             depth={depth + 1} path={[...path, i]}\r\n                             metadata={{setView:metadata.setView, scoreBoost:childrens[ptr]} as Metadata}\r\n                             initialHidingState={depth < 100}\r\n                    // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\r\n                />))}</ul>\r\n        </li>;\r\n    }\r\n\r\n    let test = windoww;\r\n\r\n    let [view, setView] = useStateIfMounted(undefined as (undefined | Pointer<DViewElement>));\r\n    let vieweditor = view && <div className={\"single-view-content\"}><ViewData key={view} viewid={view} viewpoints={viewpoints.map(v=>v.id)} setSelectedView={setView} /></div>;\r\n    if (test) return(<div className={\"view-editor-root\"}>\r\n        <div className={\"view-editor-fullsize-content\"}>\r\n            <div className={'d-flex ps-2 pt-2'}>\r\n                <b className={'ms-1 my-auto'}>Views</b>\r\n                <button className={'btn btn-primary ms-auto'} onClick={addVP}>\r\n                    <i className={'p-1 bi bi-plus'}></i>\r\n                </button>\r\n            </div>\r\n            {vieweditor}\r\n            <ul className={\"ps-2 pt-2\"}>\r\n                {viewpoints.map(vp=><GenericTree\r\n                    data={vp.__raw}\r\n                    getSubElements={getSubElements}\r\n                    renderEntry={renderEntry}\r\n                    metadata={{setView, scoreBoost:0}}\r\n                    initialHidingState={vp.id === activeViewpointId} />)}\r\n            </ul>\r\n        </div>\r\n    </div>);\r\n\r\n    let hoverID: any = '';\r\n    function setHoverID(a:any){}\r\n    function selectt(a: any){}\r\n    let validation: false;// props.validation\r\n    return (<div>\r\n        {viewpoints.map((viewpoint, index) => {\r\n            return <div key={index} className={'d-flex p-1 mt-1 border round mx-1'}\r\n                        onMouseEnter={(e) => setHoverID(viewpoint.id)}\r\n                        onMouseLeave={(e) => setHoverID('')}\r\n                        style={{backgroundColor: (active.id === viewpoint.id) ? 'white' :\r\n                                (hoverID === viewpoint.id ? '#E0E0E0' : 'transparent')}}>\r\n                <input className={'p-0 input hidden-input'} value={viewpoint.name} type={'text'}\r\n                       onChange={(evt) => {editName(evt, viewpoint)}} disabled={index <= 0} />\r\n                <Input className={\"ms-auto\"} data={viewpoint} field={\"isExclusiveView\"} type={\"checkbox\"}\r\n                       label={\"Is exclusive\"} readonly={validation || index <= 0} />\r\n                {(!validation || true) && <button className={'btn btn-success ms-1'} disabled={active.id === viewpoint.id}\r\n                                                        onClick={(evt) => {selectt(viewpoint.id)}}>\r\n                    <i className={'p-1 bi bi-check2'}/>\r\n                </button>\r\n                    // todo: validation views should not be \"activable\" but so far it is the only way to see the subviews in it.\r\n                }\r\n                <button className={'btn btn-success ms-1'}\r\n                        onClick={(evt) => {clone(viewpoint)}}>\r\n                    <i className={'p-1 bi bi-clipboard2-fill'}></i>\r\n                </button>\r\n                <button className={'btn btn-danger ms-1'} disabled={index <= 0 || active.id === viewpoint.id}\r\n                        onClick={(e) => deleteV(e, viewpoint)}>\r\n                    <i className={'p-1 bi bi-trash3-fill'}></i>\r\n                </button>\r\n            </div>\r\n        })}\r\n        <label className={'p-1'}>\r\n            *To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\r\n        </label>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n}\r\ninterface StateProps {\r\n    project: LProject;\r\n    viewpoints: LViewPoint[];\r\n    active: LViewPoint;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user: LUser = LUser.fromPointer(DUser.current, state);\r\n    ret.project = user.project as LProject;\r\n    ret.viewpoints = ret.project.viewpoints.filter( (vp) => !!vp/* && vp.isValidation === ownProps.validation*/);\r\n    ret.active = ret.project.activeViewpoint;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const NestedViewConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NestedViewComponent);\r\n\r\nexport const NestedView = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <NestedViewConnected {...{...props, children}} />;\r\n}\r\nexport default NestedView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}