{"ast":null,"code":"import _slicedToArray from \"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react';\nvar cachedScriptStatuses = {};\nfunction getScriptNode(src) {\n  var node = document.querySelector(\"script[src=\\\"\".concat(src, \"\\\"]\"));\n  var status = node === null || node === void 0 ? void 0 : node.getAttribute('data-status');\n  return {\n    node: node,\n    status: status\n  };\n}\nfunction useScript(src, options) {\n  var _useState = useState(function () {\n      var _a;\n      if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n        return 'idle';\n      }\n      if (typeof window === 'undefined') {\n        return 'loading';\n      }\n      return (_a = cachedScriptStatuses[src]) !== null && _a !== void 0 ? _a : 'loading';\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    status = _useState2[0],\n    setStatus = _useState2[1];\n  useEffect(function () {\n    var _a, _b;\n    if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n      return;\n    }\n    var cachedScriptStatus = cachedScriptStatuses[src];\n    if (cachedScriptStatus === 'ready' || cachedScriptStatus === 'error') {\n      setStatus(cachedScriptStatus);\n      return;\n    }\n    var script = getScriptNode(src);\n    var scriptNode = script.node;\n    if (!scriptNode) {\n      scriptNode = document.createElement('script');\n      scriptNode.src = src;\n      scriptNode.async = true;\n      scriptNode.setAttribute('data-status', 'loading');\n      document.body.appendChild(scriptNode);\n      var setAttributeFromEvent = function setAttributeFromEvent(event) {\n        var scriptStatus = event.type === 'load' ? 'ready' : 'error';\n        scriptNode === null || scriptNode === void 0 ? void 0 : scriptNode.setAttribute('data-status', scriptStatus);\n      };\n      scriptNode.addEventListener('load', setAttributeFromEvent);\n      scriptNode.addEventListener('error', setAttributeFromEvent);\n    } else {\n      setStatus((_b = (_a = script.status) !== null && _a !== void 0 ? _a : cachedScriptStatus) !== null && _b !== void 0 ? _b : 'loading');\n    }\n    var setStateFromEvent = function setStateFromEvent(event) {\n      var newStatus = event.type === 'load' ? 'ready' : 'error';\n      setStatus(newStatus);\n      cachedScriptStatuses[src] = newStatus;\n    };\n    scriptNode.addEventListener('load', setStateFromEvent);\n    scriptNode.addEventListener('error', setStateFromEvent);\n    return function () {\n      if (scriptNode) {\n        scriptNode.removeEventListener('load', setStateFromEvent);\n        scriptNode.removeEventListener('error', setStateFromEvent);\n      }\n      if (scriptNode && (options === null || options === void 0 ? void 0 : options.removeOnUnmount)) {\n        scriptNode.remove();\n      }\n    };\n  }, [src, options === null || options === void 0 ? void 0 : options.shouldPreventLoad, options === null || options === void 0 ? void 0 : options.removeOnUnmount]);\n  return status;\n}\nexport default useScript;","map":{"version":3,"names":["useEffect","useState","cachedScriptStatuses","getScriptNode","src","node","document","querySelector","concat","status","getAttribute","useScript","options","_useState","_a","shouldPreventLoad","window","_useState2","_slicedToArray","setStatus","_b","cachedScriptStatus","script","scriptNode","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","scriptStatus","type","addEventListener","setStateFromEvent","newStatus","removeEventListener","removeOnUnmount","remove"],"sources":["C:/d/Programming/web/jodel-mde/node_modules/usehooks-ts/dist/esm/useScript/useScript.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nconst cachedScriptStatuses = {};\nfunction getScriptNode(src) {\n    const node = document.querySelector(`script[src=\"${src}\"]`);\n    const status = node === null || node === void 0 ? void 0 : node.getAttribute('data-status');\n    return {\n        node,\n        status,\n    };\n}\nfunction useScript(src, options) {\n    const [status, setStatus] = useState(() => {\n        var _a;\n        if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n            return 'idle';\n        }\n        if (typeof window === 'undefined') {\n            return 'loading';\n        }\n        return (_a = cachedScriptStatuses[src]) !== null && _a !== void 0 ? _a : 'loading';\n    });\n    useEffect(() => {\n        var _a, _b;\n        if (!src || (options === null || options === void 0 ? void 0 : options.shouldPreventLoad)) {\n            return;\n        }\n        const cachedScriptStatus = cachedScriptStatuses[src];\n        if (cachedScriptStatus === 'ready' || cachedScriptStatus === 'error') {\n            setStatus(cachedScriptStatus);\n            return;\n        }\n        const script = getScriptNode(src);\n        let scriptNode = script.node;\n        if (!scriptNode) {\n            scriptNode = document.createElement('script');\n            scriptNode.src = src;\n            scriptNode.async = true;\n            scriptNode.setAttribute('data-status', 'loading');\n            document.body.appendChild(scriptNode);\n            const setAttributeFromEvent = (event) => {\n                const scriptStatus = event.type === 'load' ? 'ready' : 'error';\n                scriptNode === null || scriptNode === void 0 ? void 0 : scriptNode.setAttribute('data-status', scriptStatus);\n            };\n            scriptNode.addEventListener('load', setAttributeFromEvent);\n            scriptNode.addEventListener('error', setAttributeFromEvent);\n        }\n        else {\n            setStatus((_b = (_a = script.status) !== null && _a !== void 0 ? _a : cachedScriptStatus) !== null && _b !== void 0 ? _b : 'loading');\n        }\n        const setStateFromEvent = (event) => {\n            const newStatus = event.type === 'load' ? 'ready' : 'error';\n            setStatus(newStatus);\n            cachedScriptStatuses[src] = newStatus;\n        };\n        scriptNode.addEventListener('load', setStateFromEvent);\n        scriptNode.addEventListener('error', setStateFromEvent);\n        return () => {\n            if (scriptNode) {\n                scriptNode.removeEventListener('load', setStateFromEvent);\n                scriptNode.removeEventListener('error', setStateFromEvent);\n            }\n            if (scriptNode && (options === null || options === void 0 ? void 0 : options.removeOnUnmount)) {\n                scriptNode.remove();\n            }\n        };\n    }, [src, options === null || options === void 0 ? void 0 : options.shouldPreventLoad, options === null || options === void 0 ? void 0 : options.removeOnUnmount]);\n    return status;\n}\nexport default useScript;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}