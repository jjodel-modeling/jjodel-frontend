{"ast":null,"code":"/* Viewpoints */import React,{useState}from'react';import{connect}from'react-redux';import{DPointerTargetable,DUser,DViewPoint,Input,LPointerTargetable,LUser,TRANSACTION,U,windoww}from'../../../joiner';import{useStateIfMounted}from'use-state-if-mounted';import{GenericTree}from\"../../forEndUser/Tree\";import\"./nestedView.scss\";import{ViewData}from'./ViewData';import{Tooltip}from\"../../forEndUser/Tooltip\";import{Btn,CommandBar,Sep}from'../../commandbar/CommandBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NestedViewComponent(props){const project=props.project;const viewpoints=props.viewpoints;const active=props.active;const editName=(evt,vp)=>{vp.name=evt.target.value;};const addVP=()=>{let name='viewpoint_'+0;let viewpointNames=viewpoints.map(vp=>vp&&vp.name);name=U.increaseEndingNumber(name,false,false,newName=>viewpointNames.indexOf(newName)>=0);DViewPoint.newVP(name);};const deleteV=(e,viewPoint)=>{e.stopPropagation();TRANSACTION(()=>{// viewPoint.subViews.map(v => v.delete());\nviewPoint.delete();// SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n});};const deleteVP=(e,viewPoint)=>{e.stopPropagation();TRANSACTION(()=>{// viewPoint.subViews.map(v => v.delete());\nviewPoint.delete();// SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\n});};// function mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\n//     const ret: StateProps = {} as FakeStateProps;\n//     // const user = LUser.fromPointer(DUser.current, state);\n//     // ret.project = user.project as LProject;\n//     ret.priority = LPointerTargetable.fromArr(ownProps.priority); // ret.project.viewpoints;\n//     ret.debug = state.debug;\n//     ret.view = LPointerTargetable.fromPointer(ownProps.viewid, state);\n//     return ret;\n// }\nconst activateVP=viewPoint=>{project.activeViewpoint=viewPoint;};const clone=v=>{v.duplicate(true);};const getSubElements=v=>(v===null||v===void 0?void 0:v.subViews)||{};//\nlet activeViewpointId=project.activeViewpoint.id;let[collapseAll,setCollapseAll]=useState(undefined);function renderEntry(e,childrens,isExpanded,toggleExpansion,depth,path,metadata){let d=e;let appliableTo;if(collapseAll!==undefined&&collapseAll===isExpanded)toggleExpansion();let expandClick=()=>{setCollapseAll(undefined);toggleExpansion();};if(d.appliableToClasses.length===1)appliableTo=d.appliableToClasses[0].substring(1);else if(d.appliableToClasses.length===0)appliableTo=d.appliableTo;else appliableTo=\"Any\";appliableTo=U.replaceAll(appliableTo,\"Void\",\"\");let parr=Object.keys(childrens);let scoreBoost=(metadata===null||metadata===void 0?void 0:metadata.scoreBoost)||0;let l=LPointerTargetable.fromD(d);const preventClick=e=>e.stopPropagation();let isVP=d.className===DViewPoint.cname;let isDefault=d.id.indexOf('Pointer_View')===0;function select(ptr){project.activeViewpoint=ptr;}let appliableToEnhanced=d.name==='Singleton'?'Singleton':appliableTo;const max_priority=l.explicitApplicationPriority;return/*#__PURE__*/_jsxs(\"li\",{className:\"entry-root \"+d.className+(d.id===activeViewpointId?' selected':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:'inline-row',onClick:()=>setView(d.id),onDoubleClick:e=>{select(d.id);},children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"left-stuff vertical-centering \",onClick:preventClick,children:parr.length>=1?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{style:{fontSize:'0.55em',marginRight:'24px!important'},className:'bi cursor-pointer d-block my-auto bi-chevron-'+(isExpanded?'down':'right'),onClick:expandClick}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"expansion-line\"})]}):/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mid-stuff vertical-centering\",style:{marginLeft:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon type tree-\".concat(appliableToEnhanced,\" \").concat(d.className),style:{width:'24px',height:'24px'},children:isVP?'VP':appliableToEnhanced===\"Any\"?\"✲\":appliableToEnhanced==='Singleton'?'S':appliableToEnhanced[0]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'4px'},children:d.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hover-stuff vertical-centering d-flex \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ms-auto d-flex\",onClick:preventClick,children:[isVP&&/*#__PURE__*/_jsx(CommandBar,{style:{transition:'1s 0.3s',marginTop:'2px'},children:/*#__PURE__*/_jsx(Btn,{icon:'check',action:evt=>{select(d.id);},tip:'Activate'})})/* <button className=\"bg btn-delete my-auto ms-2 green\" disabled={active.id === d.id}\r\n                                onClick={(evt) => {select(d.id)}}>\r\n                                <i className='bi bi-check2' />\r\n                            </button>*/,/*#__PURE__*/_jsxs(CommandBar,{style:{transition:'1s 0.3s',marginTop:'2px'},children:[/*#__PURE__*/_jsx(Btn,{icon:'delete',action:e=>{l.delete();preventClick(e);},tip:'Delete'}),\" \",/*#__PURE__*/_jsx(Btn,{icon:'copy',action:e=>{l.duplicate();preventClick(e);},tip:'Duplicate'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-stuff vertical-centering\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"right-content\",onClick:preventClick,children:[isVP?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[props.isAdvanced&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"priority\",children:[\"priority: \",l.explicitApplicationPriority,\" \"]}),/*#__PURE__*/_jsx(\"i\",{style:{paddingTop:'4px'},className:\"bi bi-x\"}),/*#__PURE__*/_jsx(\"div\",{className:\"spacer\"}),/*#__PURE__*/_jsx(Input,{type:\"number\",className:\"change-boost hidden-input priority-booster\",inputClassName:\"change-boost hidden-input\",readonly:false,data:l,getter:()=>scoreBoost+'',setter:v=>{l.subViews={...childrens,[d.id]:+v};}})]}),/*#__PURE__*/_jsx(\"span\",{className:\"right-icon feature-border ocl-icon vertical-centering \"+(d.oclCondition.length?\"\":\"hidden\")}),/*#__PURE__*/_jsx(\"span\",{className:\"right-icon feature-border js-icon vertical-centering \"+(d.jsCondition.length?\"\":\"hidden\")})]}),/*#__PURE__*/_jsx(Tooltip,{tooltip:/*#__PURE__*/_jsxs(\"div\",{children:[\"is \",d.isExclusiveView?\"\":\"not\",\" mutually exclusive with other \\\"Ex\\\" views.\"]}),position:\"bottom\",inline:true,children:/*#__PURE__*/_jsx(\"span\",{className:\"right-icon feature-border ex-icon vertical-centering \"+(d.isExclusiveView?'':\"hidden\"),onClick:()=>l.isExclusiveView=!d.isExclusiveView})})]})})]}),/*#__PURE__*/_jsx(\"ul\",{children:isExpanded&&parr.map((ptr,i)=>/*#__PURE__*/_jsx(GenericTree,{data:DPointerTargetable.from(ptr),getSubElements:getSubElements,renderEntry:renderEntry,depth:depth+1,path:[...path,i],metadata:{setView:metadata.setView,scoreBoost:childrens[ptr]},initialHidingState:depth<100// metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\n},ptr))})]},d.id);}let test=windoww;let[view,setView]=useStateIfMounted(undefined);let vieweditor=view&&/*#__PURE__*/_jsx(\"div\",{className:\"single-view-content\",children:/*#__PURE__*/_jsx(ViewData,{viewid:view,viewpoints:viewpoints.map(v=>v.id),setSelectedView:setView},view)});if(test)return/*#__PURE__*/_jsx(\"div\",{className:\"view-editor-root\",children:/*#__PURE__*/_jsx(\"section\",{className:'viewpoint-tab',children:/*#__PURE__*/_jsxs(\"div\",{className:\"view-editor-fullsize-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:'d-flexd-flex',children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Viewpoints\",/*#__PURE__*/_jsxs(CommandBar,{style:{float:'right'},children:[/*#__PURE__*/_jsx(Btn,{icon:'shrink',active:collapseAll,action:()=>{setCollapseAll(true);},tip:'Collapse all'}),/*#__PURE__*/_jsx(Btn,{icon:'expand',active:collapseAll===false,action:()=>{setCollapseAll(false);},tip:'Expand all'}),/*#__PURE__*/_jsx(Sep,{}),/*#__PURE__*/_jsx(Btn,{icon:'add',action:addVP,tip:'Create a new viewpoint'})]})]})}),vieweditor,/*#__PURE__*/_jsx(\"ul\",{className:\"ps-2 pt-2\",children:viewpoints.map(vp=>/*#__PURE__*/_jsx(GenericTree,{data:vp.__raw,getSubElements:getSubElements,renderEntry:renderEntry,metadata:{setView,scoreBoost:0},initialHidingState:vp.id===activeViewpointId}))})]})})});let hoverID='';function setHoverID(a){}function selectt(a){}let validation;// props.validation\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[viewpoints.map((viewpoint,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:'d-flex p-1 mt-1 border round mx-1 viewpoint',onMouseEnter:e=>setHoverID(viewpoint.id),onMouseLeave:e=>setHoverID(''),style:{backgroundColor:active.id===viewpoint.id?'white':hoverID===viewpoint.id?'#E0E0E0':'transparent'},children:[/*#__PURE__*/_jsx(\"input\",{className:'p-0 input hidden-input',value:viewpoint.name,type:'text',onChange:evt=>{editName(evt,viewpoint);},disabled:index<=0}),/*#__PURE__*/_jsx(Input,{className:\"ms-auto\",data:viewpoint,field:\"isExclusiveView\",type:\"checkbox\",label:\"Is exclusive\",readonly:validation||index<=0}),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-success ms-1',disabled:active.id===viewpoint.id,onClick:evt=>{selectt(viewpoint.id);},children:/*#__PURE__*/_jsx(\"i\",{className:'p-1 bi bi-check2'})}),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-success ms-1',onClick:evt=>{clone(viewpoint);},children:/*#__PURE__*/_jsx(\"i\",{className:'p-1 bi bi-clipboard2-fill'})}),/*#__PURE__*/_jsx(\"button\",{className:'btn btn-danger ms-1',disabled:index<=0||active.id===viewpoint.id,onClick:e=>deleteV(e,viewpoint),children:/*#__PURE__*/_jsx(\"i\",{className:'p-1 bi bi-trash3-fill'})})]},index);}),/*#__PURE__*/_jsx(\"label\",{className:'p-1',children:\"*To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\"})]});}function mapStateToProps(state,ownProps){const ret={};const user=LUser.fromPointer(DUser.current,state);ret.project=user.project;ret.viewpoints=ret.project.viewpoints.filter(vp=>!!vp/* && vp.isValidation === ownProps.validation*/);ret.active=ret.project.activeViewpoint;ret.isAdvanced=state.advanced;return ret;}function mapDispatchToProps(dispatch){const ret={};return ret;}export const NestedViewConnected=connect(mapStateToProps,mapDispatchToProps)(NestedViewComponent);export const NestedView=function(props){let children=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return/*#__PURE__*/_jsx(NestedViewConnected,{...props,children});};","map":{"version":3,"names":["React","useState","connect","DPointerTargetable","DUser","DViewPoint","Input","LPointerTargetable","LUser","TRANSACTION","U","windoww","useStateIfMounted","GenericTree","ViewData","Tooltip","Btn","CommandBar","Sep","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NestedViewComponent","props","project","viewpoints","active","editName","evt","vp","name","target","value","addVP","viewpointNames","map","increaseEndingNumber","newName","indexOf","newVP","deleteV","e","viewPoint","stopPropagation","delete","deleteVP","activateVP","activeViewpoint","clone","v","duplicate","getSubElements","subViews","activeViewpointId","id","collapseAll","setCollapseAll","undefined","renderEntry","childrens","isExpanded","toggleExpansion","depth","path","metadata","d","appliableTo","expandClick","appliableToClasses","length","substring","replaceAll","parr","Object","keys","scoreBoost","l","fromD","preventClick","isVP","className","cname","isDefault","select","ptr","appliableToEnhanced","max_priority","explicitApplicationPriority","children","onClick","setView","onDoubleClick","style","fontSize","marginRight","marginLeft","concat","width","height","transition","marginTop","icon","action","tip","isAdvanced","paddingTop","type","inputClassName","readonly","data","getter","setter","oclCondition","jsCondition","tooltip","isExclusiveView","position","inline","i","from","initialHidingState","test","view","vieweditor","viewid","setSelectedView","float","__raw","hoverID","setHoverID","a","selectt","validation","viewpoint","index","onMouseEnter","onMouseLeave","backgroundColor","onChange","disabled","field","label","mapStateToProps","state","ownProps","ret","user","fromPointer","current","filter","advanced","mapDispatchToProps","dispatch","NestedViewConnected","NestedView","arguments"],"sources":["C:/0Programmi/Dev/projects/frontend/jjodel/src/components/editors/views/NestedView.tsx"],"sourcesContent":["/* Viewpoints */\r\n\r\nimport React, {Dispatch, ReactElement, useState} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    DPointerTargetable,\r\n    DState,\r\n    DUser,\r\n    DViewElement,\r\n    DViewPoint,\r\n    Input,\r\n    LPointerTargetable,\r\n    LProject,\r\n    LUser,\r\n    LViewElement,\r\n    LViewPoint,\r\n    Pointer,\r\n    TRANSACTION,\r\n    U,\r\n    windoww\r\n} from '../../../joiner';\r\nimport {useStateIfMounted} from 'use-state-if-mounted';\r\nimport {Dictionary, FakeStateProps} from '../../../joiner/types';\r\nimport {GenericTree} from \"../../forEndUser/Tree\";\r\nimport \"./nestedView.scss\"\r\nimport {ViewData} from './ViewData';\r\nimport {Tooltip} from \"../../forEndUser/Tooltip\";\r\nimport {Btn, CommandBar, Sep} from '../../commandbar/CommandBar';\r\nimport {InternalToggle} from '../../widgets/Widgets';\r\n\r\ntype Metadata = {setView: (p: Pointer)=>any, scoreBoost: number}\r\nfunction NestedViewComponent(props: AllProps) {\r\n    const project = props.project;\r\n    const viewpoints = props.viewpoints;\r\n    const active = props.active;\r\n\r\n    const editName = (evt: React.ChangeEvent<HTMLInputElement>, vp: LViewElement) => { vp.name = evt.target.value; }\r\n    const addVP = () => {\r\n        let name = 'viewpoint_' + 0;\r\n        let viewpointNames: string[] = viewpoints.map(vp => vp && vp.name);\r\n        name = U.increaseEndingNumber(name, false, false, newName => viewpointNames.indexOf(newName) >= 0);\r\n        DViewPoint.newVP(name);\r\n    }\r\n    const deleteV = (e: React.MouseEvent, viewPoint: LViewElement) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n    const deleteVP = (e: React.MouseEvent, viewPoint: LViewPoint) => {\r\n        e.stopPropagation();\r\n        TRANSACTION(()=>{\r\n            // viewPoint.subViews.map(v => v.delete());\r\n            viewPoint.delete();\r\n            // SetFieldAction.new(project.id, 'viewpoints', viewPoint.id as any, '-=', false);\r\n        });\r\n    }\r\n\r\n\r\n    // function mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    //     const ret: StateProps = {} as FakeStateProps;\r\n    //     // const user = LUser.fromPointer(DUser.current, state);\r\n    //     // ret.project = user.project as LProject;\r\n    //     ret.priority = LPointerTargetable.fromArr(ownProps.priority); // ret.project.viewpoints;\r\n    //     ret.debug = state.debug;\r\n    //     ret.view = LPointerTargetable.fromPointer(ownProps.viewid, state);\r\n    //     return ret;\r\n    // }\r\n\r\n    const activateVP = (viewPoint: LViewPoint) => { project.activeViewpoint = viewPoint; }\r\n    const clone = (v: LViewElement) => { v.duplicate(true); }\r\n    const getSubElements = (v: DViewElement) => v?.subViews || {}; //\r\n    let activeViewpointId: Pointer<DPointerTargetable> = project.activeViewpoint.id;\r\n\r\n    let [collapseAll, setCollapseAll] = useState<boolean | undefined>( undefined );\r\n\r\n    function renderEntry(e: DViewElement, childrens: Dictionary<Pointer, number>, isExpanded: boolean, toggleExpansion: ()=>any, depth: number, path: number[], metadata: Metadata): JSX.Element{\r\n        let d = e;\r\n        let appliableTo: string;\r\n\r\n        if (collapseAll !== undefined && collapseAll === isExpanded) toggleExpansion();\r\n        let expandClick = () => {\r\n            setCollapseAll(undefined);\r\n            toggleExpansion();\r\n        }\r\n\r\n        if (d.appliableToClasses.length === 1) appliableTo = d.appliableToClasses[0].substring(1);\r\n        else if (d.appliableToClasses.length === 0) appliableTo = d.appliableTo;\r\n        else appliableTo = \"Any\";\r\n        appliableTo = U.replaceAll(appliableTo, \"Void\", \"\");\r\n        let parr = Object.keys(childrens);\r\n        let scoreBoost = metadata?.scoreBoost || 0;\r\n        let l: LViewElement = LPointerTargetable.fromD(d);\r\n\r\n        const preventClick = (e: any)=>e.stopPropagation();\r\n        let isVP = d.className === DViewPoint.cname;\r\n        let isDefault = d.id.indexOf('Pointer_View') === 0;\r\n\r\n        function select(ptr: Pointer<DViewPoint>){ project.activeViewpoint = ptr as any; }\r\n\r\n        let appliableToEnhanced = (d.name === 'Singleton' ? 'Singleton' : appliableTo);\r\n\r\n        const max_priority = l.explicitApplicationPriority\r\n\r\n        return <li className={\"entry-root \" + d.className + (d.id === activeViewpointId ? ' selected' : '')} key={d.id}>\r\n\r\n            <div className={'inline-row'} onClick={()=>setView(d.id)} onDoubleClick={(e) => {select(d.id)}}> {/* activate anche con il dblclick */}\r\n\r\n                <div className={\"left-stuff vertical-centering \"} onClick={preventClick}>\r\n                    {parr.length >= 1 ?\r\n                        <>\r\n                            <i style={{fontSize: '0.55em', marginRight: '24px!important'}} className={'bi cursor-pointer d-block my-auto bi-chevron-' + (isExpanded ? 'down' : 'right')} onClick={expandClick} />\r\n                            {isExpanded && <div className={\"expansion-line\"} />}\r\n                        </>\r\n                        :\r\n                        <></>\r\n                    }\r\n                </div>\r\n                <div className={\"mid-stuff vertical-centering\"} style={{marginLeft: '8px'}}>\r\n                    <div className={`icon type tree-${appliableToEnhanced} ${d.className}`} style={{width: '24px', height: '24px'}}>{\r\n                        isVP ? 'VP' : (appliableToEnhanced === \"Any\" ? \"✲\" : appliableToEnhanced === 'Singleton' ? 'S' : appliableToEnhanced[0])\r\n                    }</div>\r\n                    <div style={{marginLeft: '4px'}}>{d.name}</div>\r\n                </div>\r\n                <div className={\"hover-stuff vertical-centering d-flex \"}>\r\n                    <div className={\"ms-auto d-flex\"} onClick={preventClick}>\r\n                        {isVP &&\r\n                            <CommandBar style={{transition: '1s 0.3s', marginTop: '2px'}}>\r\n                                <Btn icon={'check'} action={(evt) => {select(d.id)}} tip={'Activate'}/>\r\n                            </CommandBar>\r\n\r\n                            /* <button className=\"bg btn-delete my-auto ms-2 green\" disabled={active.id === d.id}\r\n                                onClick={(evt) => {select(d.id)}}>\r\n                                <i className='bi bi-check2' />\r\n                            </button>*/\r\n                        }\r\n\r\n\r\n                        <CommandBar style={{transition: '1s 0.3s', marginTop: '2px'}}>\r\n                            <Btn icon={'delete'} action={(e)=> { l.delete(); preventClick(e);}} tip={'Delete'}/> {/* todo per damiano, la cancellazione non funziona - visto con giordano, l'elemento non è correttamente eliminato, rimane quale dipendenza appesa (\"cannot read properties of undefined\")*/}\r\n                            <Btn icon={'copy'} action={(e)=> { l.duplicate(); preventClick(e);}} tip={'Duplicate'}/>\r\n                        </CommandBar>\r\n\r\n                        {/* <button className=\"bg btn-delete my-auto ms-2 green\" onClick={(e)=> { l.duplicate(); preventClick(e);}}><i className='bx bx-duplicate' /></button>\r\n                        <button className=\"bg btn-delete my-auto ms-2\" onClick={(e)=> { l.delete(); preventClick(e);}}><i className=\"p-1 bi bi-dash\" /></button>*/}\r\n                    </div>\r\n                </div>\r\n                <div className={\"right-stuff vertical-centering\"}>\r\n                    <div className={\"right-content\"} onClick={preventClick} >\r\n                        {\r\n                            isVP ? <>\r\n                                <div className={\"spacer\"}/>\r\n                            </> : <>{ props.isAdvanced && <>\r\n                                <span className={\"priority\"}>priority: {l.explicitApplicationPriority} </span><i style={{paddingTop: '4px'}} className=\"bi bi-x\"></i>\r\n                                <div className={\"spacer\"}/>\r\n                                <Input type=\"number\"\r\n                                       className={\"change-boost hidden-input priority-booster\"}\r\n                                       inputClassName={\"change-boost hidden-input\"}\r\n                                       readonly={false}\r\n                                       data={l}\r\n                                       getter={()=>scoreBoost + ''}\r\n                                       setter={(v)=>{l.subViews = {...childrens, [d.id]: +v} as any}}\r\n                                />\r\n                            </>}\r\n                                <span className={\"right-icon feature-border ocl-icon vertical-centering \" + (d.oclCondition.length ? \"\" : \"hidden\")}></span>\r\n                                <span className={\"right-icon feature-border js-icon vertical-centering \" + (d.jsCondition.length ? \"\" : \"hidden\")}></span>\r\n                            </>\r\n                        }\r\n                        <Tooltip tooltip={<div>is {d.isExclusiveView ? \"\" : \"not\"} mutually exclusive with other \"Ex\" views.</div>} position={\"bottom\"} inline={true}>\r\n                            <span className={\"right-icon feature-border ex-icon vertical-centering \" + (d.isExclusiveView ? '' : \"hidden\")}\r\n                                  onClick={()=>l.isExclusiveView = !d.isExclusiveView}\r\n                            /></Tooltip>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ul>{isExpanded && parr.map( (ptr, i) => (\r\n                <GenericTree key={ptr}\r\n                             data={DPointerTargetable.from(ptr)}\r\n                             getSubElements={getSubElements}\r\n                             renderEntry={renderEntry}\r\n                             depth={depth + 1} path={[...path, i]}\r\n                             metadata={{setView:metadata.setView, scoreBoost:childrens[ptr]} as Metadata}\r\n                             initialHidingState={depth < 100}\r\n                    // metadata={{...metadata, depth: metadata.depth + 1, path:[...metadata.path, i], scoreBoost: }}\r\n                />))}</ul>\r\n        </li>;\r\n    }\r\n\r\n    let test = windoww;\r\n\r\n    let [view, setView] = useStateIfMounted(undefined as (undefined | Pointer<DViewElement>));\r\n    let vieweditor = view && <div className={\"single-view-content\"}><ViewData key={view} viewid={view} viewpoints={viewpoints.map(v=>v.id)} setSelectedView={setView} /></div>;\r\n    if (test) return(<div className={\"view-editor-root\"}>\r\n        <section className={'viewpoint-tab'}>\r\n            <div className={\"view-editor-fullsize-content\"}>\r\n                <div className={'d-flexd-flex'}>\r\n                    <h1>Viewpoints\r\n\r\n\r\n                        <CommandBar style={{float: 'right'}}>\r\n                            <Btn icon={'shrink'} active={collapseAll}         action={() => {setCollapseAll(true)}}  tip={'Collapse all'} />\r\n                            <Btn icon={'expand'} active={collapseAll===false} action={() => {setCollapseAll(false)}} tip={'Expand all'}   />\r\n                            <Sep />\r\n                            <Btn icon={'add'} action={addVP} tip={'Create a new viewpoint'} />\r\n                        </CommandBar>\r\n\r\n                    </h1>\r\n                </div>\r\n                {vieweditor}\r\n                <ul className={\"ps-2 pt-2\"}>\r\n                    {viewpoints.map(vp=><GenericTree\r\n                        data={vp.__raw}\r\n                        getSubElements={getSubElements}\r\n                        renderEntry={renderEntry}\r\n                        metadata={{setView, scoreBoost:0}}\r\n                        initialHidingState={vp.id === activeViewpointId} />)}\r\n                </ul>\r\n            </div>\r\n        </section>\r\n    </div>);\r\n\r\n    let hoverID: any = '';\r\n    function setHoverID(a:any){}\r\n    function selectt(a: any){}\r\n    let validation: false;// props.validation\r\n    return (<div>\r\n        {viewpoints.map((viewpoint, index) => {\r\n\r\n            return (\r\n                <div key={index}\r\n                     className={'d-flex p-1 mt-1 border round mx-1 viewpoint'}\r\n                     onMouseEnter={(e) => setHoverID(viewpoint.id)}\r\n                     onMouseLeave={(e) => setHoverID('')}\r\n                     style={{backgroundColor: (active.id === viewpoint.id) ? 'white' :\r\n                             (hoverID === viewpoint.id ? '#E0E0E0' : 'transparent')}}>\r\n                    <input\r\n                        className={'p-0 input hidden-input'}\r\n                        value={viewpoint.name} type={'text'}\r\n                        onChange={(evt) => {editName(evt, viewpoint)}}\r\n                        disabled={index <= 0}\r\n                    />\r\n                    <Input\r\n                        className={\"ms-auto\"}\r\n                        data={viewpoint}\r\n                        field={\"isExclusiveView\"}\r\n                        type={\"checkbox\"}\r\n                        label={\"Is exclusive\"}\r\n                        readonly={validation || index <= 0}\r\n                    />\r\n                    {<button className={'btn btn-success ms-1'} disabled={active.id === viewpoint.id}\r\n                                                      onClick={(evt) => {selectt(viewpoint.id)}}>\r\n                        <i className={'p-1 bi bi-check2'}/>\r\n                    </button>\r\n                    }\r\n                    <button\r\n                        className={'btn btn-success ms-1'}\r\n                        onClick={(evt) => {clone(viewpoint)}}>\r\n                        <i className={'p-1 bi bi-clipboard2-fill'}></i>\r\n                    </button>\r\n                    <button\r\n                        className={'btn btn-danger ms-1'}\r\n                        disabled={index <= 0 || active.id === viewpoint.id}\r\n                        onClick={(e) => deleteV(e, viewpoint)}>\r\n                        <i className={'p-1 bi bi-trash3-fill'}></i>\r\n                    </button>\r\n                </div>\r\n            )\r\n        })}\r\n        <label className={'p-1'}>\r\n            *To apply a custom viewpoint, first activate the default one, and then proceed to activate the custom one.\r\n        </label>\r\n    </div>);\r\n}\r\ninterface OwnProps {\r\n}\r\ninterface StateProps {\r\n    project: LProject;\r\n    viewpoints: LViewPoint[];\r\n    active: LViewPoint;\r\n    isAdvanced: boolean;\r\n}\r\ninterface DispatchProps { }\r\ntype AllProps = OwnProps & StateProps & DispatchProps;\r\n\r\n\r\nfunction mapStateToProps(state: DState, ownProps: OwnProps): StateProps {\r\n    const ret: StateProps = {} as FakeStateProps;\r\n    const user: LUser = LUser.fromPointer(DUser.current, state);\r\n    ret.project = user.project as LProject;\r\n    ret.viewpoints = ret.project.viewpoints.filter( (vp) => !!vp/* && vp.isValidation === ownProps.validation*/);\r\n    ret.active = ret.project.activeViewpoint;\r\n    ret.isAdvanced = state.advanced;\r\n    return ret;\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch<any>): DispatchProps {\r\n    const ret: DispatchProps = {};\r\n    return ret;\r\n}\r\n\r\n\r\nexport const NestedViewConnected = connect<StateProps, DispatchProps, OwnProps, DState>(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NestedViewComponent);\r\n\r\nexport const NestedView = (props: OwnProps, children: (string | React.Component)[] = []): ReactElement => {\r\n    return <NestedViewConnected {...{...props, children}} />;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}