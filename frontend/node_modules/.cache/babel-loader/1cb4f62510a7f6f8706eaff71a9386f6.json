{"ast":null,"code":"import _defineProperty from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _construct from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct\";import _objectSpread from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var _dec,_class,_dec2,_class3,_class4,_dec3,_class5,_dec4,_class6,_class7;// import * as detectzoooom from 'detect-zoom'; alternative: https://www.npmjs.com/package/zoom-level\n// import {Mixin} from \"ts-mixer\";\nimport{JsType,LModelElement,LNamedElement,MyError,RuntimeAccessible,store,windoww}from\"../joiner\";import Swal from\"sweetalert2\";import Storage from'../data/storage';import{compressToUTF16,decompressFromUTF16}from\"async-lz-string\";import util from\"util\";import Convert from\"ansi-to-html\";// var Convert = require('ansi-to-html');\n// import KeyDownEvent = JQuery.KeyDownEvent; // https://github.com/tombigel/detect-zoom broken 2013? but works\nconsole.warn('loading ts U log');export var Color=(_dec=RuntimeAccessible('Color'),_dec(_class=/*#__PURE__*/function(){function Color(r,g,b){_classCallCheck(this,Color);this.r=void 0;this.g=void 0;this.b=void 0;this.r=r;this.g=g;this.b=b;}_createClass(Color,[{key:\"getHex\",value:function getHex(){return undefined;}},{key:\"mixWith\",value:function mixWith(c){}},{key:\"getHLS\",value:function getHLS(){return undefined;}},{key:\"duplicate\",value:function duplicate(){return undefined;}}],[{key:\"fromHex\",value:function fromHex(hex){return undefined;}},{key:\"fromHLS\",value:function fromHLS(_ref){var h=_ref.h,l=_ref.l,s=_ref.s;return undefined;}}]);return Color;}())||_class);export var U=(_dec2=RuntimeAccessible('U'),_dec2(_class3=(_class4=/*#__PURE__*/function(){function U(){_classCallCheck(this,U);}_createClass(U,null,[{key:\"decompressState\",value:function(){var _decompressState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(state){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return decompressFromUTF16(state);case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));function decompressState(_x){return _decompressState.apply(this,arguments);}return decompressState;}()},{key:\"compressedState\",value:function(){var _compressedState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return compressToUTF16(JSON.stringify(store.getState()));case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}));function compressedState(){return _compressedState.apply(this,arguments);}return compressedState;}()},{key:\"isOffline\",value:function isOffline(){return Storage.read('offline')==='true';}},{key:\"refresh\",value:function refresh(){window.location.reload();}},{key:\"inspect\",value:function inspect(object,showHidden,depth,color){var _object;var o0=object;object=((_object=object)===null||_object===void 0?void 0:_object.__raw)||object;if(Array.isArray(object))object=object.map(function(o){return(o===null||o===void 0?void 0:o.__raw)||o;});// todo: use lodash \"clonedeepwith\" to clean proxies\nconsole.error(\"inspect\",{o0:o0,object:object});return util.inspect(object,showHidden,depth,color);}},{key:\"objectInspect\",value:function objectInspect(val){var depth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var color=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var showHidden=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var ansiConvert=window.ansiConvert;if(!ansiConvert)window.ansiconvert=ansiConvert=new Convert();return U.replaceAll(ansiConvert.toHtml(U.inspect(val,showHidden,depth,color)),\"style=\\\"color:#FFF\\\"\",\"style=\\\"color:#000\\\"\");}},{key:\"cropStr\",value:function cropStr(msg){var atStart=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var atEnd=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var arr=msg.split('\\n');if(atEnd+atStart<arr.length){//arr = arr.slice(0, 10) + arr.slice(10, 0);\narr.splice(atStart,arr.length-atStart-atEnd,'...');}return arr.join('\\n');}},{key:\"extractByKey\",value:function extractByKey(dict,path){var keys=path.split('.');var topic=keys[0];var data=dict[topic];var values=[];if(!Array.isArray(data))return undefined;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var d=_step.value;var _value=d;var _iterator2=_createForOfIteratorHelper(keys),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var k=_step2.value;if(_value.hasOwnProperty(k))_value=_value[k];}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}values.push(_value);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return values;}},{key:\"extractKeys\",value:function extractKeys(dict){var keys=[];function traverse(obj,path){for(var _key in obj){if(typeof obj[_key]==='object')traverse(obj[_key],path?\"\".concat(path,\".\").concat(_key):_key);else keys.push(path?\"\".concat(path,\".\").concat(_key):_key);}}for(var _key2 in dict){traverse(dict[_key2][0],_key2);}return keys;}// damiano: eseguire una funzione costa in performance, anche se è brutto fare questi cast\n},{key:\"wrapper\",value:function wrapper(obj){return obj;}// damiano: mi sa che c'era un metodo l.__serialize or something\n},{key:\"json\",value:function json(dElement){return JSON.parse(JSON.stringify(dElement.__raw));}},{key:\"hexToPalette\",value:function hexToPalette(){for(var _len=arguments.length,hexs=new Array(_len),_key3=0;_key3<_len;_key3++){hexs[_key3]=arguments[_key3];}return{type:\"color\",value:hexs.map(function(hex){if(hex[0]==='#')hex=hex.substring(1);var r,g,b,a=1;if(hex.length===4){a=Number.parseInt('0x'+hex[3]+hex[3])/255;hex=hex.substring(0,3);}if(hex.length===7){a=Number.parseInt('0x'+hex[5]+hex[6])/255;hex=hex.substring(0,6);}Log.exDev(hex.length!==3&&hex.length!==6,\"invalid hex length\",{hex:hex,a:a});var i=0;if(hex.length===3){r=Number.parseInt('0x'+hex[i]+hex[i++]);g=Number.parseInt('0x'+hex[i]+hex[i++]);b=Number.parseInt('0x'+hex[i]+hex[i]);}else{r=Number.parseInt('0x'+hex[i++]+hex[i++]);g=Number.parseInt('0x'+hex[i++]+hex[i++]);b=Number.parseInt('0x'+hex[i++]+hex[i]);}return{r:r,g:g,b:b,a:a};})};}},{key:\"fatherChain\",value:function fatherChain(me){if(!me)return[];// without this line go through delete error\nvar fathers=[me.id];var toCheck=[me];while(toCheck.length>0){var element=toCheck.pop();if(element&&element.father){fathers.push(element.father.id);toCheck.push(element.father);}}return fathers;}/// maxDepth = 2 is the minimum to check the content of objects inside usageDeclarations or node state. like node.errors.naming\n},{key:\"isShallowEqualWithProxies\",value:function isShallowEqualWithProxies(obj1,obj2){var skipKeys=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var out=arguments.length>3?arguments[3]:undefined;var depth=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var maxDepth=arguments.length>5&&arguments[5]!==undefined?arguments[5]:2;var returnIfMaxDepth=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;var tobj1=obj1===null?'null':typeof obj1;var tobj2=obj2===null?'null':typeof obj2;if(obj1===obj2){// if (out) { out.reason = \"identical objects\"; }\nreturn true;}if(tobj1!==tobj2){if(out){out.reason=\"type changed: \"+tobj1+\" --> \"+tobj2;}return false;}// at this point: same type, but different values\nswitch(tobj1){default:// primitive with different values\nconsole.error(\"unexpected case in isshallowequal:\",{tobj1:tobj1,obj1:obj1,obj2:obj2});if(out){if(undefined===tobj1)out.reason='primitive value newly introduced';else if(undefined===tobj2)out.reason='primitive value got deleted';else out.reason='primitive value changedd';}return false;case'string':case'boolean':// primitive with different values\nif(out){if(undefined===tobj1)out.reason='primitive value newly introduced';else if(undefined===tobj2)out.reason='primitive value got deleted';else out.reason='primitive value changedd';}return false;case\"number\":// if both re nan it fails\n// NB: infinities are not nan, and they compare with === like normal numbers. weird js...\nif(isNaN(obj1)&&isNaN(obj2))return true;if(out)out.reason='number changed';return false;case\"function\":if(obj1.toString()===obj2.toString())break;if(out)out.reason='function body changed';return false;case\"object\":var o1Raw=obj1.__raw;var o2Raw=obj2.__raw;if(o1Raw){if(!o2Raw){if(out)out.reason=o1Raw.className+'replaced by another object type:'+(o2Raw===null||o2Raw===void 0?void 0:o2Raw.className);return false;}obj1=o1Raw;obj2=o2Raw;}// for proxies and DObjects\nif(obj1.clonedCounter!==undefined&&obj2.clonedCounter!==obj1.clonedCounter){if(out)out.reason='clonedCounter difference '+obj1.clonedCounter+' != '+obj2.clonedCounter;return false;}/*\r\n                if (obj1.className !== obj2.className) {\r\n                 removed: too unlikely to happen that a DObject is raplaced in the same path with another type of DObject with same clonedCounter\r\n                 nd it's checked anyway in for(let key in obj1)\r\n                    if (out) out.reason = o1Raw.className + 'replaced by another object type:' + o2Raw?.className;\r\n                    return false;\r\n                }*/if(Array.isArray(obj1)){if(obj1.length!==obj2.length){if(out)out.reason='array length different: '+obj1.length+\" !== \"+obj2.length;return false;}if(!Array.isArray(obj2)){if(out)out.reason='array became an object';return false;}}if(depth>maxDepth){// to debug and see where is too deep, make returnIfMaxDepth = false, so the path is displayed in out.reason\nif(out)out.reason='max depth reached, assumed '+returnIfMaxDepth;return returnIfMaxDepth;}for(var _key4 in obj1){if(_key4 in skipKeys)continue;var oldp=obj2[_key4];var newp=obj1[_key4];if(oldp===newp)continue;if(!U.isShallowEqualWithProxies(newp,oldp,skipKeys,out,depth+1,maxDepth,returnIfMaxDepth)){if(out)out.reason='['+_key4+']'+out.reason;return false;}}// just check for keys that were in props and are not in nextProps\nfor(var _key5 in obj2){if(_key5 in skipKeys||_key5 in obj1)continue;if(out)out.reason=\"deleted subobject property: \"+_key5;return false;}// else retIfMaxDepthReached; split the above if\n}return true;}},{key:\"deepEqual\",value:function deepEqual(x,y){var tx=typeof x,ty=typeof y;return x&&y&&tx==='object'&&tx===ty?Object.keys(x).length===Object.keys(y).length&&Object.keys(x).every(function(key){return U.deepEqual(x[key],y[key]);}):x===y;}},{key:\"sleep\",value:function sleep(s){return new Promise(function(resolve){return setTimeout(resolve,s*1000);});}},{key:\"getRandomString\",value:function getRandomString(length){var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';var randomString='';var index=0;while(index<length){var randomNumber=Math.floor(Math.random()*characters.length);randomString+=characters.charAt(randomNumber);index+=1;}return randomString;}},{key:\"alert\",value:function alert(title,text){var color='text-';switch(title.toLowerCase()){case'error':color+='danger';break;default:color+='primary';}var html='<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>';html+=\"<div><b><label class='fs-5 mb-2 text-uppercase \".concat(color,\"'>\").concat(title,\"</label></b><hr/>\");html+=\"<label class='fs-6 mt-3'>\".concat(text,\"</label><br/>\");var result=Swal.fire({html:html,backdrop:false,showCloseButton:true,showConfirmButton:false//confirmButtonText: 'GOT IT'\n});}},{key:\"popup\",value:function popup(element){var html='<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>'+element;var result=Swal.fire({html:html,backdrop:false,showCloseButton:true,showConfirmButton:false//confirmButtonText: 'GOT IT'\n});}},{key:\"filteredPointedBy\",value:function filteredPointedBy(data,label){var models=[];var _iterator3=_createForOfIteratorHelper(data.pointedBy),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var dict=_step3.value;var pointedBy=dict.source.split('.');if(pointedBy.length===3&&pointedBy[2]===label){models.push(LModelElement.fromPointer(pointedBy[1]));}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return models;}},{key:\"getFatherFieldToDelete\",value:function getFatherFieldToDelete(data){var father=data.father;var field='';switch(father.className+'|'+data.className){// DPackage\ncase'DModel|DPackage':field='packages';break;case'DPackage|DPackage':field='subpackages';break;// DEnumerator and DClass\ncase'DPackage|DEnumerator':case'DPackage|DClass':field='classifiers';break;// DAttribute\ncase'DClass|DAttribute':field='attributes';break;// DReference\ncase'DClass|DReference':field='references';break;// DOperation\ncase'DClass|DOperation':field='operations';break;// DEnumLiteral\ncase'DEnumerator|DEnumLiteral':field='literals';break;// DObject\ncase'DModel|DObject':field='objects';break;// DParameter\ncase'DOperation|DParameter':field='parameters';break;// DValue\ncase'DObject|DValue':field='features';break;// Error\ndefault:return null;}return field;}},{key:\"initializeValue\",value:function initializeValue(typeclassifier){// if(!classifier) return 'null';\nvar pointer=typeof typeclassifier==='string'?typeclassifier:typeclassifier===null||typeclassifier===void 0?void 0:typeclassifier.id;var me=LNamedElement.fromPointer(pointer);switch(me===null||me===void 0?void 0:me.name){default:case'EString':return'';case'EChar':return'a';case'EInt':return'0';case'ELong':return'0';case'EShort':return'0';case'Byte':return'0';case'EFloat':return'0';case'EDouble':return'0';case'EBoolean':return'false';case'EDate':return new Date().toJSON().slice(0,10);}return'null';}},{key:\"orderChildrenByTimestamp\",value:function orderChildrenByTimestamp(context){var children=context.proxyObject.children;if(children&&children.length>0){var orderedChildren=new Map();var _iterator4=_createForOfIteratorHelper(children),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var child=_step4.value;var timestamp=child.id.slice(-13);orderedChildren.set(+timestamp,child);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}orderedChildren=new Map(_toConsumableArray(orderedChildren.entries()).sort());return _toConsumableArray(orderedChildren.values());}else return[];}},{key:\"followPath\",value:function followPath(base,path){var patharr=path.split('.');var base0=base;var ret={};ret.keys=patharr;ret.chain=[base];var lastObject=base;for(var i=0;i<patharr.length;i++){var _path=ret.lastkey=patharr[i];lastObject=base;base=base[_path];ret.chain.push(base);if(typeof base!==\"object\"||i+1===patharr.length){ret.failedRemainingPath=patharr.slice(i);ret.lastval=base;ret.lastObject=lastObject;return ret;}}throw new Error(\"followPath should never reach here\");return ret;}},{key:\"multiReplaceAllKV\",value:function multiReplaceAllKV(a){var kv=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var keys=[];var vals=[];var i;for(i=0;i<kv.length;i++){keys.push(kv[i][0]);vals.push(kv[i][0]);}return U.multiReplaceAll(a,keys,vals);}// if replacement is empty, it will be filled with '';\n// if replacement length < searchText, replacement will be filled with copies of his elements cycling from 0 to his length until his length matches searchText.length\n},{key:\"multiReplaceAll\",value:function multiReplaceAll(a){var searchText=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var replacement=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];// Log.ex(searchText.length !== replacement.length, 'search and replacement must be have same length: ' + searchText.length + \"vs\" + replacement.length + \" \" +JSON.stringify(searchText) + \"   \" + JSON.stringify(replacement));\nvar i=-1;while(replacement.length!==0&&replacement.length<searchText.length){replacement.push(replacement[++i]);}i=-1;while(++i<searchText.length){a=U.replaceAll(a,searchText[i],replacement[i]);}return a;}},{key:\"replaceAll\",value:function replaceAll(str,searchText,replacement){var debug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var warn=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;if(!str){return str;}return str.split(searchText).join(replacement||'');}},{key:\"toFileName\",value:function toFileName(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'nameless.txt';if(!a){a='nameless.txt';}a=U.multiReplaceAll(a.trim(),['\\\\','//',':','*','?','<','>','\"','|'],['[lslash]','[rslash]',';','°','_','{','}','\\'','!']);return a;}// warn: this check if the scope containing the function is strict, to check if a specific external scope-file is strict\n// you have to write inline the code:        var isStrict = true; eval(\"var isStrict = false\"); if (isStrict)...\n// @ts-ignore\n},{key:\"objectMergeInPlace\",value:// merge properties with first found first kept (first parameters have priority on override). only override null|undefined values, not (false|0|'') values\nfunction objectMergeInPlace(output){var out=output;for(var _len2=arguments.length,objarr=new Array(_len2>1?_len2-1:0),_key6=1;_key6<_len2;_key6++){objarr[_key6-1]=arguments[_key6];}if(objarr){var _iterator5=_createForOfIteratorHelper(objarr),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var o=_step5.value;if(o&&typeof o===\"object\")for(var _key7 in o){var _out$_key;// noinspection BadExpressionStatementJS,JSUnfilteredForInLoop\n(_out$_key=out[_key7])!==null&&_out$_key!==void 0?_out$_key:out[_key7]=o[_key7];}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}}},{key:\"log\",value:function log(obj){var label=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'###';console.clear();console.log(label,obj);}},{key:\"removeEmptyObjectKeys\",value:function removeEmptyObjectKeys(obj){for(var _i=0,_Object$keys=Object.keys(obj);_i<_Object$keys.length;_i++){var _key8=_Object$keys[_i];if(obj[_key8]===null||obj[_key8]===undefined)delete obj[_key8];}}// usage example: objectMergeInPlace_conditional(baseobj, (out, key, current) => !out[key] && current[key];\n// culprit of \"couldn't find intersection\" problem: condition type: (out:A&B, key: string | number, current:B, objarr?: B[], indexOfCurrent?: number) => boolean\n},{key:\"objectMergeInPlace_conditional\",value:function objectMergeInPlace_conditional(output,condition){var out=output;var i=0;for(var _len3=arguments.length,objarr=new Array(_len3>2?_len3-2:0),_key9=2;_key9<_len3;_key9++){objarr[_key9-2]=arguments[_key9];}for(var _i2=0,_objarr=objarr;_i2<_objarr.length;_i2++){var o=_objarr[_i2];for(var _key10 in o){if(condition(out,_key10,o,objarr,i++))out[_key10]=o[_key10];}}return out;}},{key:\"buildFunctionDocumentation\",value:function buildFunctionDocumentation(f){Log.e(!JsType.isFunction(f),'getFunctionSignature() parameter must be a function',f);// let parameters: {name: string, defaultVal: string, typedesc: string}[] = []; //{name: '', defaultVal: undefined, typedesc: ''};\nvar ret={parameters:[],returns:undefined,f:f,fname:undefined,isLambda:null,signature:''};var str=f.toString();var starti=str.indexOf('(');var endi;var parcounter=1;for(endi=starti+1;endi<str.length;endi++){if(str[endi]===')'&&--parcounter===0)break;if(str[endi]==='(')parcounter++;}var parameterStr=str.substring(starti+1,endi);// console.log('getfuncsignature starti:', starti, 'endi', endi, 'fname:', str.substr(0, starti), 'parameterStr:', parameterStr);\nret.fname=str.substr(0,starti).trim();ret.fname=ret.fname.substr(0,ret.fname.indexOf(' ')).trim();// 2 casi: anonimo \"function (par1...){}\" e \"() => {}\", oppure nominato: \"function a1(){}\"\nif(ret.fname===''||ret.fname==='function')ret.fname=undefined;// 'anonymous function';\nvar returnstarti=str.indexOf('/*',endi+1);var returnendi=-1;var bodystarti=str.indexOf('{',endi+1);if(returnstarti===-1||bodystarti!==-1&&bodystarti<returnstarti){// no return type or comment is past body\nret.returns=undefined;}else{returnendi=str.indexOf('*/',returnstarti+2);ret.returns=str.substring(returnstarti+2,returnendi).trim();bodystarti=str.indexOf('{',returnendi);}if(ret.returns==='')ret.returns=undefined;// is lambda if do not have curly body or contains => between return comment and body\n// console.log('isLambda:', bodystarti, str.substring(Math.max(endi, returnendi)+1, bodystarti));\nret.isLambda=bodystarti===-1||str.substring(window.Math.max(endi,returnendi)+1,bodystarti).trim()==='=>';var regexp=/([^=\\/\\,]+)(=?)([^,]*?)(\\/\\*[^,]*?\\*\\/)?,/g;// only problem: the last parameter won't match because it does not end with \",\", so i will append it everytime.\nvar match;while(match=regexp.exec(parameterStr+',')){// match[0] is always the full match (not a capture group)\n// match[2] can only be \"=\" or empty string\n// nb: match[4] can be \"/*something*/\" or \",\" a single , without spaces.\nvar par={name:match[1],defaultVal:match[3],typedesc:match[4]&&match[4].length>1?match[4]:null};par.name=par.name.trim();par.defaultVal=par.defaultVal?par.defaultVal.trim():undefined;par.typedesc=par.typedesc&&par.typedesc&&par.typedesc.length>1?par.typedesc.substring(2,par.typedesc.length-2).trim()||null:null;ret.parameters.push(par);}// set signature\nret.signature=''+(ret.fname?'/*'+ret.fname+'*/':'')+'(';var i;for(i=0;i<ret.parameters.length;i++){var _par=ret.parameters[i];ret.signature+=(i===0?'':', ')+_par.name+(_par.typedesc?'/*'+_par.typedesc+'*/':'')+(_par.defaultVal?' = '+_par.defaultVal:'');}ret.signature+=')'+(ret.returns?'/*'+ret.returns+'*/':'');return ret;}// NB: need to use result.apply(context) to have a usable \"this\"\n// if you want to pass a parameter to the function, pass it through scope insteand !! AND UNDECLARE the parameter in function string signature !!\n//if inner funcstr have parameters, need to declare them as codestrParamNames arr, and pass them in that order, after the scope which is fixed as first argument.\n// rest values are declared with ellipsis in codestrParamNames\n// !!! scope passed here, is only used for keys. values are not bound. scope is set as first parameter when you call the function.\n// context is bound, but can be re-assigned by calling .bind(), .call() or .apply(), so neither context nor scope assigned in parsing phase are final.\n// innerfunc params do not have to match the name on the string function, but only the correct amount. they can have any name i think, but i list them correctly to documentate.\n},{key:\"parseFunctionWithContextAndScope\",value:function parseFunctionWithContextAndScope(codeStr0,context0,scope0,codestrParamNames){var protectShallowValues=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var doIdentifierValidation=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(!codestrParamNames)codestrParamNames=[];var codeStr=typeof codeStr0===\"function\"?codeStr0.toString():codeStr0;var scopeParams='';var scope;var context;if(protectShallowValues){if(scope0){//scope = {...scope0}; scope.__proto__ = scope0.__proto__; // for...in gets values in __proto__ too, {...o} instead gets only hasOwnProperty copied\nscope={};for(var k in scope0){scope[k]=scope0[k];}}else scope=undefined;if(context0){// context = {...context0}; context.__proto__ = context0.__proto__;\ncontext={};for(var _k in context0){context[_k]=context0[_k];}}else context=undefined;}else{scope=scope0;context=context0;}if(scope){var scopekeys=Object.keys(scope);if(doIdentifierValidation)scopekeys.map(function(key){var _key11;key=((_key11=key)===null||_key11===void 0?void 0:_key11.trim())||'';if(!key||!U.validIdentfierRegexp.test(key))return undefined;return key;}).filter(function(k){return!!k;});scopeParams='{'+scopekeys.join(',')+'}';}var innerFuncParams=codestrParamNames.join(',');var _jevalfunc=undefined;// is set by eval\nvar evalmode=false;console.log('parseFunctionWithContextAndScope',{codeStr:codeStr,scope:scope,context:context,params:{scopeParams:scopeParams,innerFuncParams:innerFuncParams}});scopeParams=scopeParams&&innerFuncParams?scopeParams+','+innerFuncParams:scopeParams+innerFuncParams;if(evalmode){codeStr=\"_jevalfunc = function (\"+scopeParams+\") { return (\"+codeStr+\")(\"+innerFuncParams+\") }\";eval(codeStr);}else{_jevalfunc=new Function(scopeParams,\" return (\"+codeStr+\")(\"+innerFuncParams+\")\");}console.log('parseFunctionWithContextAndScope',{_jevalfunc:_jevalfunc,params:{scopeParams:scopeParams}});if(context)return _jevalfunc.bind(context);else return _jevalfunc;}/*\r\n    public static evalInContextAndScope<T = any>(...a:any):any {return undefined}\r\n    public static evalInContextAndScopeNew<T = any>(...a:any):any {return undefined}*/},{key:\"evalInContextAndScopeNew\",value:function evalInContextAndScopeNew(codeStr,context0,injectScopeToo,protectShallowValues,doIdentifierValidation){return U.evalInContextAndScope(codeStr,context0,injectScopeToo?context0:undefined,protectShallowValues,doIdentifierValidation);}// important! this is a simplified version. the correct one allows unicode chars and is 11kb long of regex expression\n},{key:\"evalInContextAndScope\",value:// warn: if return is not explicitly inserted (if that's the case set imlicitReturn = false) with a scope and the code have multiple statemepts it will fail.\n// can modify scope AND context\n// warn: can access global scope (window)\n// if the context (this) is missing it will take the scope as context.\n// warn: cannot set different scope and context, \"this\" della funzione sovrascrive anche il \"this\" interno allo scope come chiave dell'oggetto\n// warn: !context && scope is impossible, so it gets autofixed by assigning context = scope; check Log messages inside function for details.\n// warn: context && scope is impossible if context !== scope and cannot be hotfixed, that will cause a crash.\nfunction evalInContextAndScope(codeStr,scope0,context0,protectShallowValues,doIdentifierValidation){// console.log('evalInContextAndScope', {codeStr, scope, context});\n// scope per accedere a variabili direttamente \"x + y\"\n// context per accedervi tramite this, possono essere impostati come diversi.\nif(!scope0&&!context0){Log.ex(true,'evalInContextAndScope: must specify at least one of scope || context',{codeStr:codeStr,scope0:scope0,context0:context0});}// scope.this = scope.this || context || scope; non funziona\n// console.log('\"with(this){ return eval( \\'\" + codeStr + \"\\' ); }\"', \"with(this){ return eval( '\" + codeStr + \"' ); }\");\n// eslint-disable-next-line no-restricted-syntax,no-with\n// if (allowScope && allowContext) { return function(){ with(this){ return eval( '\" + codeStr + \"' ); }}.call(scopeAndContext); }\n// if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr + \"' ); }\").call(scopeAndContext); }\nvar _ret=null;var scope;var context;if(protectShallowValues){if(scope0){scope=_objectSpread(_objectSpread({},scope0),{},{__proto__:scope0.__proto__});scope.__proto__=scope0.__proto__;}else scope=undefined;if(context0){context=_objectSpread(_objectSpread({},context0),{},{__proto__:context0.__proto__});context.__proto__=context0.__proto__;}else context=undefined;}else{scope=scope0;context=context0;}Log.w(!!(!context&&scope),\"evalInContextAndScope() Context is mandatory, as scope && !context case is not working properly \\n\"+\"because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\\n\"+\"Autofixed by assigning context = scope;\");Log.eDev(!!(context&&scope&&context!==scope),\"evalInContextAndScope() Context and scope cannot be different if both present.\\n\"+\"Because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\");if(!context)context=scope;// se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\n/*\r\n        if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr.replace(/'/g, \"\\\\'\") + \"' ); }\").call(scopeAndContext); }\r\n        if (!allowScope && allowContext) { return new Function( \"return eval( '\" + codeStr + \"' );\").call(scopeAndContext); }\r\n        if (allowScope && !allowContext) { return eval(\"with(scopeAndContext){ \" + codeStr + \" }\"); }*/ //      U.pe(!!scope && U.isStrict(), 'cannot change scope while in strict mode (\"use strict\")');\nvar prefixDeclarations=\"\",postfixDeclarations='';if(scope){if(U.isStrict){for(var _key12 in scope){if(doIdentifierValidation){_key12=_key12.trim();if(!_key12||!U.validIdentfierRegexp.test(_key12))continue;}// anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\nprefixDeclarations+=\"const \"+_key12+\"=this.\"+_key12+\";\";postfixDeclarations=\"\";}}else{prefixDeclarations=\"with(\"+(context?\"this._eval.\":\"\")+\"scope){ \";postfixDeclarations=\" }\";}}if(scope&&context){if(typeof codeStr===\"function\"){codeStr=codeStr.toString();}// functions cannot change scope (with statement is deprecated)\ncontext._eval={__codeStr:codeStr};// necessary to reach this._eval.codeStr inside the eval()\n// console.log(\"evalincontextandscope: \", {fullCodeStr: prefixDeclarations + \"return eval( this._eval._codeStr );\" + postfixDeclarations, codeStr});\n_ret=new Function(prefixDeclarations+\"; return eval( this._eval.__codeStr );\"+postfixDeclarations).call(context);delete context._eval;}else if(!scope&&context){if(typeof codeStr===\"function\"){_ret=function _ret(){var _ref2;for(var _len4=arguments.length,a=new Array(_len4),_key13=0;_key13<_len4;_key13++){a[_key13]=arguments[_key13];}return(_ref2=codeStr).call.apply(_ref2,[context].concat(a));};// _ret = (...a: any)=>codeStr.call(context, ...a);\n}else{// cannot just eval(codeStr).call(context) because the result might not be a function but only a piece of code or an expression\ncontext._eval={__codeStr:codeStr};// necessary to reach this._eval.codeStr inside the eval()\n_ret=new Function(\"return eval( this._eval.__codeStr );\").call(context);delete context._eval;// this below  is not good, as i need to quote the expanded result of codeStr,\n// but since it might contain quotes as well i would need to escape them too.\n// _ret = new (Function as any)(\"return eval( \" + codeStr + \" );\").call(context);\n}}else if(scope&&!context){// NB: potrei creare lo scope con \"let key = value;\" per ogni chiave, ma dovrei fare json stringify e non è una serializzazione perfetta e può dare eccezioni(circolarità)\n// console.log({isStrict: U.isStrict, eval: \"eval(\" + prefixDeclarations + codeStr + postfixDeclarations + \")\"});\nif(typeof codeStr===\"function\"){codeStr=codeStr.toString();}// functions cannot change scope (with statement is deprecated)\n_ret=eval(prefixDeclarations+codeStr+postfixDeclarations);}return _ret;}//T extends ( ((...args: any[]) => any) | (() => any)\n},{key:\"execInContextAndScope\",value:function execInContextAndScope(func,parameters,scope,context){Log.l(false,'execInCtxScope',{func:func,parameters:parameters,scope:scope,context:context});var ret;var _eval={context:context,scope:scope,func:func,parameters:parameters||[]};var prefixDeclarations=\"\",postfixDeclarations='';if(scope){if(U.isStrict){for(var _key14 in scope){// anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\nprefixDeclarations+=\"const \"+_key14+\" = this.\"+_key14+\"; \";postfixDeclarations=\"\";}}else{prefixDeclarations=\"with(\"+(context?\"this._eval.\":\"\")+\"scope){ \";postfixDeclarations=\" }\";}}if(!scope&&!context){Log.ex(true,'execInContextAndScope: must specify at least one of scope || context',{func:func,scope:scope,context:context});}if(!context)context=scope;// se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\nif(scope&&context){context._eval=_eval;// will the scope work with \"with\" outside the function body?\nret=new Function(prefixDeclarations+\"return this._eval.func.apply(this._eval.context, this._eval.parameters);\"+postfixDeclarations).call(context);delete context._eval;}if(!scope&&context){return _eval.func.apply(_eval.context,_eval.parameters);}if(scope&&!context){// todo: non credo funzioni, _eval non dovrebbe essere accessibile dopo la \"with\" forse devo fare scope._eval = _eval;\nreturn eval(prefixDeclarations+\"return _eval.func(..._eval.parameters);\"+postfixDeclarations);}return ret;}// warn: aggiunge un layer di scope ma ha accesso anche agli scope precedenti (del chiamante della funzione e superiori)\n// warn2: può modificare lo scope internamente all'eval ma ogni cambiamento è perso all'uscita dell'esecuzione (modifica copie)\n// warn3: gli oggetti nested variabili dentro oggetti dello scope) sono modificabili con modifiche persistenti perchè vengono pasate per puntatore.\n// warn4: richiede un return per leggere il valore\n// insomma: sta funzione fa schifo ma non c'è di meglio e non puoi nè permettere nè vietare completamente le modifiche allo scope.\n},{key:\"execInScope_DO_NOT_USE\",value:function execInScope_DO_NOT_USE(codeStr,scope){return _construct(Function,_toConsumableArray(Object.keys(scope)).concat([codeStr])).apply(void 0,_toConsumableArray(Object.values(scope)));}// can modify context in-place, requires \"this\" before variable\n},{key:\"evalInContext\",value:function evalInContext(js,context){//# Return the results of the in-line anonymous function we .call with the passed context\nreturn function(){return eval(js);}.call(context);}/*\r\n    / *\r\n    // NO: ha 2 problemi: il contesto non è persistente e puoi accedere al contesto solo con \"this\" ma non direttamente usando i nomi delle variabili\r\n    public static evalInContext(contextObj: GObject, code: string): any{\r\n        return U.evalContextFunction.call(contextObj || {}, code);\r\n    }\r\n\r\n    // only create a context for \"this\", wich is bound by .call(), should never be called without .call()\r\n    private static evalContextFunction(code: string): any { eval(code); }\r\n*/},{key:\"highOrderFunctionExampleTyped\",value:function highOrderFunctionExampleTyped(func){var funcName=func.cname||func.name;// Return a new function that tracks how long the original took\nreturn function(){console.time(funcName);var results=func.apply(void 0,arguments);console.timeEnd(funcName);return results;};}},{key:\"asClass\",value:function asClass(obj,classe){var elseReturn=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return obj instanceof classe?obj:elseReturn;}},{key:\"asString\",value:function asString(propKey){var elseReturn=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return typeof propKey==='string'?propKey:elseReturn;}},{key:\"isString\",value:function isString(propKey){return typeof propKey==='string';}},{key:\"loadScript\",value:function loadScript(path){var useEval=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var script=document.createElement('script');script.src=path;script.type='text/javascript';Log.eDev(useEval,'loadScript','useEval','useEval todo. potrebbe essere utile per avviare codice fuori dalle funzioni in futuro.');document.body.append(script);}},{key:\"ancestorArray\",value:function ancestorArray(domelem,stopNode){var includeSelf=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;// [0]=element, [1]=father, [2]=grandfather... [n]=document\nif(domelem===null||domelem===undefined){return[];}var arr=includeSelf?[domelem]:[];var tmp=domelem.parentNode;while(tmp!==null&&tmp!==stopNode){arr.push(tmp);tmp=tmp.parentNode;}return arr;}},{key:\"toHtml\",value:function toHtml(html,container){var containerTag=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'div';if(!container){container=document.createElement(containerTag);}Log.e(!html||html==='','toHtml','require a non-empty string',html);container.innerHTML=html;var ret=container.firstChild;if(ret)container.removeChild(ret);return ret;}},{key:\"levenshtein\",value:function levenshtein(a,b){if(!a.length)return b.length;if(!b.length)return a.length;var cost=a.charAt(a.length-1)===b.charAt(b.length-1)?0:1;return window.Math.min(U.levenshtein(a.substring(0,a.length-1),b)+1,U.levenshtein(a,b.substring(0,b.length-1))+1,U.levenshtein(a.substring(0,a.length-1),b.substring(0,b.length-1))+cost);}},{key:\"getClosestPropertyName\",value:function getClosestPropertyName(names,name){var lowest=Infinity;return names.reduce(function(previous,current){var distance=U.levenshtein(current,name);if(distance<lowest){lowest=distance;return current;}return previous;},'');}},{key:\"getClosestPropertyNames\",value:function getClosestPropertyNames(names,name){var distances=names.map(function(value){return{distance:U.levenshtein(value,name),value:value};});return distances.sort(function(a,b){return a.distance-b.distance;}).map(function(e){return e.value;});}//todo for console\n},{key:\"autoCorrectProxy\",value:function autoCorrectProxy(target,recursive,logger){return new Proxy(target,{get:function get(target,name){var namestr=U.asString(name,null);if(!namestr)return undefined;if(name in target)return target[namestr];var suggestions=U.getClosestPropertyNames(Object.getOwnPropertyNames(target),namestr);logger.warn(\"\".concat(namestr,\" is not defined, did you meant \").concat(suggestions[0],\"?\\t\\nother suggestions:\"),suggestions);return namestr&&target[suggestions[0]];}});}},{key:\"arrayRemoveAll\",value:function arrayRemoveAll(arr,elem){var debug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var index;if(!arr)return;while(true){index=arr.indexOf(elem);Log.l(debug,'ArrayRemoveAll: index: ',index,'; arr:',arr,'; elem:',elem);if(index===-1){return;}arr.splice(index,1);Log.l(debug,'ArrayRemoveAll RemovedOne:',arr);}}},{key:\"arrayUnique\",value:function arrayUnique(arr){return _toConsumableArray(new Set(arr));}},{key:\"fileReadContent\",value:function fileReadContent(file,callback){var textType=/text.*/;try{if(!file.type||file.type.match(textType)){var reader=new FileReader();reader.onload=function(e){callback(''+reader.result);};reader.readAsText(file);return;}}catch(e){Log.e(true,\"Exception while trying to read file as text. Error: |\",e,\"|\",file);}Log.e(true,\"Wrong file type found: |\",file?file.type:null,\"|\",file);}},{key:\"fileRead\",value:function fileRead(onChange,extensions,readContent){// $(document).on('change', (e) => console.log(e));\nconsole.log(\"importEcore: pre file reader\");myFileReader.show(onChange,extensions,readContent);}},{key:\"clear\",value:function clear(htmlNode){if(htmlNode)while(htmlNode.firstChild){htmlNode.removeChild(htmlNode.firstChild);}}},{key:\"clearAllTimeouts\",value:function clearAllTimeouts(){var highestTimeoutId=setTimeout(function(){},1);for(var i=0;i<highestTimeoutId;i++){clearTimeout(i);}}},{key:\"getStackTrace\",value:function getStackTrace(){var sliceCalls=arguments.length>0&&arguments[0]!==undefined?arguments[0]:2;var ret=Error().stack;// try { var a = {}; a.debug(); } catch(ex) { ret = ex.stack; }\n// if (Array.isArray(ret)) return ret;\nif(!ret)return['UnknownStackTrace'];var arr=ret.split('\\n');// first 2 entries are \"Erorr\" and \"getStackTrace()\"\nreturn sliceCalls>0?arr.slice(sliceCalls):arr;}// 0 for caller, 1 for caller of caller, -1 for current function, up to -4 to see internal layers (useless)\n},{key:\"getCaller\",value:function getCaller(){var stacksToSkip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var stack=this.getStackTrace(4);// erase getStackTrace() and isFirstTimeCalled() + Error() first stack + n° of layer the caller wants.\nreturn stack[stacksToSkip];}},{key:\"isFirstTimeCalledByThisLine\",value:// todo: use in Log.once\n// returns true only the first time this line is reached, false in loops >1 loop, false in recursion >1 recursion, false even days after the first execution unless the page is reloaded\nfunction isFirstTimeCalledByThisLine(){var stacksToSkip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var caller=this.getCaller(stacksToSkip);if(U.gotcalledby[caller])return false;return U.gotcalledby[caller]=true;}},{key:\"lineKey\",value:function lineKey(){return this.getCaller(0);}// Prevent the backspace key from navigating back.\n},{key:\"preventBackSlashHistoryNavigation\",value:function preventBackSlashHistoryNavigation(event){if(!event||!event.key||event.key.toLowerCase()!=='backspace'){return true;}var types=['text','password','file','search','email','number','date','color','datetime','datetime-local','month','range','search','tel','time','url','week'];var srcElement=$(event['srcElement']||event.target);var disabled=srcElement.prop('readonly')||srcElement.prop('disabled');if(!disabled){if(srcElement[0].isContentEditable||srcElement.is('textarea')){return true;}if(srcElement.is('input')){var type=srcElement.attr('type');if(!type||types.indexOf(type.toLowerCase())>-1){return true;}}}event.preventDefault();return false;}},{key:\"SetMerge\",value:function SetMerge(){var modifyFirst=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;for(var _len5=arguments.length,iterables=new Array(_len5>1?_len5-1:0),_key15=1;_key15<_len5;_key15++){iterables[_key15-1]=arguments[_key15];}var set=modifyFirst?iterables[0]:new Set();Log.e(!(set instanceof Set),'U.SetMerge() used with modifyFirst = true requires the first argument to be a set');for(var _i3=0,_iterables=iterables;_i3<_iterables.length;_i3++){var iterable=_iterables[_i3];var _iterator6=_createForOfIteratorHelper(iterable),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var item=_step6.value;set.add(item);}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}return set;}// merge with unique elements\n},{key:\"ArrayMergeU\",value:function ArrayMergeU(arr1){for(var _len6=arguments.length,arr2=new Array(_len6>1?_len6-1:0),_key16=1;_key16<_len6;_key16++){arr2[_key16-1]=arguments[_key16];}U.ArrayMerge0(true,arr1,arr2);}// merge without unique check\n},{key:\"ArrayMerge\",value:function ArrayMerge(arr1){for(var _len7=arguments.length,arr2=new Array(_len7>1?_len7-1:0),_key17=1;_key17<_len7;_key17++){arr2[_key17-1]=arguments[_key17];}U.ArrayMerge0(false,arr1,arr2);}// implementation\n},{key:\"ArrayMerge0\",value:function ArrayMerge0(unique,arrtarget){for(var _len8=arguments.length,arrays=new Array(_len8>2?_len8-2:0),_key18=2;_key18<_len8;_key18++){arrays[_key18-2]=arguments[_key18];}if(!arrtarget||!arrays)return;if(unique){var _iterator7=_createForOfIteratorHelper(arrays),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var arri=_step7.value;var _iterator8=_createForOfIteratorHelper(arri),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var _e=_step8.value;U.ArrayAdd(arrtarget,_e);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}}else{var _iterator9=_createForOfIteratorHelper(arrays),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var _arri=_step9.value;Array.prototype.push.apply(arrtarget,_arri);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}}},{key:\"ArrayAdd\",value:function ArrayAdd(arr,elem){var unique=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var throwIfContained=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;Log.ex(!arr||!Array.isArray(arr),'ArrayAdd arr null or not array:',arr);if(!unique){arr.push(elem);return true;}if(arr.indexOf(elem)===-1){arr.push(elem);return true;}Log.ex(throwIfContained,'ArrayAdd element already contained:',arr,elem);return false;}// static getID(): string { return U.idPrefix + U.maxID++; }\n},{key:\"getType\",value:function getType(param){var _param$constructor;switch(typeof param){default:return typeof param;case'object':return(param===null||param===void 0?void 0:(_param$constructor=param.constructor)===null||_param$constructor===void 0?void 0:_param$constructor.cname)||(param===null||param===void 0?void 0:param.className)||\"{_rawobject_}\";case'function':// and others\nreturn\"geType for function todo: distinguish betweeen arrow and classic\";}}},{key:\"stringCompare\",value:function stringCompare(s1,s2){return s1<s2?-1:s1>s2?1:0;}},{key:\"endsWith\",value:function endsWith(str,suffix){if(Array.isArray(suffix)){var _iterator10=_createForOfIteratorHelper(suffix),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var suf=_step10.value;if(U.endsWith(str,suf))return true;}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}return false;}return str.length>=suffix.length&&str.lastIndexOf(suffix)===str.length-suffix.length;}},{key:\"arrayMergeInPlace\",value:function arrayMergeInPlace(arr1){for(var _len9=arguments.length,otherArrs=new Array(_len9>1?_len9-1:0),_key19=1;_key19<_len9;_key19++){otherArrs[_key19-1]=arguments[_key19];}for(var _i4=0,_otherArrs=otherArrs;_i4<_otherArrs.length;_i4++){var arr=_otherArrs[_i4];arr1.push.apply(arr1,arr||[]);}return arr1;}},{key:\"getEndingNumber\",value:function getEndingNumber(s){var ignoreNonNumbers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var allowDecimal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var i=s.length;var numberEnd=-1;while(--i>0){if(!isNaN(+s[i])){if(numberEnd===-1){numberEnd=i;}continue;}if(s[i]==='.'&&!allowDecimal){break;}if(s[i]==='.'){allowDecimal=false;continue;}if(!ignoreNonNumbers){break;}if(numberEnd!==-1){ignoreNonNumbers=false;}}s=numberEnd===-1?'1':s.substring(i,numberEnd);return+parseFloat(s);}},{key:\"increaseEndingNumber\",value:function increaseEndingNumber(s){var allowLastNonNumberChars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var allowDecimal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var increaseWhile=arguments.length>3?arguments[3]:undefined;var regexpstr='([0-9]+'+(allowDecimal?'|[0-9]+\\\\.[0-9]+':'')+')'+(allowLastNonNumberChars?'[^0-9]*':'')+'$';var matches=new RegExp(regexpstr,'g').exec(s);// Global (return multi-match) Single line (. matches \\n).\n// S flag removed for browser support (firefox), should work anyway.\nvar prefix;var num;if(!matches){prefix=s;num=2;}else{Log.ex(matches.length>2,'parsing error: /'+regexpstr+'/gs.match('+s+')');var i=s.length-matches[0].length;prefix=s.substring(0,i);num=1+ +matches[1];}if(increaseWhile)while(increaseWhile(prefix+num)){num++;}return prefix+num;}},{key:\"shallowEqual\",value:function shallowEqual(objA,objB){if(objA===objB){return true;}if(!objA||!objB||typeof objA!=='object'||typeof objB!=='object'){return false;}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length)return false;// if (keysA.length !== keysB.length) { return false; }\n// Test for A's keys different from B.\n// var bHasOwnProperty = hasOwnProperty.bind(objB);\nfor(var keya in objA){if(!Object.is(objA[keya],objB[keya]))return false;}// for (var i = 0; i < keysA.length; i++) if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) { return false; }\nreturn true;}// returns true only if parameter is already a number by type. UU.isNumber('3') will return false\n},{key:\"isNumber\",value:function isNumber(o){return typeof o===\"number\"&&!isNaN(o);}},{key:\"getAllPrototypes\",value:function getAllPrototypes(constructor){var _constructor$prototyp,_constructor$__proto_;var chainoutoutrecursive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var currentRecursion=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var maxRecursion=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;var cache=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;// console.log('getAllPrototypes:', {name: constructor.name, currentRecursion, constructor, chainoutoutrecursive});\nif(cache&&constructor.__allprototypes)return constructor.__allprototypes;var prototype=((_constructor$prototyp=constructor.prototype)===null||_constructor$prototyp===void 0?void 0:_constructor$prototyp.name)&&constructor.prototype;var __proto__=((_constructor$__proto_=constructor.__proto__)===null||_constructor$__proto_===void 0?void 0:_constructor$__proto_.name)&&constructor.__proto__;if(!prototype&&!__proto__||currentRecursion>=maxRecursion)return chainoutoutrecursive;if(prototype)chainoutoutrecursive.push(prototype);if(__proto__)chainoutoutrecursive.push(__proto__);if(prototype)U.getAllPrototypes(prototype,chainoutoutrecursive,currentRecursion+1,maxRecursion);if(__proto__)U.getAllPrototypes(__proto__,chainoutoutrecursive,currentRecursion+1,maxRecursion);if(cache)constructor.__allprototypes=chainoutoutrecursive;return chainoutoutrecursive;}},{key:\"classIsExtending\",value:function classIsExtending(subconstructor,superconstructor){var _extends;return(superconstructor===null||superconstructor===void 0?void 0:(_extends=superconstructor._extends)===null||_extends===void 0?void 0:_extends.includes(subconstructor))||false;// return U.getAllPrototypes(subconstructor).includes(superconstructor);\n}},{key:\"isObject\",value:function isObject(v){var returnIfNull=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var returnIfUndefined=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var retIfArray=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(v===null){return returnIfNull;}if(v===undefined){return returnIfUndefined;}if(Array.isArray(v)){return retIfArray;}// nb: mind that typeof [] === 'object'\nreturn typeof v==='object';}},{key:\"objectFromArray\",value:function objectFromArray(arr,getKey){// @ts-ignore\nreturn arr.reduce(function(acc,val){acc[getKey(val)]=val;return acc;},{});}},{key:\"objectFromArrayValues\",value:function objectFromArrayValues(arr){var val=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;// @ts-ignore\nreturn arr.reduce(function(acc,val){acc[val]=val;return acc;},{});/*let ret: Dictionary = {};\r\n        for (let val of arr) { ret[val] = true; }\r\n        return ret;*/}},{key:\"toBoolString\",value:function toBoolString(bool){var ifNotBoolean=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return bool===true?'true':bool===false?'false':''+ifNotBoolean;}},{key:\"fromBoolString\",value:function fromBoolString(str){var defaultVal=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var allowNull=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var allowUndefined=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;str=(''+str).toLowerCase();if(allowNull&&str==='null')return null;if(allowUndefined&&str==='undefined')return undefined;if(str===\"true\"||str==='t'||str==='1')return true;// if (defaultVal === true) return str === \"false\" || str === 'f' || str === '0'; // false solo se è esplicitamente false, true se ambiguo.\nif(str===\"false\"||str==='f'||str==='0')return false;return defaultVal;}},{key:\"arrayDifference\",value:function arrayDifference(starting,final){var ret={};ret.starting=starting;ret.final=final;if(!starting)starting=[];if(!final)final=[];ret.removed=Uarr.arraySubtract(starting,final,false);// start & !end\nret.added=Uarr.arraySubtract(final,starting,false);// end & !start\nreturn ret;}// returns <\"what changed from old to neww\"> and in nested objects recursively\n// todo: how can i tell at what point it's the fina lvalue (might be a nestedobj) and up to when it's a delta to follow and unroll?   using __isAdelta:true ?\n// NB: this returns the delta that generates the future. if you want the delta that generate the past one, invert parameter order.\n},{key:\"objectDelta\",value:function objectDelta(old,neww){var deep=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var newwobj=neww;var oldobj=old;if(old===neww)return{};var diff=U.objdiff(old,neww);// todo: optimize this, remove the 3 loops below and add those directly in U.objdiff(old, neww, ret); writing inside the obj in third parameter\nvar ret={};// {__isAdelta:true};\nfor(var _key20 in diff.added){ret[_key20]=newwobj[_key20];}for(var _key21 in diff.changed){var subold=oldobj[_key21];var subnew=newwobj[_key21];if(typeof subold===typeof subnew&&typeof subold===\"object\"){ret[_key21]=deep?U.objectDelta(subold,subnew,true):subnew;}else ret[_key21]=subnew;}// todo: add to variable naming rules: can't start with \"_-\", like in \"_-keyname\", it means \"keyname\" removed in undo delta\nvar removedprefix=\"\";// \"_-\";\nfor(var _key22 in diff.removed){ret[removedprefix+_key22]=undefined;}//newwobj[key]; }\n// console.log(\"objdiff\", {old, neww, diff, ret});\nreturn ret;}// difference react-style. lazy check by === equality field by field. parameters are readonly\n},{key:\"objdiff\",value:function objdiff(old,neww){// let ret: GObject = {removed:{}, added:{}, changed:{}};\nvar ret={removed:{},added:{},changed:{},unchanged:{}};if(!neww&&!old){return ret;}if(!neww){ret.removed=old;return ret;}if(!old){ret.added=neww;return ret;}// let oldkeys: string[] = Object.keys(old); let newkeys: string[] = Object.keys(neww);\nvar key;for(key in old){// if (neww[key] === undefined){\n// if neww have a key with undefined value, it counts (and should) as having that property key defined\nif(!(key in neww)){ret.removed[key]=old[key];}else if(neww[key]===old[key]){ret.unchanged[key]=old[key];}else ret.changed[key]=old[key];}for(var _key23 in neww){if(!(_key23 in old)){ret.added[_key23]=neww[_key23];}}return ret;}/*  {a: { b: { c1: 1, c2:2, c3:3 } }, d: 1 }     ---->  {\"a.b.c1\":1, \"a.b.c2\":2, \"a.b.c3\":3. \"d\":1}*/},{key:\"flattenObjectToRoot\",value:function flattenObjectToRoot(obj){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var pathseparator=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'.';return Object.keys(obj).reduce(function(acc,k){var pre=prefix.length?prefix+pathseparator:'';if(typeof obj[k]==='object')Object.assign(acc,U.flattenObjectToRoot(obj[k],pre+k,pathseparator));else acc[pre+k]=obj[k];return acc;},{});}// from {a:{aa:true, ab:\"ab\"}, b:4} to [\"a.aa = true\", \"a.ab = \\\"ab\\\"\", \"a.b = 4\"]\n// maxkeylength is max length of any individual key, after it it will become: superlongpath --> supe...path\n// maxsubpaths is how many subpaths are displayed at most. after it it will be: super.rea.lly.long.pa.th --> super.rea.pa.th\n},{key:\"ObjectToAssignementStrings\",value:function ObjectToAssignementStrings(obj){var maxkeylength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var maxsubpaths=arguments.length>2&&arguments[2]!==undefined?arguments[2]:6;var maxvallength=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;var toolongreplacer=arguments.length>4&&arguments[4]!==undefined?arguments[4]:\"…\";var out=arguments.length>5?arguments[5]:undefined;var quotestrings=arguments.length>6&&arguments[6]!==undefined?arguments[6]:true;var pathseparator=\".\";var valueseparator=\" = \";var filterrow=function filterrow(rowpaths){return!rowpaths.includes(\"clonedCounter\")&&!rowpaths.includes(\"pointedBy\");};var flatten=U.flattenObjectToRoot(obj,'',pathseparator);var i=-1;var tmp;var ret=[];tmp=(maxkeylength-toolongreplacer.length)/2;var halfpath={start:window.Math.floor(tmp),end:window.Math.ceil(tmp)};tmp=(maxvallength-toolongreplacer.length)/2;var halfval={start:window.Math.floor(tmp),end:window.Math.ceil(tmp)};tmp=(maxsubpaths-toolongreplacer.length)/2;var halfsubpaths={start:window.Math.floor(tmp),end:window.Math.ceil(tmp)};var bestpathsize=0;var best=null;var countsize=function countsize(total,arrelem){return total+arrelem.length;};var filterbest=function filterbest(row){row.pathlength=row.fullstr.length;// row.fullpath.reduce<number>(countsize, 0);\nif(!best||bestpathsize<row.pathlength&&filterrow(row.fullpath)){best=row;bestpathsize=row.pathlength;if(out)out.best=best;ret.best=best.str;}};console.log(\"u get assignements\",{flatten:flatten,obj:obj});for(var _key24 in flatten){var row={fullpath:_key24.split(pathseparator),fullstr:_key24};// if (!filterrow(row.fullpath)) continue;\n// stringify(undefined) = undefined, so i add + \"\"\ntry{if(!quotestrings&&typeof flatten[_key24]===\"string\")row.fullvalue=flatten[_key24];else row.fullvalue=JSON.stringify(flatten[_key24])+\"\";}catch(e){row.fullvalue=\"⁜not serializable⁜\";}// console.log(\"U get assignements loop\", {row, key, flatten, obj});\nrow.val=row.fullvalue.length<=maxvallength?row.fullvalue:row.fullvalue.substring(0,halfval.start)+toolongreplacer+row.fullvalue.substring(halfval.start);if(row.fullpath.length>maxsubpaths){row.path=_toConsumableArray(row.fullpath);row.path.splice(halfsubpaths.start,row.fullpath.length-halfsubpaths.start-halfsubpaths.end,toolongreplacer);}else row.path=row.fullpath;// row.path = row.fullpath.length <= maxsubpaths ? row.fullpath : [...row.fullpath.slice(0, halfsubpaths.start), ...row.fullpath.toomanyarraycopies];\nrow.path=row.path.map(function(p){return p.length<=maxkeylength?p:p.substring(0,halfpath.start)+toolongreplacer+p.substring(p.length-halfpath.end);});if(out){out.push(row);}row.str=row.path.join(pathseparator)+valueseparator+row.val;ret.push(row.str);filterbest(row);}return ret;}},{key:\"download\",value:function download(){var filename=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'nameless.txt';var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var debug=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(!text){return;}filename=U.toFileName(filename);var htmla=document.createElement('a');var blob=new Blob([text],{type:'text/plain',endings:'native'});var blobUrl=URL.createObjectURL(blob);Log.l(debug,text+'|\\r\\n| <-- rn, |\\n| <--n.');htmla.style.display='none';htmla.href=blobUrl;htmla.download=filename;document.body.appendChild(htmla);htmla.click();window.URL.revokeObjectURL(blobUrl);document.body.removeChild(htmla);}},{key:\"formatXml\",value:function formatXml(xml){var reg=/(>)\\s*(<)(\\/*)/g;var wsexp=/ *(.*) +\\n/g;var contexp=/(<.+>)(.+\\n)/g;xml=xml.replace(reg,'$1\\n$2$3').replace(wsexp,'$1\\n').replace(contexp,'$1\\n$2');var pad=''||'\\t';var formatted='';var lines=xml.split('\\n');var indent=0;var lastType='other';// 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions\nvar transitions={'single->single':0,'single->closing':-1,'single->opening':0,'single->other':0,'closing->single':0,'closing->closing':-1,'closing->opening':0,'closing->other':0,'opening->single':1,'opening->closing':0,'opening->opening':1,'opening->other':1,'other->single':0,'other->closing':-1,'other->opening':0,'other->other':0};var i=0;for(i=0;i<lines.length;i++){var ln=lines[i];// Luca Viggiani 2017-07-03: handle optional <?xml ... ?> declaration\nif(ln.match(/\\s*<\\?xml/)){formatted+=ln+'\\n';continue;}// ---\nvar single=Boolean(ln.match(/<.+\\/>/));// is this line a single tag? ex. <br />\nvar closing=Boolean(ln.match(/<\\/.+>/));// is this a closing tag? ex. </a>\nvar opening=Boolean(ln.match(/<[^!].*>/));// is this even a tag (that's not <!something>)\nvar type=single?'single':closing?'closing':opening?'opening':'other';var fromTo=lastType+'->'+type;lastType=type;var padding='';indent+=transitions[fromTo];var j=void 0;for(j=0;j<indent;j++){padding+=pad;}if(fromTo==='opening->closing'){formatted=formatted.substr(0,formatted.length-1)+ln+'\\n';// substr removes line break (\\n) from prev loop\n}else{formatted+=padding+ln+'\\n';}}return formatted.trim();}// https://stackoverflow.com/questions/13861254/json-stringify-deep-objects  implementation with depth\n},{key:\"circularStringify\",value:function circularStringify(obj,replacer,space){var maxDepth_unsupported=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100;var cache=[];return JSON.stringify(obj,function(key,value){if(typeof value==='object'&&value!==null){// Duplicate reference found, discard key\nif(cache.includes(value))return\"[Circular Reference]\";// might happen both before and after the replacer func\nif(replacer){value=replacer(key,value);if(cache.includes(value))return\"[Circular Reference]\";// might happen both before and after the replacer func\n}// Store value in our collection\ncache.push(value);}return value;},space);}},{key:\"getFirstNumber\",value:function getFirstNumber(s){var allowDecimalDot=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var allowDecimalComma=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var valueifmismatch=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var commamode=allowDecimalComma?allowDecimalDot?\"(\\\\.|\\\\,)\":\"\\\\,\":allowDecimalDot?\"\\\\.\":\"will not use this regex\";var floatregex=new RegExp(\"-?\"+commamode+\"?\\\\d+(\"+commamode+\"\\\\d{1,2})?\");var intregex=/-?\\d+/;var ret;if(allowDecimalDot||allowDecimalComma)ret=floatregex.exec(s);else ret=intregex.exec(s);ret=ret&&ret[0];// first match\nif(ret===null)return valueifmismatch;var tmpindex;if(allowDecimalComma)ret=U.replaceAll(ret,\",\",\".\");// while (allowDecimalComma && (tmpindex = ret.indexOf(\",\")) !== ret.lastIndexOf(\",\")) ret.substring(tmp+1) // ret.indexOf(.)\nwhile((allowDecimalDot||allowDecimalComma)&&(tmpindex=ret.indexOf(\".\"))!==ret.lastIndexOf(\".\")){ret=ret.substring(tmpindex+1);}// ret.indexOf(.)\n// if (ret[0]===\"-\" && (ret[1]===\",\" || ret[1]===\".\")) ret = \"-0.\"+ret.substring(2); automatically done bu js.    +\"-.5\" = -0.5\nreturn+ret;}// faster than jquery, underscore and many native methods checked https://stackoverflow.com/a/59787784\n},{key:\"isEmptyObject\",value:function isEmptyObject(obj){for(var i in obj){return false;}return true;}},{key:\"pairArrayElementsRepeatFunc\",value:function pairArrayElementsRepeatFunc(val,index,arr){return[arr[index],arr[index+1]];}},{key:\"pairArrayElementsReducerFunc\",value:function pairArrayElementsReducerFunc(accumulator,value,index,array){if(index%2===0)accumulator.push(array.slice(index,index+2));return accumulator;}// from arr[] to arr[][]. if is with repetitions is: [1,2], [2,3], [3,4]... (ret.length = source.length-1)\n// if without repetitions is: [1,2], [3,4].... (ret.length = Math.ceil(source.length/2);\n},{key:\"pairArrayElements\",value:function pairArrayElements(arr){var withRepetitions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(withRepetitions){return arr.map(U.pairArrayElementsRepeatFunc).slice(0,arr.length-1);}return arr.reduce(U.pairArrayElementsReducerFunc,[]);}// removes line // and block /**/ comments  todo: can likely be improved by a regular expression\n},{key:\"decomment_all\",value:function decomment_all(str){return this.decomment_line(this.decomment_block(str));}// removes line comments //\n},{key:\"decomment_line\",value:function decomment_line(str){var trimLines=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return str.split(\"\\n\").map(function(s){var i=s.indexOf(\"//\");s=i===-1?s:s.substring(i);return trimLines?s.trim():s;}).join(\"\\n\");}// removes block comments /**/\n},{key:\"decomment_block\",value:function decomment_block(str){// let maxcomments = 100;\nwhile(true){// if (--maxcomments===0) break;\nvar s=str.indexOf(\"/*\");if(s===-1)break;var _e2=str.indexOf(\"*/\",s+1);if(_e2===-1)_e2=str.length;str=str.substring(0,s)+str.substring(_e2+2);}return str;}},{key:\"uppercaseFirstLetter\",value:function uppercaseFirstLetter(str){if(typeof str!==\"string\")return str;return str.charAt(0).toUpperCase()+str.slice(1);}// CAREFUL! it's imperfect.\n// Does not handle strings starting with ( that are not ()=> arrow functions\n// or codes whose last chars are () but not in (function)() form\n},{key:\"wrapUserFunction\",value:function wrapUserFunction(str){str=str.trim();if(str[0]!=='('||str.indexOf(\"function\")!==0){str=\"()=>{\"+str+\"\\n}\";// last \\n important for line comments //\n}if(str[str.length-2]!==\"(\"||str[str.length-1]!==\")\")str=\"(\"+str+\")()\";return str;}// adds ellipsis in the middle of a string to truncate it when it's too long.\n},{key:\"stringMiddleCut\",value:function stringMiddleCut(str,maxLength){var ellipsisChar=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'…';var asArray=arguments.length>3?arguments[3]:undefined;if(!str||maxLength<0||str.length<=maxLength)return asArray?[str]:str;var midpoint=Math.ceil(str.length/2);var toremove=str.length-maxLength+ellipsisChar.length;// makes room for the additional ellipsis too\nvar lstrip=Math.ceil(toremove/2);// left strip is the bigger one if odd chars\nvar rstrip=toremove-lstrip;if(asArray)return[str.substring(0,midpoint-lstrip),ellipsisChar,str.substring(midpoint+rstrip)];else return str.substring(0,midpoint-lstrip)+ellipsisChar+str.substring(midpoint+rstrip);}// transform grays: if the color is <20% different from gray, transform it instead in black or white, 0 = don't, 1 = always black or white\n},{key:\"invertHex\",value:function invertHex(s){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'#';var transformGrays=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.2;if(s.indexOf(prefix)===0)s=s.substring(prefix.length);var r,g,b,h;// might be NaN if parseInt fails\nif(s.length===3||s.length===4){r=parseInt('0x'+s[0]);// works with hex numbers\ng=parseInt('0x'+s[1]);b=parseInt('0x'+s[2]);h=s.length===4?parseInt('0x'+s[4]):undefined;}else if(s.length===6||s.length===8){r=parseInt('0x'+s.substring(0,2));g=parseInt('0x'+s.substring(2,4));b=parseInt('0x'+s.substring(4,6));h=s.length===8?parseInt('0x'+s.substring(6,8)):undefined;}else return Log.ee(\"cannot invert hex color \"+s+\", invalid length\",{s:s});if(isNaN(r))return Log.ee(\"cannot invert hex color \"+s+\", invalid red\",{s:s});if(isNaN(g))return Log.ee(\"cannot invert hex color \"+s+\", invalid green\",{g:g});if(isNaN(b))return Log.ee(\"cannot invert hex color \"+s+\", invalid blue\",{b:b});transformGrays=transformGrays*128;r=Math.abs(r-128)<=transformGrays?r>=128?0:255:255-r;g=Math.abs(g-128)<=transformGrays?g>=128?0:255:255-g;b=Math.abs(b-128)<=transformGrays?b>=128?0:255:255-b;if(h||h===0)h=255-h;var rs=r.toString(16);if(rs.length===1)rs='0'+rs;var gs=g.toString(16);if(gs.length===1)gs='0'+gs;var bs=b.toString(16);if(bs.length===1)bs='0'+bs;var hs=h?h.toString(16):'';if(hs.length===1)hs='0'+hs;return prefix+rs+gs+bs+hs;}},{key:\"parentUntil\",value:function parentUntil(tagName,p){while(p&&p.tagName!==tagName){p=p.parentElement;}return p;}},{key:\"paletteSplit\",value:function paletteSplit(palette){var ret={color:{},number:{},text:{},path:{}};for(var _i5=0,_Object$entries=Object.entries(palette);_i5<_Object$entries.length;_i5++){var _entry=_Object$entries[_i5];var k=_entry[0];var v=_entry[1];ret[v.type][k]=v;}return ret;}},{key:\"mergeNamedArray\",value:function mergeNamedArray(ret,classes){var _iterator11=_createForOfIteratorHelper(Object.getOwnPropertyNames(classes)),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var _key25=_step11.value;// ownPropertyNames skips \"first, last, separator\" created by extending array prototype\nif(_key25===\"length\")continue;if(!isNaN(+_key25))ret.push(classes[_key25]);// not else, if a class is named like a number it can be accessed by name until is overwrite by index being reached.\nif(!ret[_key25])ret[_key25]=classes[_key25];}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}}},{key:\"clipboardCopy\",value:function(){var _clipboardCopy=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(text,onSuccess,onFailure){var ret;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ret=false;return _context3.abrupt(\"return\",navigator.clipboard.writeText(text).then(function(){ret=true;return onSuccess();},function(){ret=U.clipboardCopy_old(text);return ret?onSuccess():onFailure();}));case 2:case\"end\":return _context3.stop();}}},_callee3);}));function clipboardCopy(_x2,_x3,_x4){return _clipboardCopy.apply(this,arguments);}return clipboardCopy;}()},{key:\"clipboardCopy_old\",value:function clipboardCopy_old(text){try{if(!U.clipboardinput){U.clipboardinput=document.createElement('input');U.clipboardinput.id=U.prefix+'CopyDataToClipboard';U.clipboardinput.type='text';U.clipboardinput.style.display='block';U.clipboardinput.style.position='absolute';U.clipboardinput.style.top='-100vh';}document.body.appendChild(U.clipboardinput);U.clipboardinput.value=text;U.clipboardinput.select();if(!document.execCommand)return false;var ret=document.execCommand('copy');document.body.removeChild(U.clipboardinput);U.clearSelection();return ret;}catch(e){return false;}}},{key:\"clearSelection\",value:function clearSelection(){}},{key:\"toNamedArray\",value:function toNamedArray(larr,darr){if(!darr||darr.length!==larr.length)darr=larr.map(function(l){return l.__raw;});for(var i=0;i<larr.length;i++){if(darr[i]&&larr[i])larr[\"$\"+darr[i].name]=larr[i];}/*for (let index of Object.getOwnPropertyNames(larr)) { // ownPropertyNames skips \"first, last, separator\" created by extending array prototype\r\n            if (index === \"length\") continue;\r\n            let d = darr[index as any as number];\r\n            let l = larr[index as any as number];\r\n            if (!d || !l) continue;\r\n            (larr as any)[\"$\" + (d as any).name] = l;\r\n        }*/return larr;}}]);return U;}(),_class4.isStrict=function(){return!this;}(),_class4.validIdentfierRegexp=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/,_class4.gotcalledby={},_class4.maxID=0,_class4.idPrefix='',_class4.getID=/*#__PURE__*/_regeneratorRuntime.mark(function idgenerator(){var i;return _regeneratorRuntime.wrap(function idgenerator$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:i=0;case 1:if(!true){_context4.next=6;break;}_context4.next=4;return i++;case 4:_context4.next=1;break;case 6:case\"end\":return _context4.stop();}}},idgenerator);})(),_class4.prefix='ULibrary_',_class4.clipboardinput=void 0,_class4))||_class3);export var DDate=/*#__PURE__*/function(){function DDate(){_classCallCheck(this,DDate);}_createClass(DDate,null,[{key:\"addDay\",value:function addDay(date,offset,inplace){var ret=inplace?date:new Date(date);ret.setDate(date.getDate()+offset);return ret;}},{key:\"addMonth\",value:function addMonth(date,offset,inplace){var ret=inplace?date:new Date(date);ret.setMonth(date.getMonth()+offset);return ret;}},{key:\"addYear\",value:function addYear(date,offset,inplace){var ret=inplace?date:new Date(date);ret.setFullYear(date.getFullYear()+offset);return ret;}}]);return DDate;}();DDate.cname=\"DDate\";export var myFileReader=/*#__PURE__*/function(){function myFileReader(){_classCallCheck(this,myFileReader);}_createClass(myFileReader,null,[{key:\"setinfos\",value:// constructor(onchange: (e: ChangeEvent) => void = null, fileTypes: FileReadTypeEnum[] | string[] = null) { myFileReader.setinfos(fileTypes, onchange); }\nfunction setinfos(fileTypes,onchange,readcontent){myFileReader.fileTypes=fileTypes||myFileReader.fileTypes;var debug=false;debug&&console.log('fileTypes:',myFileReader.fileTypes,fileTypes);myFileReader.input=document.createElement('input');var input=myFileReader.input;myFileReader.onchange=function(e){if(!readcontent){onchange(e,input.files,undefined);return;}var contentObj={};var fileLetti=0;var _loop=function _loop(i){var f=input.files[i];debug&&console.log('filereadContent['+i+']( file:',f,')');U.fileReadContent(f,function(content){var _input$files;debug&&console.log('file['+i+'] read complete. done: '+(1+fileLetti)+' / '+((_input$files=input.files)===null||_input$files===void 0?void 0:_input$files.length),'contentObj:',contentObj);contentObj[i]=content;// cannot use array, i'm not sure the callbacks will be called in order. using push is safer but could alter order.\n// this is last file to read.\nif(input.files&&++fileLetti===input.files.length){var contentArr=[];for(var j=0;j<input.files.length;j++){contentArr.push(contentObj[j]);}onchange(e,input.files,contentArr);}});};for(var i=0;input.files&&i<input.files.length;i++){_loop(i);}}||myFileReader.onchange;}},{key:\"reset\",value:function reset(){myFileReader.fileTypes=undefined;myFileReader.onchange=undefined;myFileReader.input=undefined;}},{key:\"show\",value:function show(onChange){var extensions=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;var readContent=arguments.length>2?arguments[2]:undefined;console.log(\"importEcore: pre file reader\",myFileReader.input);myFileReader.setinfos(extensions,onChange,readContent);//if (!myFileReader.input) return;\nmyFileReader.input.setAttribute('type','file');if(myFileReader.fileTypes){myFileReader.input.setAttribute('accept',myFileReader.fileTypes.join(','));}//console.log('fileTypes:', myFileReader.fileTypes, 'input:', myFileReader.input);\n$(myFileReader.input).on('change.custom',myFileReader.onchange).trigger('click');myFileReader.reset();}}]);return myFileReader;}();myFileReader.input=null;myFileReader.fileTypes=null;myFileReader.onchange=null;export var Uarr=(_dec3=RuntimeAccessible('Uarr'),_dec3(_class5=/*#__PURE__*/function(){function Uarr(){_classCallCheck(this,Uarr);}_createClass(Uarr,null,[{key:\"arrayIntersection\",value:function arrayIntersection(arr1,arr2){if(!arr1||!arr2)return null;return arr1.filter(function(e){return arr2.indexOf(e)>=0;});}},{key:\"arraySubtract\",value:function arraySubtract(arr1,arr2,inPlace){var i;var ret=inPlace?arr1:_toConsumableArray(arr1);for(i=0;i<arr2.length;i++){U.arrayRemoveAll(ret,arr2[i]);}return ret;}},{key:\"equals\",value:function equals(a1,a2,deep){Log.ex(deep,\"deep array comparison is not supported yet\");if(!a1||!a2)return false;if(a1.length!==a2.length)return false;for(var i=0;i<a1.length;i++){if(a1[i]!==a2[i])return false;}return true;}}]);return Uarr;}())||_class5);export var FocusHistoryEntry=function FocusHistoryEntry(e,element,time){_classCallCheck(this,FocusHistoryEntry);this.time=void 0;this.evt=void 0;this.element=void 0;this.evt=e;this.element=element||e.target;this.time=time||new Date();};FocusHistoryEntry.cname=\"FocusHistoryEntry\";export var ShortDefaultEClasses;(function(ShortDefaultEClasses){ShortDefaultEClasses[\"EObject\"]=\"EObject\";ShortDefaultEClasses[\"EAnnotation\"]=\"EAnnotation\";ShortDefaultEClasses[\"EClass\"]=\"EClass\";ShortDefaultEClasses[\"EPackage\"]=\"EPackage\";ShortDefaultEClasses[\"ENamedElement\"]=\"ENamedElement\";})(ShortDefaultEClasses||(ShortDefaultEClasses={}));export var ShortAttribETypes;// EDiagnosticChain = \"EDiagnosticChain\", // present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\n/*\r\n  ECharObj  = 'ECharObj',\r\n  EStringObj  = 'EStringObj',\r\n  EDateObj  = 'EDateObj',\r\n  EFloatObj  = 'EFloatObj',\r\n  EDoubleObj  = 'EDoubleObj',\r\n  EBooleanObj = 'EBooleanObj',\r\n  EByteObj  = 'EByteObj',\r\n  EShortObj  = 'EShortObj',\r\n  EIntObj  = 'EIntObj',\r\n  ELongObj  = 'ELongObj',\r\n  EELIST  = 'EELIST',*/(function(ShortAttribETypes){ShortAttribETypes[\"EVoid\"]=\"EVoid\";ShortAttribETypes[\"EChar\"]=\"EChar\";ShortAttribETypes[\"EString\"]=\"EString\";ShortAttribETypes[\"EDate\"]=\"EDate\";ShortAttribETypes[\"EBoolean\"]=\"EBoolean\";ShortAttribETypes[\"EByte\"]=\"EByte\";ShortAttribETypes[\"EShort\"]=\"EShort\";ShortAttribETypes[\"EInt\"]=\"EInt\";ShortAttribETypes[\"ELong\"]=\"ELong\";ShortAttribETypes[\"EFloat\"]=\"EFloat\";ShortAttribETypes[\"EDouble\"]=\"EDouble\";})(ShortAttribETypes||(ShortAttribETypes={}));windoww.ShortAttribETypes=ShortAttribETypes;export var ShortAttribSuperTypes={\"EVoid\":[],\"EChar\":[ShortAttribETypes.EString],\"EString\":[],\"EDate\":[],\"EBoolean\":[ShortAttribETypes.EByte,ShortAttribETypes.EShort,ShortAttribETypes.EInt,ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EByte\":[ShortAttribETypes.EShort,ShortAttribETypes.EInt,ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EShort\":[ShortAttribETypes.EInt,ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EInt\":[ShortAttribETypes.ELong,ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"ELong\":[ShortAttribETypes.EFloat,ShortAttribETypes.EDouble],\"EFloat\":[ShortAttribETypes.EDouble],\"EDouble\":[]};var ecoreprefix=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//\";var ecoreclasprefix=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//\";export function toShortEType(a){return a.substring(ecoreprefix.length);}export function toLongEType(a){return AttribETypes[a];// return ecoreprefix + a as any;\n}export function toShortEClass(a){return a.substring(ecoreclasprefix.length);}export function toLongEClass(a){return DefaultEClasses[a];}export var SelectorOutput=function SelectorOutput(){_classCallCheck(this,SelectorOutput);this.jqselector=void 0;this.attrselector=void 0;this.attrRegex=void 0;this.exception=void 0;this.resultSetAttr=void 0;this.resultSetElem=void 0;};// compare it with event.key\nexport var Keystrokes;// not even triggering event?\n(function(Keystrokes){Keystrokes[Keystrokes[\"clickLeft\"]=0]=\"clickLeft\";Keystrokes[Keystrokes[\"clickWheel\"]=1]=\"clickWheel\";Keystrokes[Keystrokes[\"clickRight\"]=2]=\"clickRight\";Keystrokes[Keystrokes[\"clickBackMouseButton\"]=3]=\"clickBackMouseButton\";Keystrokes[Keystrokes[\"clickForwardMouseButton\"]=4]=\"clickForwardMouseButton\";Keystrokes[\"escape\"]=\"Escape\";Keystrokes[\"capsLock\"]=\"CapsLock\";Keystrokes[\"shift\"]=\"Shift\";Keystrokes[\"tab\"]=\"Tab\";Keystrokes[\"alt\"]=\"Alt\";Keystrokes[\"control\"]=\"Control\";Keystrokes[\"end\"]=\"End\";Keystrokes[\"home\"]=\"Home\";Keystrokes[\"pageUp\"]=\"PageUp\";Keystrokes[\"pageDown\"]=\"PageDown\";Keystrokes[\"enter\"]=\"Enter\";Keystrokes[\"numpadEnter\"]=\"NumpadEnter\";Keystrokes[\"audioVolumeMute\"]=\"AudioVolumeMute\";Keystrokes[\"audioVolumeUp\"]=\"AudioVolumeUp\";Keystrokes[\"audioVolumeDown\"]=\"AudioVolumeDown\";Keystrokes[\"mediaTrackPrevious\"]=\"MediaTrackPrevious\";Keystrokes[\"delete\"]=\"Delete\";Keystrokes[\"backspace\"]=\"Backspace\";Keystrokes[\"space\"]=\" \";Keystrokes[\"altGraph\"]=\"AltGraph\";Keystrokes[\"arrowLeft\"]=\"ArrowLeft\";Keystrokes[\"arrowRight\"]=\"ArrowRight\";Keystrokes[\"arrowUp\"]=\"ArrowUp\";Keystrokes[\"arrowDown\"]=\"ArrowDown\";Keystrokes[\"insert\"]=\"Insert\";Keystrokes[\"f1\"]=\"F1\";Keystrokes[\"meta\"]=\"Meta\";Keystrokes[\"unidentified\"]=\"Unidentified\";Keystrokes[\"__NotReacting__\"]=\"fn, print, maybe others\";})(Keystrokes||(Keystrokes={}));export var DefaultEClasses;(function(DefaultEClasses){DefaultEClasses[\"EObject\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EObject\";DefaultEClasses[\"EAnnotation\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EAnnotation\";DefaultEClasses[\"EClass\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EClass\";DefaultEClasses[\"EPackage\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EPackage\";DefaultEClasses[\"ENamedElement\"]=\"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//ENamedElement\";})(DefaultEClasses||(DefaultEClasses={}));export var AttribETypes;// present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\n// EDiagnosticChain = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDiagnosticChain',\n/*\r\n  ECharObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ECharObject',\r\n  EStringObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EStringObject',\r\n  EDateObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDateObject',\r\n  EFloatObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloatObject',\r\n  EDoubleObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubleObject',\r\n  EBooleanObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObj',\r\n  EByteObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByteObject',\r\n  EShortObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShortObject',\r\n  EIntObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject',\r\n  ELongObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject', */ // EELIST = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList', // List<E> = List<?>\n// export type Json = object;\n(function(AttribETypes){AttribETypes[\"EVoid\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EVoid\";AttribETypes[\"EChar\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EChar\";AttribETypes[\"EString\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\";AttribETypes[\"EDate\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate\";AttribETypes[\"EFloat\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloat\";AttribETypes[\"EDouble\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble\";AttribETypes[\"EBoolean\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean\";AttribETypes[\"EByte\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByte\";AttribETypes[\"EShort\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShort\";AttribETypes[\"EInt\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\";AttribETypes[\"ELong\"]=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELong\";})(AttribETypes||(AttribETypes={}));export var ParseNumberOrBooleanOptions=function ParseNumberOrBooleanOptions(){var defaultValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var allowNull=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var nullValue=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var allowUndefined=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var undefinedValue=arguments.length>4&&arguments[4]!==undefined?arguments[4]:undefined;var allowedNan=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var nanValue=arguments.length>6&&arguments[6]!==undefined?arguments[6]:NaN;var allowBooleans=arguments.length>7&&arguments[7]!==undefined?arguments[7]:true;var trueValue=arguments.length>8&&arguments[8]!==undefined?arguments[8]:1;var falseValue=arguments.length>9&&arguments[9]!==undefined?arguments[9]:0;_classCallCheck(this,ParseNumberOrBooleanOptions);this.defaultValue=void 0;this.allowNull=void 0;this.nullValue=void 0;this.allowUndefined=void 0;this.undefinedValue=void 0;this.allowedNan=void 0;this.nanValue=void 0;this.allowBooleans=void 0;this.trueValue=void 0;this.falseValue=void 0;this.defaultValue=defaultValue;this.allowNull=allowNull;this.nullValue=nullValue;this.allowUndefined=allowUndefined;this.undefinedValue=undefinedValue;this.allowedNan=allowedNan;this.nanValue=nanValue;this.allowBooleans=allowBooleans;this.trueValue=trueValue;this.falseValue=falseValue;};export var LoggerCategoryState=function LoggerCategoryState(args,short_string,cat){_classCallCheck(this,LoggerCategoryState);this.category=void 0;this.time=void 0;this.raw_args=void 0;this.short_string=void 0;this.long_string=void 0;this.raw_args=args;this.time=new Date().getTime();this.category=cat;this.short_string=short_string;this.long_string='';/*\r\n        const maxChars: Dictionary<string, [number, number]> = {\r\n            function: [50, 0],\r\n            object: [100, 0],\r\n            string: [80, 20],\r\n        }\r\n        let ansiConvert = (window as any).ansiConvert;\r\n        if (!ansiConvert) {\r\n            (window as any).ansiconvert = ansiConvert = new Convert();\r\n        }\r\n        for (let a of args){\r\n            let s: string;\r\n            let ta: string = typeof a;\r\n            switch(ta){\r\n                case \"function\": s = a.toString(); break;\r\n                case \"object\":\r\n                    let outstr = U.inspect(a, true, 2, true);\r\n                    outstr = U.replaceAll(ansiConvert.toHtml(outstr), \"style=\\\"color:#FFF\\\"\", \"style=\\\"color:#000\\\"\");\r\n                    let regexpCloseTags = new RegExp(\"(\\\\<span style\\\\=\\\"color\\\\:\\\\#)\", \"gm\");\r\n                    outstr = U.replaceAll( outstr, \"$\", \"£\");\r\n                    outstr = outstr.replace(regexpCloseTags,  \"</span>$1\");\r\n                    outstr = U.replaceAll(outstr, \"£\", \"$\");\r\n                    s = outstr;\r\n                    break;\r\n                default: s = ''+a;\r\n            }\r\n            if (maxChars[ta]) s = U.cropStr(s, maxChars[ta][0], maxChars[ta][1]);\r\n            this.long_string += s;\r\n        }*/};export var Log=(_dec4=RuntimeAccessible('Log'),_dec4(_class6=(_class7=/*#__PURE__*/function(){function Log(){_classCallCheck(this,Log);}_createClass(Log,null,[{key:\"disableConsole\",value:// public static history: Dictionary<string, Dictionary<string, any[]>> = {}; // history['pe']['key'] = ...parameters\n/*\r\n    public static last_e: LoggerCategoryState[] = [];\r\n    public static last_eDev: LoggerCategoryState[] = [];\r\n    public static last_ex: LoggerCategoryState[] = [];\r\n    public static last_exDev: LoggerCategoryState[] = [];\r\n    public static last_w: LoggerCategoryState[] = [];\r\n    public static last_i: LoggerCategoryState[] = [];*/ // private static loggerMapping: Dictionary<string, LoggerInterface[]> = {} // takes function name returns logger list\n// takes function name returns log messages list\n/*\r\n    public static registerLogger(logger: LoggerInterface, triggerAt: (typeof windoww.U.pe) & {name: string, cname:string}) {\r\n        let tname: string = (triggerAt as any).cname || (triggerAt as any).name;\r\n        if (!Log.loggerMapping[tname]) Log.loggerMapping[tname] = [];\r\n        Log.loggerMapping[tname].push(logger);\r\n    }*/function disableConsole(){// @ts-ignore\nconsole['logg']=console.log;console.log=function(){};}},{key:\"enableConsole\",value:function enableConsole(){// @ts-ignore\nif(console['logg'])console.log=console['logg'];}},{key:\"log\",value:function(_log){function log(_x5,_x6,_x7,_x8){return _log.apply(this,arguments);}log.toString=function(){return _log.toString();};return log;}(function(prefix,category,originalFunc,b){for(var _len10=arguments.length,restArgs=new Array(_len10>4?_len10-4:0),_key26=4;_key26<_len10;_key26++){restArgs[_key26-4]=arguments[_key26];}if(!b){return'';}var key=windoww.U.getCaller(1);// todo: remove replace heavy fumc\nif(restArgs===null||restArgs===undefined){restArgs=[];}var str=key+': ';for(var i=0;i<restArgs.length;i++){// console.log(prefix, {i, restArgs, curr:restArgs[i]});\nstr+=''+(typeof restArgs[i]==='symbol'?''+String(restArgs[i]):restArgs[i])+'\\t\\r\\n';}Log.updateLoggerComponent(category,restArgs,str,category);// merged loggers if (Log.loggerMapping[category]) for (const logger of Log.loggerMapping[category]) { logger.log(category, key, restArgs, str); }\noriginalFunc.apply(void 0,[key].concat(_toConsumableArray(restArgs)));return'['+prefix+']'+str;})},{key:\"e\",value:function e(b){if(!b)return'';for(var _len11=arguments.length,restArgs=new Array(_len11>1?_len11-1:0),_key27=1;_key27<_len11;_key27++){restArgs[_key27-1]=arguments[_key27];}var str=Log.log.apply(Log,['Error','e',console.error,b].concat(restArgs));Log.lastError=restArgs;return str;// throw new Error(str);\n}},{key:\"eDev\",value:function eDev(b){if(!b)return'';for(var _len12=arguments.length,restArgs=new Array(_len12>1?_len12-1:0),_key28=1;_key28<_len12;_key28++){restArgs[_key28-1]=arguments[_key28];}var str=Log.log.apply(Log,['Dev Error','eDev',console.error,b].concat(restArgs));Log.lastError=restArgs;return str;// throw new Error(str);\n}},{key:\"ex\",value:function ex(b){if(!b)return null;for(var _len13=arguments.length,restArgs=new Array(_len13>1?_len13-1:0),_key29=1;_key29<_len13;_key29++){restArgs[_key29-1]=arguments[_key29];}var str=Log.log.apply(Log,['Error','e',console.error,b].concat(restArgs));Log.lastError=restArgs;windoww.ee=restArgs;windoww.e1=restArgs[1];throw _construct(MyError,[str].concat(restArgs));}},{key:\"exDev\",value:function exDev(b){if(!b)return null;for(var _len14=arguments.length,restArgs=new Array(_len14>1?_len14-1:0),_key30=1;_key30<_len14;_key30++){restArgs[_key30-1]=arguments[_key30];}var str=Log.log.apply(Log,['Dev Error','eDev',console.error,b].concat(restArgs));Log.lastError=restArgs;windoww.ee=restArgs;windoww.e1=restArgs[1];throw _construct(MyError,[str].concat(restArgs));}},{key:\"i\",value:function i(b){if(!b)return null;for(var _len15=arguments.length,restArgs=new Array(_len15>1?_len15-1:0),_key31=1;_key31<_len15;_key31++){restArgs[_key31-1]=arguments[_key31];}return Log.log.apply(Log,['Info','i',console.log,b].concat(restArgs));}},{key:\"get_loggercomponent\",value:function get_loggercomponent(){return Log._loggerComponent;}},{key:\"updateLoggerComponent\",value:function updateLoggerComponent(type,args,short_str,cat){var c=Log.get_loggercomponent();var update=new LoggerCategoryState(args,short_str,cat);Log.messageMapping[type].push(update);// (Log as GObject)[\"last_\"+type].push(args);\nif(!c)return;c.setState(_defineProperty({},type+\"_counter\",c.state[type+\"_counter\"]+1));// so it doesn't pass through redux\n}},{key:\"l\",value:function l(b){if(!b)return null;for(var _len16=arguments.length,restArgs=new Array(_len16>1?_len16-1:0),_key32=1;_key32<_len16;_key32++){restArgs[_key32-1]=arguments[_key32];}return Log.log.apply(Log,['Log','l',console.log,b].concat(restArgs));}},{key:\"w\",value:function w(b){if(!b)return null;for(var _len17=arguments.length,restArgs=new Array(_len17>1?_len17-1:0),_key33=1;_key33<_len17;_key33++){restArgs[_key33-1]=arguments[_key33];}return Log.log.apply(Log,['Warn','w',console.warn,b].concat(restArgs));}},{key:\"eDevv\",value:function eDevv(firstParam){for(var _len18=arguments.length,restAgs=new Array(_len18>1?_len18-1:0),_key34=1;_key34<_len18;_key34++){restAgs[_key34-1]=arguments[_key34];}return Log.eDev.apply(Log,[true].concat([firstParam].concat(restAgs)));}},{key:\"ee\",value:function ee(){for(var _len19=arguments.length,restAgs=new Array(_len19),_key35=0;_key35<_len19;_key35++){restAgs[_key35]=arguments[_key35];}return Log.e.apply(Log,[true].concat(restAgs));}},{key:\"exDevv\",value:function exDevv(firstParam){for(var _len20=arguments.length,restAgs=new Array(_len20>1?_len20-1:0),_key36=1;_key36<_len20;_key36++){restAgs[_key36-1]=arguments[_key36];}return Log.exDev.apply(Log,[true].concat([firstParam].concat(restAgs)));}},{key:\"exx\",value:function exx(){for(var _len21=arguments.length,restAgs=new Array(_len21),_key37=0;_key37<_len21;_key37++){restAgs[_key37]=arguments[_key37];}return Log.ex.apply(Log,[true].concat(restAgs));}},{key:\"ii\",value:function ii(){for(var _len22=arguments.length,restAgs=new Array(_len22),_key38=0;_key38<_len22;_key38++){restAgs[_key38]=arguments[_key38];}return Log.i.apply(Log,[true].concat(restAgs));}},{key:\"ll\",value:function ll(){for(var _len23=arguments.length,restAgs=new Array(_len23),_key39=0;_key39<_len23;_key39++){restAgs[_key39]=arguments[_key39];}return Log.l.apply(Log,[true].concat(restAgs));}},{key:\"ww\",value:function ww(){for(var _len24=arguments.length,restAgs=new Array(_len24),_key40=0;_key40<_len24;_key40++){restAgs[_key40]=arguments[_key40];}return Log.w.apply(Log,[true].concat(restAgs));}}]);return Log;}(),_class7.lastError=void 0,_class7.messageMapping={l:[],i:[],w:[],e:[],ex:[],eDev:[],exDev:[]},_class7._loggerComponent=undefined,_class7))||_class6);/*\r\ninterface LoggerInterface{\r\n    log: (category: string, key: string, data: any[], fullconcat?: string, stringified?: string) => any;\r\n}*/export var FileReadTypeEnum=function FileReadTypeEnum(){_classCallCheck(this,FileReadTypeEnum);};// console.info('loaded ts U');\nFileReadTypeEnum.image=\"image/*\";FileReadTypeEnum.audio=\"audio/*\";FileReadTypeEnum.video=\"video/*\";FileReadTypeEnum.AndManyOthersButThereAreTooMuch=\"And many others... https://www.iana.org/assignments/media-types/media-types.xhtml\";FileReadTypeEnum.OrJustPutFileExtension=\"OrJustPutFileExtension\";","map":{"version":3,"names":["JsType","LModelElement","LNamedElement","MyError","RuntimeAccessible","store","windoww","Swal","Storage","compressToUTF16","decompressFromUTF16","util","Convert","console","warn","Color","_dec","_class","r","g","b","_classCallCheck","_createClass","key","value","getHex","undefined","mixWith","c","getHLS","duplicate","fromHex","hex","fromHLS","_ref","h","l","s","U","_dec2","_class3","_class4","_decompressState","_asyncToGenerator","_regeneratorRuntime","mark","_callee","state","wrap","_callee$","_context","prev","next","abrupt","sent","stop","decompressState","_x","apply","arguments","_compressedState","_callee2","_callee2$","_context2","JSON","stringify","getState","compressedState","isOffline","read","refresh","window","location","reload","inspect","object","showHidden","depth","color","_object","o0","__raw","Array","isArray","map","o","error","objectInspect","val","length","ansiConvert","ansiconvert","replaceAll","toHtml","cropStr","msg","atStart","atEnd","arr","split","splice","join","extractByKey","dict","path","keys","topic","data","values","_iterator","_createForOfIteratorHelper","_step","n","done","d","_iterator2","_step2","k","hasOwnProperty","err","e","f","push","extractKeys","traverse","obj","concat","wrapper","json","dElement","parse","hexToPalette","_len","hexs","_key3","type","substring","a","Number","parseInt","Log","exDev","i","fatherChain","me","fathers","id","toCheck","element","pop","father","isShallowEqualWithProxies","obj1","obj2","skipKeys","out","maxDepth","returnIfMaxDepth","tobj1","tobj2","reason","isNaN","toString","o1Raw","o2Raw","className","clonedCounter","oldp","newp","deepEqual","x","y","tx","ty","Object","every","sleep","Promise","resolve","setTimeout","getRandomString","characters","randomString","index","randomNumber","Math","floor","random","charAt","alert","title","text","toLowerCase","html","result","fire","backdrop","showCloseButton","showConfirmButton","popup","filteredPointedBy","label","models","_iterator3","pointedBy","_step3","source","fromPointer","getFatherFieldToDelete","field","initializeValue","typeclassifier","pointer","name","Date","toJSON","slice","orderChildrenByTimestamp","context","children","proxyObject","orderedChildren","Map","_iterator4","_step4","child","timestamp","set","_toConsumableArray","entries","sort","followPath","base","patharr","base0","ret","chain","lastObject","lastkey","failedRemainingPath","lastval","Error","multiReplaceAllKV","kv","vals","multiReplaceAll","searchText","replacement","str","debug","toFileName","trim","objectMergeInPlace","output","_len2","objarr","_key6","_iterator5","_step5","_out$_key","log","clear","removeEmptyObjectKeys","_i","_Object$keys","objectMergeInPlace_conditional","condition","_len3","_key9","_i2","_objarr","buildFunctionDocumentation","isFunction","parameters","returns","fname","isLambda","signature","starti","indexOf","endi","parcounter","parameterStr","substr","returnstarti","returnendi","bodystarti","max","regexp","match","exec","par","defaultVal","typedesc","parseFunctionWithContextAndScope","codeStr0","context0","scope0","codestrParamNames","protectShallowValues","doIdentifierValidation","codeStr","scopeParams","scope","scopekeys","_key11","validIdentfierRegexp","test","filter","innerFuncParams","_jevalfunc","evalmode","params","eval","Function","bind","evalInContextAndScopeNew","injectScopeToo","evalInContextAndScope","ex","_ret","_objectSpread","__proto__","w","eDev","prefixDeclarations","postfixDeclarations","isStrict","_eval","__codeStr","call","_ref2","_len4","_key13","execInContextAndScope","func","execInScope_DO_NOT_USE","_construct","evalInContext","js","highOrderFunctionExampleTyped","funcName","cname","time","results","timeEnd","asClass","classe","elseReturn","asString","propKey","isString","loadScript","useEval","script","document","createElement","src","body","append","ancestorArray","domelem","stopNode","includeSelf","tmp","parentNode","container","containerTag","innerHTML","firstChild","removeChild","levenshtein","cost","min","getClosestPropertyName","names","lowest","Infinity","reduce","previous","current","distance","getClosestPropertyNames","distances","autoCorrectProxy","target","recursive","logger","Proxy","get","namestr","suggestions","getOwnPropertyNames","arrayRemoveAll","elem","arrayUnique","Set","fileReadContent","file","callback","textType","reader","FileReader","onload","readAsText","fileRead","onChange","extensions","readContent","myFileReader","show","htmlNode","clearAllTimeouts","highestTimeoutId","clearTimeout","getStackTrace","sliceCalls","stack","getCaller","stacksToSkip","isFirstTimeCalledByThisLine","caller","gotcalledby","lineKey","preventBackSlashHistoryNavigation","event","types","srcElement","$","disabled","prop","isContentEditable","is","attr","preventDefault","SetMerge","modifyFirst","_len5","iterables","_key15","_i3","_iterables","iterable","_iterator6","_step6","item","add","ArrayMergeU","arr1","_len6","arr2","_key16","ArrayMerge0","ArrayMerge","_len7","_key17","unique","arrtarget","_len8","arrays","_key18","_iterator7","_step7","arri","_iterator8","_step8","ArrayAdd","_iterator9","_step9","prototype","throwIfContained","getType","param","_param$constructor","constructor","stringCompare","s1","s2","endsWith","suffix","_iterator10","_step10","suf","lastIndexOf","arrayMergeInPlace","_len9","otherArrs","_key19","_i4","_otherArrs","getEndingNumber","ignoreNonNumbers","allowDecimal","numberEnd","parseFloat","increaseEndingNumber","allowLastNonNumberChars","increaseWhile","regexpstr","matches","RegExp","prefix","num","shallowEqual","objA","objB","keysA","keysB","keya","isNumber","getAllPrototypes","_constructor$prototyp","_constructor$__proto_","chainoutoutrecursive","currentRecursion","maxRecursion","cache","__allprototypes","classIsExtending","subconstructor","superconstructor","_extends","includes","isObject","v","returnIfNull","returnIfUndefined","retIfArray","objectFromArray","getKey","acc","objectFromArrayValues","toBoolString","bool","ifNotBoolean","fromBoolString","allowNull","allowUndefined","arrayDifference","starting","final","removed","Uarr","arraySubtract","added","objectDelta","old","neww","deep","newwobj","oldobj","diff","objdiff","changed","subold","subnew","removedprefix","unchanged","flattenObjectToRoot","pathseparator","pre","assign","ObjectToAssignementStrings","maxkeylength","maxsubpaths","maxvallength","toolongreplacer","quotestrings","valueseparator","filterrow","rowpaths","flatten","halfpath","start","end","ceil","halfval","halfsubpaths","bestpathsize","best","countsize","total","arrelem","filterbest","row","pathlength","fullstr","fullpath","fullvalue","p","download","filename","htmla","blob","Blob","endings","blobUrl","URL","createObjectURL","style","display","href","appendChild","click","revokeObjectURL","formatXml","xml","reg","wsexp","contexp","replace","pad","formatted","lines","indent","lastType","transitions","ln","single","Boolean","closing","opening","fromTo","padding","j","circularStringify","replacer","space","maxDepth_unsupported","getFirstNumber","allowDecimalDot","allowDecimalComma","valueifmismatch","commamode","floatregex","intregex","tmpindex","isEmptyObject","pairArrayElementsRepeatFunc","pairArrayElementsReducerFunc","accumulator","array","pairArrayElements","withRepetitions","decomment_all","decomment_line","decomment_block","trimLines","uppercaseFirstLetter","toUpperCase","wrapUserFunction","stringMiddleCut","maxLength","ellipsisChar","asArray","midpoint","toremove","lstrip","rstrip","invertHex","transformGrays","ee","abs","rs","gs","bs","hs","parentUntil","tagName","parentElement","paletteSplit","palette","number","_i5","_Object$entries","entry","mergeNamedArray","classes","_iterator11","_step11","_clipboardCopy","_callee3","onSuccess","onFailure","_callee3$","_context3","navigator","clipboard","writeText","then","clipboardCopy_old","clipboardCopy","_x2","_x3","_x4","clipboardinput","position","top","select","execCommand","clearSelection","toNamedArray","larr","darr","maxID","idPrefix","getID","idgenerator","idgenerator$","_context4","DDate","addDay","date","offset","inplace","setDate","getDate","addMonth","setMonth","getMonth","addYear","setFullYear","getFullYear","setinfos","fileTypes","onchange","readcontent","input","files","contentObj","fileLetti","_loop","content","_input$files","contentArr","reset","setAttribute","on","trigger","_dec3","_class5","arrayIntersection","inPlace","equals","a1","a2","FocusHistoryEntry","evt","ShortDefaultEClasses","ShortAttribETypes","ShortAttribSuperTypes","EString","EByte","EShort","EInt","ELong","EFloat","EDouble","ecoreprefix","ecoreclasprefix","toShortEType","toLongEType","AttribETypes","toShortEClass","toLongEClass","DefaultEClasses","SelectorOutput","jqselector","attrselector","attrRegex","exception","resultSetAttr","resultSetElem","Keystrokes","ParseNumberOrBooleanOptions","defaultValue","nullValue","undefinedValue","allowedNan","nanValue","NaN","allowBooleans","trueValue","falseValue","LoggerCategoryState","args","short_string","cat","category","raw_args","long_string","getTime","_dec4","_class6","_class7","disableConsole","enableConsole","_log","_x5","_x6","_x7","_x8","originalFunc","_len10","restArgs","_key26","String","updateLoggerComponent","_len11","_key27","lastError","_len12","_key28","_len13","_key29","e1","_len14","_key30","_len15","_key31","get_loggercomponent","_loggerComponent","short_str","update","messageMapping","setState","_defineProperty","_len16","_key32","_len17","_key33","eDevv","firstParam","_len18","restAgs","_key34","_len19","_key35","exDevv","_len20","_key36","exx","_len21","_key37","ii","_len22","_key38","ll","_len23","_key39","ww","_len24","_key40","FileReadTypeEnum","image","audio","video","AndManyOthersButThereAreTooMuch","OrJustPutFileExtension"],"sources":["C:/d/Programming/web/jodel-mde/src/common/U.ts"],"sourcesContent":["// import * as detectzoooom from 'detect-zoom'; alternative: https://www.npmjs.com/package/zoom-level\r\n// import {Mixin} from \"ts-mixer\";\r\nimport type {\r\n    AbstractConstructor,\r\n    Constructor,\r\n    Dictionary,\r\n    DocString,\r\n    GObject,\r\n    Pointer,\r\n    PrimitiveType,\r\n    Temporary,\r\n    LPointerTargetable,\r\n    DPointerTargetable,\r\n} from \"../joiner\";\r\nimport {\r\n    DClassifier,\r\n    DModelElement,\r\n    Json,\r\n    JsType,\r\n    LClassifier,\r\n    LModelElement,\r\n    LNamedElement,\r\n    LogicContext,\r\n    MyError,\r\n    RuntimeAccessible,\r\n    RuntimeAccessibleClass, store,\r\n    windoww\r\n} from \"../joiner\";\r\nimport Swal from \"sweetalert2\";\r\nimport Storage from '../data/storage';\r\nimport {compressToUTF16, decompressFromUTF16} from \"async-lz-string\";\r\nimport {NumberControl, PaletteControl, PaletteType, PathControl, StringControl} from \"../view/viewElement/view\";\r\nimport tinycolor from \"tinycolor2\";\r\nimport util from \"util\";\r\nimport Convert from \"ansi-to-html\";\r\n// var Convert = require('ansi-to-html');\r\n// import KeyDownEvent = JQuery.KeyDownEvent; // https://github.com/tombigel/detect-zoom broken 2013? but works\r\n\r\nconsole.warn('loading ts U log');\r\n\r\n@RuntimeAccessible('Color')\r\nexport class Color {\r\n    r: number;\r\n    g: number;\r\n    b: number;\r\n\r\n    constructor(r: number, g: number, b: number) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n    }\r\n\r\n    static fromHex(hex:string): Color {\r\n        return undefined as any;\r\n    }\r\n    static fromHLS({h, l, s}:{h: number, l:number, s: number}): Color {\r\n        return undefined as any;\r\n    }\r\n    getHex(): string {\r\n        return undefined as any;\r\n    }\r\n    mixWith(c: Color): void {\r\n\r\n    }\r\n    getHLS(): {h: number, l:number, s: number} {\r\n        return undefined as any;\r\n    }\r\n    duplicate(): Color {\r\n        return undefined as any;\r\n    }\r\n}\r\n\r\n\r\n@RuntimeAccessible('U')\r\nexport class U {\r\n\r\n    static async decompressState(state: string): Promise<string> {\r\n        return await decompressFromUTF16(state);\r\n    }\r\n    static async compressedState(): Promise<string> {\r\n        return await compressToUTF16(JSON.stringify(store.getState()));\r\n    }\r\n    static isOffline(): boolean {\r\n        return Storage.read('offline') === 'true';\r\n    }\r\n    static refresh(): void {\r\n        window.location.reload();\r\n    }\r\n\r\n    public static inspect(object: any, showHidden?: boolean, depth?: number | null, color?: boolean): string {\r\n        let o0 = object;\r\n        object = object?.__raw || object;\r\n        if (Array.isArray(object)) object = object.map(o => o?.__raw || o);\r\n        // todo: use lodash \"clonedeepwith\" to clean proxies\r\n        console.error(\"inspect\", {o0, object});\r\n        return util.inspect(object, showHidden, depth, color);\r\n    }\r\n\r\n    public static objectInspect(val: GObject, depth: number = 2, color: boolean = true, showHidden = true): string{\r\n        let ansiConvert = (window as any).ansiConvert;\r\n        if (!ansiConvert) (window as any).ansiconvert = ansiConvert = new Convert();\r\n        return U.replaceAll(ansiConvert.toHtml(U.inspect(val, showHidden, depth, color)),\r\n            \"style=\\\"color:#FFF\\\"\", \"style=\\\"color:#000\\\"\");\r\n    }\r\n\r\n    public static cropStr(msg: string, atStart: number = 10, atEnd: number = 0): string{\r\n        let arr = msg.split('\\n');\r\n        if (atEnd + atStart < arr.length) {\r\n            //arr = arr.slice(0, 10) + arr.slice(10, 0);\r\n            arr.splice(atStart, arr.length - atStart - atEnd, '...')\r\n        }\r\n        return arr.join('\\n');\r\n    }\r\n\r\n    static extractByKey(dict: Dictionary, path: string): PrimitiveType[]|undefined {\r\n        const keys = path.split('.');\r\n        const topic = keys[0];\r\n        const data = dict[topic];\r\n        const values: PrimitiveType[] = [];\r\n        if(!Array.isArray(data)) return undefined;\r\n        for(const d of data) {\r\n            let value = d;\r\n            for (const k of keys) if (value.hasOwnProperty(k)) value = value[k];\r\n            values.push(value);\r\n        }\r\n        return values;\r\n\r\n    }\r\n\r\n    static extractKeys(dict: Dictionary): string[] {\r\n        const keys: string[] = [];\r\n        function traverse(obj: any, path: string) {\r\n            for (const key in obj) {\r\n                if (typeof obj[key] === 'object') traverse(obj[key], path ? `${path}.${key}` : key);\r\n                else keys.push(path ? `${path}.${key}` : key);\r\n            }\r\n        }\r\n        for (const key in dict) {\r\n            traverse(dict[key][0], key);\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    // damiano: eseguire una funzione costa in performance, anche se è brutto fare questi cast\r\n    static wrapper<T>(obj: any): T {\r\n        return obj as unknown as T;\r\n    }\r\n    // damiano: mi sa che c'era un metodo l.__serialize or something\r\n    static json(dElement: GObject): Json {\r\n        return JSON.parse(JSON.stringify(dElement.__raw));\r\n    }\r\n\r\n    static hexToPalette(...hexs: string[]): PaletteControl{\r\n        return {type: \"color\", value: hexs.map( hex => {\r\n                if (hex[0] === '#') hex = hex.substring(1);\r\n                let r: number, g: number, b: number, a: number = 1;\r\n                if (hex.length === 4) {\r\n                    a = Number.parseInt('0x' + hex[3] + hex[3])/255;\r\n                    hex = hex.substring(0, 3);\r\n                }\r\n                if (hex.length === 7) {\r\n                    a = Number.parseInt('0x' + hex[5] + hex[6])/255;\r\n                    hex = hex.substring(0, 6);\r\n                }\r\n                Log.exDev(hex.length !== 3 && hex.length !== 6, \"invalid hex length\", {hex, a});\r\n                let i: number = 0;\r\n                if (hex.length === 3) {\r\n                    r =  Number.parseInt('0x' + hex[i] + hex[i++]);\r\n                    g =  Number.parseInt('0x' + hex[i] + hex[i++]);\r\n                    b =  Number.parseInt('0x' + hex[i] + hex[i]);\r\n                }\r\n                else {\r\n                    r =  Number.parseInt('0x' + hex[i++] + hex[i++]);\r\n                    g =  Number.parseInt('0x' + hex[i++] + hex[i++]);\r\n                    b =  Number.parseInt('0x' + hex[i++] + hex[i]);\r\n                }\r\n                return {r,g,b,a} as tinycolor.ColorFormats.RGBA;\r\n            })};\r\n    }\r\n    public static fatherChain(me: LModelElement): Pointer<DModelElement, 0, 'N', LModelElement> {\r\n        if(!me) return [];  // without this line go through delete error\r\n        const fathers: Pointer<DModelElement, 0, 'N', LModelElement>= [me.id];\r\n        const toCheck: LModelElement[] = [me];\r\n        while(toCheck.length > 0) {\r\n            const element = toCheck.pop();\r\n            if(element && element.father) {\r\n                fathers.push(element.father.id);\r\n                toCheck.push(element.father);\r\n            }\r\n        }\r\n        return fathers;\r\n    }\r\n\r\n    /// maxDepth = 2 is the minimum to check the content of objects inside usageDeclarations or node state. like node.errors.naming\r\n    static isShallowEqualWithProxies(obj1: GObject, obj2: GObject, skipKeys: Dictionary<string, any>={}, out?: {reason?: string},\r\n                                     depth: number = 0, maxDepth: number = 2, returnIfMaxDepth:boolean = false): boolean {\r\n        let tobj1 = obj1 === null ? 'null' : typeof obj1;\r\n        let tobj2 = obj2 === null ? 'null' : typeof obj2;\r\n        if (obj1 === obj2) {\r\n            // if (out) { out.reason = \"identical objects\"; }\r\n            return true; }\r\n        if (tobj1 !== tobj2) { if (out) { out.reason = \"type changed: \" + tobj1 + \" --> \" + tobj2; } return false; }\r\n\r\n        // at this point: same type, but different values\r\n        switch (tobj1) {\r\n            default: // primitive with different values\r\n                console.error(\"unexpected case in isshallowequal:\", {tobj1, obj1, obj2});\r\n                if (out) {\r\n                    if (undefined === tobj1) out.reason = 'primitive value newly introduced';\r\n                    else if (undefined === tobj2) out.reason = 'primitive value got deleted';\r\n                    else out.reason = 'primitive value changedd';\r\n                }\r\n                return false;\r\n            case 'string': case 'boolean': // primitive with different values\r\n                if (out) {\r\n                    if (undefined === tobj1) out.reason = 'primitive value newly introduced';\r\n                    else if (undefined === tobj2) out.reason = 'primitive value got deleted';\r\n                    else out.reason = 'primitive value changedd';\r\n                }\r\n                return false;\r\n            case \"number\": // if both re nan it fails\r\n                // NB: infinities are not nan, and they compare with === like normal numbers. weird js...\r\n                if (isNaN(obj1 as any) && isNaN(obj2 as any)) return true;\r\n                if (out) out.reason = 'number changed';\r\n                return false;\r\n\r\n            case \"function\":\r\n                if (obj1.toString() === obj2.toString()) break;\r\n                if (out) out.reason = 'function body changed';\r\n                return false;\r\n\r\n            case \"object\":\r\n                let o1Raw = obj1.__raw;\r\n                let o2Raw = obj2.__raw;\r\n                if (o1Raw) {\r\n                    if (!o2Raw) {\r\n                        if (out) out.reason = o1Raw.className + 'replaced by another object type:' + o2Raw?.className;\r\n                        return false;\r\n                    }\r\n                    obj1 = o1Raw;\r\n                    obj2 = o2Raw;\r\n                }\r\n                // for proxies and DObjects\r\n                if (obj1.clonedCounter !== undefined && obj2.clonedCounter !== obj1.clonedCounter) {\r\n                    if (out) out.reason = 'clonedCounter difference ' + obj1.clonedCounter+ ' != ' + obj2.clonedCounter;\r\n                    return false;\r\n                }/*\r\n                if (obj1.className !== obj2.className) {\r\n                 removed: too unlikely to happen that a DObject is raplaced in the same path with another type of DObject with same clonedCounter\r\n                 nd it's checked anyway in for(let key in obj1)\r\n                    if (out) out.reason = o1Raw.className + 'replaced by another object type:' + o2Raw?.className;\r\n                    return false;\r\n                }*/\r\n                if (Array.isArray(obj1)) {\r\n                    if (obj1.length !== obj2.length) {\r\n                        if (out) out.reason = 'array length different: ' + obj1.length + \" !== \" + obj2.length;\r\n                        return false;\r\n                    }\r\n                    if (!Array.isArray(obj2)){\r\n                        if (out) out.reason = 'array became an object';\r\n                        return false;\r\n                    }\r\n                }\r\n                if (depth > maxDepth) {\r\n                    // to debug and see where is too deep, make returnIfMaxDepth = false, so the path is displayed in out.reason\r\n                    if (out) out.reason = 'max depth reached, assumed ' + returnIfMaxDepth;\r\n                    return returnIfMaxDepth;\r\n                }\r\n                for (let key in obj1) {\r\n                    if (key in skipKeys) continue;\r\n                    let oldp: any = obj2[key];\r\n                    let newp: any = obj1[key];\r\n                    if (oldp === newp) continue;\r\n                    if (!U.isShallowEqualWithProxies(newp, oldp, skipKeys, out, depth +1, maxDepth, returnIfMaxDepth)) {\r\n                        if (out) out.reason = '['+key+']'+out.reason;\r\n                        return false;\r\n                    }\r\n                }\r\n                // just check for keys that were in props and are not in nextProps\r\n                for (let key in obj2) {\r\n                    if ((key in skipKeys) || (key in obj1)) continue;\r\n                    if (out) out.reason = \"deleted subobject property: \" + key;\r\n                    return false;\r\n                }\r\n            // else retIfMaxDepthReached; split the above if\r\n        }\r\n\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    public static deepEqual (x: GObject, y: GObject): boolean {\r\n        const tx = typeof x, ty = typeof y;\r\n        return x && y && tx === 'object' && tx === ty ? (\r\n            Object.keys(x).length === Object.keys(y).length && Object.keys(x).every(key => U.deepEqual(x[key], y[key]))\r\n        ) : (x === y);\r\n    }\r\n\r\n    public static sleep(s: number): Promise<void> {\r\n        return new Promise((resolve) => setTimeout(resolve, s * 1000));\r\n    }\r\n\r\n    public static getRandomString(length: number): string {\r\n        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n        let randomString = '';\r\n        let index = 0;\r\n        while(index < length) {\r\n            const randomNumber = Math.floor(Math.random() * characters.length);\r\n            randomString += characters.charAt(randomNumber);\r\n            index += 1;\r\n        }\r\n        return randomString;\r\n    }\r\n\r\n    public static alert(title: string, text: string) {\r\n        let color = 'text-';\r\n        switch(title.toLowerCase()) {\r\n            case 'error': color += 'danger'; break;\r\n            default: color += 'primary'\r\n        }\r\n        let html = '<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>';\r\n        html += `<div><b><label class='fs-5 mb-2 text-uppercase ${color}'>${title}</label></b><hr/>`;\r\n        html += `<label class='fs-6 mt-3'>${text}</label><br/>`;\r\n        const result = Swal.fire({\r\n            html: html,\r\n            backdrop: false,\r\n            showCloseButton: true,\r\n            showConfirmButton: false\r\n            //confirmButtonText: 'GOT IT'\r\n        })\r\n    }\r\n\r\n    public static popup(element: any) {\r\n        let html = '<style>body.swal2-no-backdrop .swal2-container {background-color: rgb(0 0 0 / 60%) !important}</style>'+ element;\r\n        const result = Swal.fire({\r\n            html: html,\r\n            backdrop: false,\r\n            showCloseButton: true,\r\n            showConfirmButton: false\r\n            //confirmButtonText: 'GOT IT'\r\n        })\r\n    }\r\n    public static filteredPointedBy(data: LModelElement, label: string): LModelElement[] {\r\n        const models: LModelElement[] = [];\r\n        for(let dict of data.pointedBy) {\r\n            const pointedBy = dict.source.split('.');\r\n            if(pointedBy.length === 3 && pointedBy[2] === label) {\r\n                models.push(LModelElement.fromPointer(pointedBy[1]));\r\n            }\r\n        }\r\n        return models;\r\n    }\r\n\r\n    public static getFatherFieldToDelete(data: LModelElement): keyof DModelElement|null {\r\n        const father = data.father;\r\n        let field = '';\r\n        switch(father.className + '|' + data.className) {\r\n            // DPackage\r\n            case 'DModel|DPackage': field = 'packages'; break;\r\n            case 'DPackage|DPackage': field = 'subpackages'; break;\r\n            // DEnumerator and DClass\r\n            case 'DPackage|DEnumerator':\r\n            case 'DPackage|DClass': field = 'classifiers'; break;\r\n            // DAttribute\r\n            case 'DClass|DAttribute': field = 'attributes'; break;\r\n            // DReference\r\n            case 'DClass|DReference': field = 'references'; break;\r\n            // DOperation\r\n            case 'DClass|DOperation': field = 'operations'; break;\r\n            // DEnumLiteral\r\n            case 'DEnumerator|DEnumLiteral': field = 'literals'; break;\r\n            // DObject\r\n            case 'DModel|DObject': field = 'objects'; break;\r\n            // DParameter\r\n            case 'DOperation|DParameter': field = 'parameters'; break;\r\n            // DValue\r\n            case 'DObject|DValue': field = 'features'; break;\r\n            // Error\r\n            default: return null;\r\n        }\r\n        return field as keyof DModelElement;\r\n    }\r\n\r\n    public static initializeValue(typeclassifier: undefined|DClassifier|LClassifier|Pointer<DClassifier, 1, 1, LClassifier>): string {\r\n        // if(!classifier) return 'null';\r\n        const pointer: Pointer = typeof typeclassifier === 'string' ? typeclassifier : (typeclassifier as DClassifier)?.id;\r\n        const me: LNamedElement = LNamedElement.fromPointer(pointer);\r\n        switch(me?.name) {\r\n            default:\r\n            case 'EString': return '';\r\n            case 'EChar':  return 'a';\r\n            case 'EInt': return '0';\r\n            case 'ELong': return '0';\r\n            case 'EShort': return '0';\r\n            case 'Byte': return '0';\r\n            case 'EFloat': return '0';\r\n            case 'EDouble': return '0';\r\n            case 'EBoolean': return 'false';\r\n            case 'EDate': return new Date().toJSON().slice(0,10);\r\n        }\r\n        return 'null';\r\n    }\r\n\r\n    public static orderChildrenByTimestamp(context: LogicContext): LModelElement[] {\r\n        const children = context.proxyObject.children;\r\n        if(children && children.length > 0) {\r\n            let orderedChildren = new Map<number, LModelElement>();\r\n            for(let child of children) {\r\n                let timestamp = child.id.slice(-13);\r\n                orderedChildren.set(+timestamp, child);\r\n            }\r\n            orderedChildren = new Map([...orderedChildren.entries()].sort());\r\n            return [...orderedChildren.values()];\r\n        } else return [];\r\n    }\r\n\r\n\r\n    public static followPath(base: GObject, path: string): {chain: GObject[], lastObject: GObject, keys:string[], lastkey: string, lastval: any, failedRemainingPath: string[]} {\r\n        let patharr = path.split('.');\r\n        let base0 = base;\r\n        let ret: {chain: GObject[], lastObject: GObject, keys: string[], lastkey: string, lastval: any, failedRemainingPath: string[]}  = {} as any;\r\n        ret.keys = patharr;\r\n        ret.chain = [base];\r\n        let lastObject = base;\r\n\r\n        for (let i = 0; i < patharr.length; i++) {\r\n            let path = ret.lastkey = patharr[i];\r\n            lastObject = base;\r\n            base = base[path];\r\n            ret.chain.push(base);\r\n            if (typeof base !== \"object\" || i + 1 === patharr.length) {\r\n                ret.failedRemainingPath = patharr.slice(i);\r\n                ret.lastval = base;\r\n                ret.lastObject = lastObject;\r\n                return ret;\r\n            }\r\n        }\r\n        throw new Error(\"followPath should never reach here\");\r\n        return ret;\r\n    }\r\n\r\n    static multiReplaceAllKV(a: string, kv: string[][] = []): string {\r\n        const keys: string[] = [];\r\n        const vals: string[] = [];\r\n        let i: number;\r\n        for (i = 0; i < kv.length; i++) { keys.push(kv[i][0]); vals.push(kv[i][0]); }\r\n        return U.multiReplaceAll(a, keys, vals); }\r\n\r\n    // if replacement is empty, it will be filled with '';\r\n    // if replacement length < searchText, replacement will be filled with copies of his elements cycling from 0 to his length until his length matches searchText.length\r\n    static multiReplaceAll(a: string, searchText: string[] = [], replacement: string[] = []): string {\r\n        // Log.ex(searchText.length !== replacement.length, 'search and replacement must be have same length: ' + searchText.length + \"vs\" + replacement.length + \" \" +JSON.stringify(searchText) + \"   \" + JSON.stringify(replacement));\r\n        let i = -1;\r\n        while (replacement.length !== 0 && replacement.length < searchText.length) replacement.push(replacement[++i]);\r\n        i = -1;\r\n        while (++i < searchText.length) { a = U.replaceAll(a, searchText[i], replacement[i]); }\r\n        return a; }\r\n\r\n    static replaceAll(str: string, searchText: string, replacement: string | undefined, debug: boolean = false, warn: boolean = true): string {\r\n        if (!str) { return str; }\r\n        return str.split(searchText).join(replacement||''); }\r\n\r\n    static toFileName(a: string = 'nameless.txt'): string {\r\n        if (!a) { a = 'nameless.txt'; }\r\n        a = U.multiReplaceAll(a.trim(), ['\\\\', '//', ':', '*', '?', '<', '>', '\"', '|'],\r\n            ['[lslash]', '[rslash]', ';', '°', '_', '{', '}', '\\'', '!']);\r\n        return a;\r\n    }\r\n\r\n\r\n    // warn: this check if the scope containing the function is strict, to check if a specific external scope-file is strict\r\n    // you have to write inline the code:        var isStrict = true; eval(\"var isStrict = false\"); if (isStrict)...\r\n    // @ts-ignore\r\n    public static isStrict: boolean = ( function() { return !this; })();\r\n\r\n    // merge properties with first found first kept (first parameters have priority on override). only override null|undefined values, not (false|0|'') values\r\n    static objectMergeInPlace<A extends object, B extends object>(output: A, ...objarr: B[]): void {\r\n        const out: GObject = output;\r\n        if (objarr)\r\n            for (let o of objarr) {\r\n                if (o && typeof o === \"object\")\r\n                    for (let key in o) {\r\n                        // noinspection BadExpressionStatementJS,JSUnfilteredForInLoop\r\n                        out[key] ?? (out[key] = o[key]);\r\n                    }\r\n            }\r\n    }\r\n\r\n    public static log(obj: unknown, label: string = '###') {\r\n        console.clear();\r\n        console.log(label, obj);\r\n    }\r\n\r\n    static removeEmptyObjectKeys(obj: GObject): void{\r\n        for (let key of Object.keys(obj)) {\r\n            if (obj[key] === null || obj[key] === undefined) delete obj[key];\r\n        }\r\n    }\r\n\r\n    // usage example: objectMergeInPlace_conditional(baseobj, (out, key, current) => !out[key] && current[key];\r\n    // culprit of \"couldn't find intersection\" problem: condition type: (out:A&B, key: string | number, current:B, objarr?: B[], indexOfCurrent?: number) => boolean\r\n    static objectMergeInPlace_conditional<A extends GObject, B extends GObject>(output: A, condition: (...a:any)=>any, ...objarr: B[]): A & B {\r\n        const out: GObject<\"A & B\"> = output;\r\n        let i: number = 0;\r\n        for (let o of objarr) for (let key in o) { if (condition(out, key, o, objarr, i++)) out[key] = o[key]; }\r\n        return out as  A & B; }\r\n\r\n    static buildFunctionDocumentation(f: Function): {parameters: {name: string, defaultVal: string | undefined, typedesc: string | null}[], returns: string | undefined, f: Function, fname: string | undefined, isLambda: boolean, signature: string} {\r\n        Log.e(!JsType.isFunction(f), 'getFunctionSignature() parameter must be a function', f);\r\n        // let parameters: {name: string, defaultVal: string, typedesc: string}[] = []; //{name: '', defaultVal: undefined, typedesc: ''};\r\n        let ret: {parameters: {name: string, defaultVal: string | undefined, typedesc: string | null}[], returns: string | undefined, f: Function, fname: string | undefined, isLambda: boolean, signature: string}\r\n            = {parameters: [], returns: undefined, f: f, fname: undefined, isLambda: null as Temporary, signature: ''};\r\n        let str: string = f.toString();\r\n        let starti: number = str.indexOf('(');\r\n        let endi: number;\r\n        let parcounter: number = 1;\r\n        for (endi = starti + 1; endi < str.length; endi++) {\r\n            if (str[endi] === ')' && --parcounter === 0) break;\r\n            if (str[endi] === '(') parcounter++; }\r\n\r\n        let parameterStr = str.substring(starti + 1, endi);\r\n        // console.log('getfuncsignature starti:', starti, 'endi', endi, 'fname:', str.substr(0, starti), 'parameterStr:', parameterStr);\r\n        ret.fname = str.substr(0, starti).trim();\r\n        ret.fname = ret.fname.substr(0, ret.fname.indexOf(' ')).trim();\r\n        // 2 casi: anonimo \"function (par1...){}\" e \"() => {}\", oppure nominato: \"function a1(){}\"\r\n        if (ret.fname === '' || ret.fname === 'function') ret.fname = undefined; // 'anonymous function';\r\n\r\n\r\n\r\n        let returnstarti: number = str.indexOf('/*', endi + 1);\r\n        let returnendi: number = -1;\r\n        let bodystarti: number = str.indexOf('{', endi + 1);\r\n        if (returnstarti === -1 || bodystarti !== -1 && bodystarti < returnstarti) {\r\n            // no return type or comment is past body\r\n            ret.returns = undefined;\r\n        } else {\r\n            returnendi = str.indexOf('*/', returnstarti + 2);\r\n            ret.returns = str.substring(returnstarti + 2, returnendi).trim();\r\n            bodystarti = str.indexOf('{', returnendi); }\r\n        if (ret.returns === '') ret.returns = undefined;\r\n\r\n        // is lambda if do not have curly body or contains => between return comment and body\r\n        // console.log('isLambda:', bodystarti, str.substring(Math.max(endi, returnendi)+1, bodystarti));\r\n        ret.isLambda =  bodystarti === -1 || str.substring((window as any).Math.max(endi, returnendi)+1, bodystarti).trim() === '=>';\r\n\r\n        let regexp = /([^=\\/\\,]+)(=?)([^,]*?)(\\/\\*[^,]*?\\*\\/)?,/g; // only problem: the last parameter won't match because it does not end with \",\", so i will append it everytime.\r\n        let match;\r\n        while ((match = regexp.exec(parameterStr + ','))) {\r\n            // match[0] is always the full match (not a capture group)\r\n            // match[2] can only be \"=\" or empty string\r\n            // nb: match[4] can be \"/*something*/\" or \",\" a single , without spaces.\r\n            let par: {name: string, defaultVal: string | undefined, typedesc: string | null} = {name: match[1], defaultVal: match[3], typedesc: match[4] && match[4].length > 1 ? match[4] : null};\r\n            par.name = par.name.trim();\r\n            par.defaultVal = par.defaultVal ? par.defaultVal.trim() : undefined;\r\n            par.typedesc = par.typedesc && par.typedesc && par.typedesc.length > 1 ? par.typedesc.substring(2, par.typedesc.length - 2).trim() || null : null;\r\n            ret.parameters.push(par); }\r\n        // set signature\r\n\r\n        ret.signature = '' + (ret.fname ? '/*' + ret.fname + '*/' : '') + '(';\r\n        let i: number;\r\n        for (i = 0; i < ret.parameters.length; i++) {\r\n            let par = ret.parameters[i];\r\n            ret.signature += (i === 0 ? '' : ', ') + par.name + (par.typedesc ? '/*' + par.typedesc + '*/' : '') + (par.defaultVal ? ' = ' + par.defaultVal : '');\r\n        }\r\n        ret.signature += ')' + (ret.returns ? '/*' + ret.returns + '*/' : '');\r\n        return ret; }\r\n\r\n\r\n\r\n    // NB: need to use result.apply(context) to have a usable \"this\"\r\n    // if you want to pass a parameter to the function, pass it through scope insteand !! AND UNDECLARE the parameter in function string signature !!\r\n    //if inner funcstr have parameters, need to declare them as codestrParamNames arr, and pass them in that order, after the scope which is fixed as first argument.\r\n    // rest values are declared with ellipsis in codestrParamNames\r\n    // !!! scope passed here, is only used for keys. values are not bound. scope is set as first parameter when you call the function.\r\n    // context is bound, but can be re-assigned by calling .bind(), .call() or .apply(), so neither context nor scope assigned in parsing phase are final.\r\n    // innerfunc params do not have to match the name on the string function, but only the correct amount. they can have any name i think, but i list them correctly to documentate.\r\n    public static parseFunctionWithContextAndScope<ParamNames extends string[], T extends Function = Function, TT extends GObject | undefined = GObject>(\r\n        codeStr0: string | Function, context0: GObject | undefined, scope0: TT, codestrParamNames?: ParamNames, protectShallowValues: boolean = false, doIdentifierValidation: boolean = false):\r\n        (TT extends undefined ? (...params: any)=>any : (scopee:TT, ...paramss: { [K in keyof ParamNames]: any;})=>any){\r\n        if (!codestrParamNames) codestrParamNames = [] as any;\r\n\r\n        let codeStr: string = typeof codeStr0 === \"function\" ? codeStr0.toString() : codeStr0;\r\n        let scopeParams: string = '';\r\n        let scope: GObject | undefined;\r\n        let context: GObject | undefined;\r\n        if (protectShallowValues) {\r\n            if (scope0) { //scope = {...scope0}; scope.__proto__ = scope0.__proto__; // for...in gets values in __proto__ too, {...o} instead gets only hasOwnProperty copied\r\n                scope = {};\r\n                for (let k in scope0) scope[k] = scope0[k];\r\n            } else scope = undefined;\r\n            if (context0) { // context = {...context0}; context.__proto__ = context0.__proto__;\r\n                context = {};\r\n                for (let k in context0) context[k] = context0[k];\r\n            } else context = undefined;\r\n        } else { scope = scope0; context = context0; }\r\n\r\n\r\n        if (scope) {\r\n            let scopekeys: string[] = Object.keys(scope);\r\n            if (doIdentifierValidation) scopekeys.map((key)=>{\r\n                key = key?.trim() || '';\r\n                if (!key || !U.validIdentfierRegexp.test(key)) return undefined;\r\n                return key;\r\n            }).filter(k=>!!k);\r\n            scopeParams = '{'+scopekeys.join(',')+'}';\r\n        }\r\n\r\n        let innerFuncParams = (codestrParamNames as string[]).join(',');\r\n        let _jevalfunc = undefined as any; // is set by eval\r\n        const evalmode = false;\r\n        console.log('parseFunctionWithContextAndScope', {codeStr, scope, context, params:{scopeParams, innerFuncParams}});\r\n        scopeParams = scopeParams && innerFuncParams ? scopeParams + ',' + innerFuncParams : scopeParams + innerFuncParams;\r\n        if (evalmode) {\r\n            codeStr = \"_jevalfunc = function (\"+scopeParams+\") { return (\"+codeStr+\")(\"+innerFuncParams+\") }\";\r\n            eval(codeStr);\r\n        } else {\r\n            _jevalfunc = new Function(scopeParams, \" return (\"+codeStr+\")(\"+innerFuncParams+\")\");\r\n        }\r\n\r\n        console.log('parseFunctionWithContextAndScope', {_jevalfunc, params:{scopeParams}});\r\n\r\n        if (context) return _jevalfunc.bind(context);\r\n        else return _jevalfunc;\r\n    }/*\r\n    public static evalInContextAndScope<T = any>(...a:any):any {return undefined}\r\n    public static evalInContextAndScopeNew<T = any>(...a:any):any {return undefined}*/\r\n    public static evalInContextAndScopeNew<T = any>(codeStr: string | ((...a:any)=>any), context0: GObject, injectScopeToo: boolean,\r\n                                                    protectShallowValues?: boolean, doIdentifierValidation?: boolean): T {\r\n        return U.evalInContextAndScope(codeStr, context0, injectScopeToo ? context0 : undefined, protectShallowValues, doIdentifierValidation);\r\n    }\r\n\r\n    // important! this is a simplified version. the correct one allows unicode chars and is 11kb long of regex expression\r\n    public static validIdentfierRegexp = /^[a-zA-Z_$][0-9a-zA-Z_$]*$/;\r\n\r\n    // warn: if return is not explicitly inserted (if that's the case set imlicitReturn = false) with a scope and the code have multiple statemepts it will fail.\r\n    // can modify scope AND context\r\n    // warn: can access global scope (window)\r\n    // if the context (this) is missing it will take the scope as context.\r\n    // warn: cannot set different scope and context, \"this\" della funzione sovrascrive anche il \"this\" interno allo scope come chiave dell'oggetto\r\n    // warn: !context && scope is impossible, so it gets autofixed by assigning context = scope; check Log messages inside function for details.\r\n    // warn: context && scope is impossible if context !== scope and cannot be hotfixed, that will cause a crash.\r\n    public static evalInContextAndScope<T = any>(codeStr: string | ((...a:any)=>any), scope0: GObject | undefined, context0?: GObject,\r\n                                                 protectShallowValues?: boolean, doIdentifierValidation?:boolean): T {\r\n        // console.log('evalInContextAndScope', {codeStr, scope, context});\r\n        // scope per accedere a variabili direttamente \"x + y\"\r\n        // context per accedervi tramite this, possono essere impostati come diversi.\r\n        if (!scope0 && !context0) { Log.ex(true, 'evalInContextAndScope: must specify at least one of scope || context', {codeStr, scope0, context0}); }\r\n\r\n        // scope.this = scope.this || context || scope; non funziona\r\n        // console.log('\"with(this){ return eval( \\'\" + codeStr + \"\\' ); }\"', \"with(this){ return eval( '\" + codeStr + \"' ); }\");\r\n        // eslint-disable-next-line no-restricted-syntax,no-with\r\n        // if (allowScope && allowContext) { return function(){ with(this){ return eval( '\" + codeStr + \"' ); }}.call(scopeAndContext); }\r\n        // if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr + \"' ); }\").call(scopeAndContext); }\r\n        let _ret: T = null as any;\r\n        let scope: GObject | undefined;\r\n        let context: GObject | undefined;\r\n        if (protectShallowValues) {\r\n            if (scope0) { scope = {...scope0, __proto__: scope0.__proto__}; scope.__proto__ = scope0.__proto__; } else scope = undefined;\r\n            if (context0) { context = {...context0, __proto__: context0.__proto__}; context.__proto__ = context0.__proto__; } else context = undefined;\r\n        } else { scope = scope0; context = context0; }\r\n\r\n        Log.w(!!(!context && scope),\r\n            \"evalInContextAndScope() Context is mandatory, as scope && !context case is not working properly \\n\" +\r\n            \"because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\\n\" +\r\n            \"Autofixed by assigning context = scope;\");\r\n        Log.eDev(!!((context && scope) && (context !== scope)),\r\n            \"evalInContextAndScope() Context and scope cannot be different if both present.\\n\" +\r\n            \"Because scope is simulated by declaring variables pointing to \\\"this\\\" objects instead of doing a full deep copy.\");\r\n        if (!context) context = scope; // se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\r\n\r\n\r\n        /*\r\n        if (allowScope && allowContext) { return new Function( \"with(this){ return eval( '\" + codeStr.replace(/'/g, \"\\\\'\") + \"' ); }\").call(scopeAndContext); }\r\n        if (!allowScope && allowContext) { return new Function( \"return eval( '\" + codeStr + \"' );\").call(scopeAndContext); }\r\n        if (allowScope && !allowContext) { return eval(\"with(scopeAndContext){ \" + codeStr + \" }\"); }*/\r\n//      U.pe(!!scope && U.isStrict(), 'cannot change scope while in strict mode (\"use strict\")');\r\n        let prefixDeclarations: string = \"\", postfixDeclarations: string = '';\r\n        if (scope) {\r\n            if (U.isStrict) {\r\n                for (let key in scope) {\r\n                    if (doIdentifierValidation) {\r\n                        key = key.trim();\r\n                        if (!key || !U.validIdentfierRegexp.test(key)) continue;\r\n                    }\r\n                    // anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\r\n                    prefixDeclarations += \"const \" + key + \"=this.\" + key + \";\";\r\n                    postfixDeclarations = \"\";\r\n                }\r\n            } else {\r\n                prefixDeclarations = \"with(\" + (context ? \"this._eval.\" : \"\") + \"scope){ \";\r\n                postfixDeclarations = \" }\";\r\n            }\r\n        }\r\n\r\n        if (scope && context) {\r\n            if (typeof codeStr === \"function\") { codeStr = codeStr.toString(); } // functions cannot change scope (with statement is deprecated)\r\n            (context as any)._eval = {__codeStr: codeStr}; // necessary to reach this._eval.codeStr inside the eval()\r\n            // console.log(\"evalincontextandscope: \", {fullCodeStr: prefixDeclarations + \"return eval( this._eval._codeStr );\" + postfixDeclarations, codeStr});\r\n            _ret = new (Function as any)(prefixDeclarations + \"; return eval( this._eval.__codeStr );\" + postfixDeclarations).call(context);\r\n            delete (context as any)._eval;\r\n        } else\r\n        if (!scope && context) {\r\n            if (typeof codeStr === \"function\") {\r\n                _ret = (function(...a: any){ return (codeStr as Function).call(context, ...a)}) as any;\r\n                // _ret = (...a: any)=>codeStr.call(context, ...a);\r\n            } else {\r\n                // cannot just eval(codeStr).call(context) because the result might not be a function but only a piece of code or an expression\r\n                (context as any)._eval = {__codeStr: codeStr}; // necessary to reach this._eval.codeStr inside the eval()\r\n                _ret = new (Function as any)(\"return eval( this._eval.__codeStr );\").call(context);\r\n                delete (context as any)._eval;\r\n                // this below  is not good, as i need to quote the expanded result of codeStr,\r\n                // but since it might contain quotes as well i would need to escape them too.\r\n                // _ret = new (Function as any)(\"return eval( \" + codeStr + \" );\").call(context);\r\n            }\r\n        } else\r\n        if (scope && !context) {\r\n            // NB: potrei creare lo scope con \"let key = value;\" per ogni chiave, ma dovrei fare json stringify e non è una serializzazione perfetta e può dare eccezioni(circolarità)\r\n            // console.log({isStrict: U.isStrict, eval: \"eval(\" + prefixDeclarations + codeStr + postfixDeclarations + \")\"});\r\n            if (typeof codeStr === \"function\") { codeStr = codeStr.toString(); } // functions cannot change scope (with statement is deprecated)\r\n            _ret = eval(prefixDeclarations + codeStr + postfixDeclarations); }\r\n\r\n        return _ret; }\r\n\r\n    //T extends ( ((...args: any[]) => any) | (() => any)\r\n    public static execInContextAndScope<T extends (...args: any) => any>(func: T, parameters: Parameters<T>, scope?: GObject, context?: GObject): ReturnType<T>{\r\n        Log.l(false, 'execInCtxScope', {func, parameters, scope, context});\r\n        let ret: any;\r\n        const _eval = {context, scope, func, parameters: parameters || []};\r\n        let prefixDeclarations: string = \"\", postfixDeclarations: string = '';\r\n        if (scope) {\r\n            if (U.isStrict) {\r\n                for (let key in scope) {\r\n                    // anche se li assegno non cambiano i loro valori nel contesto fuori dall'eval, quindi lancio eccezioni con const.\r\n                    prefixDeclarations += \"const \" + key + \" = this.\" + key + \"; \";\r\n                    postfixDeclarations = \"\";\r\n                }\r\n            } else {\r\n                prefixDeclarations = \"with(\" + (context ? \"this._eval.\" : \"\") + \"scope){ \";\r\n                postfixDeclarations = \" }\";\r\n            }\r\n        }\r\n        if (!scope && !context) { Log.ex(true, 'execInContextAndScope: must specify at least one of scope || context', {func, scope, context}); }\r\n        if (!context) context = scope; // se creo un nuovo contesto pulisco anche lo scope dalle variabili locali di questa funzione.\r\n        if (scope && context) {\r\n            context._eval = _eval;\r\n            // will the scope work with \"with\" outside the function body?\r\n            ret = new Function( prefixDeclarations + \"return this._eval.func.apply(this._eval.context, this._eval.parameters);\" + postfixDeclarations).call(context);\r\n            delete context._eval;\r\n        }\r\n        if (!scope && context) { return _eval.func.apply(_eval.context, _eval.parameters); }\r\n        if (scope && !context) {\r\n            // todo: non credo funzioni, _eval non dovrebbe essere accessibile dopo la \"with\" forse devo fare scope._eval = _eval;\r\n            return eval(prefixDeclarations + \"return _eval.func(..._eval.parameters);\" + postfixDeclarations); }\r\n        return ret; }\r\n\r\n    // warn: aggiunge un layer di scope ma ha accesso anche agli scope precedenti (del chiamante della funzione e superiori)\r\n    // warn2: può modificare lo scope internamente all'eval ma ogni cambiamento è perso all'uscita dell'esecuzione (modifica copie)\r\n    // warn3: gli oggetti nested variabili dentro oggetti dello scope) sono modificabili con modifiche persistenti perchè vengono pasate per puntatore.\r\n    // warn4: richiede un return per leggere il valore\r\n    // insomma: sta funzione fa schifo ma non c'è di meglio e non puoi nè permettere nè vietare completamente le modifiche allo scope.\r\n    private static execInScope_DO_NOT_USE(codeStr: string, scope: GObject) {\r\n        return (new Function(...Object.keys(scope), codeStr))(...Object.values(scope));\r\n    }\r\n\r\n    // can modify context in-place, requires \"this\" before variable\r\n    private static evalInContext(js: string, context: GObject): unknown {\r\n        //# Return the results of the in-line anonymous function we .call with the passed context\r\n        return function() { return eval(js); }.call(context);\r\n    }/*\r\n    / *\r\n    // NO: ha 2 problemi: il contesto non è persistente e puoi accedere al contesto solo con \"this\" ma non direttamente usando i nomi delle variabili\r\n    public static evalInContext(contextObj: GObject, code: string): any{\r\n        return U.evalContextFunction.call(contextObj || {}, code);\r\n    }\r\n\r\n    // only create a context for \"this\", wich is bound by .call(), should never be called without .call()\r\n    private static evalContextFunction(code: string): any { eval(code); }\r\n*/\r\n    public static highOrderFunctionExampleTyped<T extends (...args: any[]) => ReturnType<T>>(func: T): (...funcArgs: Parameters<T>) => ReturnType<T> {\r\n        const funcName = (func as any).cname || func.name;\r\n\r\n        // Return a new function that tracks how long the original took\r\n        return (...args: Parameters<T>): ReturnType<T> => {\r\n            console.time(funcName);\r\n            const results = func(...args);\r\n            console.timeEnd(funcName);\r\n            return results; };\r\n    }\r\n\r\n    static asClass<T extends Function>(obj: any, classe: T, elseReturn: T | null = null): null | T { return obj instanceof classe ? obj as any as T: elseReturn; }\r\n    static asString<T>(propKey: unknown, elseReturn: T | null = null): string | null | T { return typeof propKey === 'string' ? propKey : elseReturn; }\r\n    static isString(propKey: unknown): boolean { return typeof propKey === 'string'; }\r\n\r\n    static loadScript(path: string, useEval: boolean = false): void {\r\n        const script = document.createElement('script');\r\n        script.src = path;\r\n        script.type = 'text/javascript';\r\n        Log.eDev(useEval, 'loadScript', 'useEval','useEval todo. potrebbe essere utile per avviare codice fuori dalle funzioni in futuro.');\r\n        document.body.append(script); }\r\n\r\n    static ancestorArray<T extends Element>(domelem: T, stopNode?: Node, includeSelf: boolean = true): Array<T> {\r\n        // [0]=element, [1]=father, [2]=grandfather... [n]=document\r\n        if (domelem === null || domelem === undefined) { return []; }\r\n        const arr = includeSelf ? [domelem] : [];\r\n        let tmp: T = domelem.parentNode as T;\r\n        while (tmp !== null && tmp !== stopNode) {\r\n            arr.push(tmp);\r\n            tmp = tmp.parentNode as T; }\r\n        return arr; }\r\n\r\n    static toHtml<T extends Element>(html: string, container?: Element, containerTag: string = 'div'): T {\r\n        if (!container) { container = document.createElement(containerTag); }\r\n        Log.e(!html || html === '', 'toHtml', 'require a non-empty string', html);\r\n        container.innerHTML = html;\r\n        const ret: T = container.firstChild as any;\r\n        if (ret) container.removeChild(ret);\r\n        return ret; }\r\n\r\n    public static levenshtein(a: string, b: string): number {\r\n        if (!a.length) return b.length;\r\n        if (!b.length) return a.length;\r\n        let cost = (a.charAt(a.length - 1) === b.charAt(b.length - 1)) ? 0 : 1;\r\n        return (window as any).Math.min(\r\n            U.levenshtein(a.substring(0, a.length - 1), b) + 1,\r\n            U.levenshtein(a, b.substring(0, b.length - 1)) + 1,\r\n            U.levenshtein(a.substring(0, a.length - 1), b.substring(0, b.length - 1)) + cost,\r\n        );\r\n    }\r\n\r\n    public static getClosestPropertyName(names: string[], name: string): string {\r\n        let lowest = Infinity;\r\n        return names.reduce(function(previous, current) {\r\n            let distance = U.levenshtein(current, name);\r\n            if (distance < lowest) {\r\n                lowest = distance;\r\n                return current;\r\n            }\r\n            return previous;\r\n        }, '');\r\n    }\r\n    public static getClosestPropertyNames(names: string[], name: string): string[] {\r\n        let distances: {distance: number, value: string}[] = names.map( value => { return {distance: U.levenshtein(value, name), value}; });\r\n        return distances.sort( (a, b) => a.distance - b.distance).map( e => e.value);\r\n    }\r\n\r\n    //todo for console\r\n    public static autoCorrectProxy<T extends GObject>(target: T, recursive: boolean, logger: Console): ProxyHandler<T> {\r\n        return new Proxy(target, {\r\n            get: function(target, name) {\r\n                let namestr = U.asString(name, null);\r\n                if (!namestr) return undefined;\r\n                if (name in target) return target[namestr];\r\n                const suggestions: string[] = U.getClosestPropertyNames(Object.getOwnPropertyNames(target), namestr);\r\n                logger.warn(`${namestr} is not defined, did you meant ${suggestions[0]}?\\t\\nother suggestions:`, suggestions);\r\n                return namestr && target[suggestions[0]];\r\n            },\r\n        });\r\n    }\r\n\r\n    static arrayRemoveAll<T>(arr: Array<T>, elem: T, debug: boolean = false): void {\r\n        let index;\r\n        if (!arr) return;\r\n        while (true) {\r\n            index = arr.indexOf(elem);\r\n            Log.l(debug, 'ArrayRemoveAll: index: ', index, '; arr:', arr, '; elem:', elem);\r\n            if (index === -1) { return; }\r\n            arr.splice(index, 1);\r\n            Log.l(debug, 'ArrayRemoveAll RemovedOne:', arr);\r\n        }\r\n    }\r\n\r\n    static arrayUnique<T>(arr: T[]): Array<T> { return [ ...new Set<T>(arr)]; }\r\n\r\n    static fileReadContent(file: File, callback: (content :string) => void): void {\r\n        const textType = /text.*/;\r\n        try { if (!file.type || file.type.match(textType)) {\r\n            let reader = new FileReader();\r\n            reader.onload = function(e) { callback( '' + reader.result ); };\r\n            reader.readAsText(file);\r\n            return;\r\n        } } catch(e) { Log.e(true, \"Exception while trying to read file as text. Error: |\", e, \"|\", file); }\r\n        Log.e(true, \"Wrong file type found: |\", file ? file.type : null, \"|\", file); }\r\n\r\n    static fileRead(onChange: (e: Event, files: FileList | null, contents?: string[]) => void, extensions: string[] | FileReadTypeEnum[], readContent: boolean): void {\r\n        // $(document).on('change', (e) => console.log(e));\r\n        console.log(\"importEcore: pre file reader\");\r\n        myFileReader.show(onChange, extensions, readContent);\r\n    }\r\n\r\n    public static clear(htmlNode: Element): void {\r\n        if (htmlNode) while (htmlNode.firstChild) { htmlNode.removeChild(htmlNode.firstChild); }\r\n    }\r\n\r\n    static clearAllTimeouts(): void {\r\n        const highestTimeoutId: number = setTimeout(() => {}, 1) as any;\r\n        for (let i = 0 ; i < highestTimeoutId ; i++) { clearTimeout(i); }\r\n    }\r\n\r\n    static getStackTrace(sliceCalls: number = 2): string[] {\r\n        const ret: string | undefined = Error().stack;\r\n        // try { var a = {}; a.debug(); } catch(ex) { ret = ex.stack; }\r\n        // if (Array.isArray(ret)) return ret;\r\n        if (!ret) return ['UnknownStackTrace'];\r\n        const arr: string[] = ret.split('\\n');\r\n        // first 2 entries are \"Erorr\" and \"getStackTrace()\"\r\n        return sliceCalls > 0 ? arr.slice( sliceCalls ) : arr; }\r\n\r\n    // 0 for caller, 1 for caller of caller, -1 for current function, up to -4 to see internal layers (useless)\r\n    public static getCaller(stacksToSkip: number = 0): string {\r\n        const stack: string[] = this.getStackTrace(4);\r\n        // erase getStackTrace() and isFirstTimeCalled() + Error() first stack + n° of layer the caller wants.\r\n        return stack[stacksToSkip]; }\r\n\r\n    private static gotcalledby: Dictionary<string, boolean> = {};\r\n\r\n    // todo: use in Log.once\r\n    // returns true only the first time this line is reached, false in loops >1 loop, false in recursion >1 recursion, false even days after the first execution unless the page is reloaded\r\n    public static isFirstTimeCalledByThisLine(stacksToSkip: number = 0): boolean {\r\n        const caller: string = this.getCaller(stacksToSkip);\r\n        if (U.gotcalledby[caller]) return false;\r\n        return U.gotcalledby[caller] = true; }\r\n\r\n    public static lineKey(): string { return this.getCaller(0); }\r\n\r\n    // Prevent the backspace key from navigating back.\r\n    static preventBackSlashHistoryNavigation(event: JQuery.KeyDownEvent): boolean {\r\n        if (!event || !event.key || event.key.toLowerCase() !== 'backspace') { return true; }\r\n        const types: string[] = ['text', 'password', 'file', 'search', 'email', 'number', 'date',\r\n            'color', 'datetime', 'datetime-local', 'month', 'range', 'search', 'tel', 'time', 'url', 'week'];\r\n        const srcElement: JQuery<any> = $((event as any)['srcElement'] || event.target);\r\n        const disabled = srcElement.prop('readonly') || srcElement.prop('disabled');\r\n        if (!disabled) {\r\n            if (srcElement[0].isContentEditable || srcElement.is('textarea')) { return true; }\r\n            if (srcElement.is('input')) {\r\n                const type = srcElement.attr('type');\r\n                if (!type || types.indexOf(type.toLowerCase()) > -1) { return true; }\r\n            }\r\n        }\r\n        event.preventDefault();\r\n        return false; }\r\n\r\n    static SetMerge<T>(modifyFirst: boolean = true, ...iterables: Iterable<T>[]): Set<T> {\r\n        const set: Set<T> = modifyFirst ? iterables[0] as Set<T>: new Set<T>();\r\n        Log.e(!(set instanceof Set), 'U.SetMerge() used with modifyFirst = true requires the first argument to be a set');\r\n        for (let iterable of iterables) { for (let item of iterable) { set.add(item); } }\r\n        return set; }\r\n\r\n    // merge with unique elements\r\n    static ArrayMergeU(arr1: any[], ...arr2: any[]): void { U.ArrayMerge0(true, arr1, arr2); }\r\n    // merge without unique check\r\n    static ArrayMerge(arr1: any[], ...arr2: any[]): void { U.ArrayMerge0(false, arr1, arr2); }\r\n    // implementation\r\n    static ArrayMerge0(unique: boolean, arrtarget: any[], ...arrays: any[]): void {\r\n        if (!arrtarget || !arrays) return;\r\n\r\n        if (unique) { for (let arri of arrays) for (let e of arri) U.ArrayAdd(arrtarget, e); }\r\n        else { for (let arri of arrays) Array.prototype.push.apply(arrtarget, arri); }\r\n    }\r\n\r\n    static ArrayAdd<T>(arr: Array<T>, elem: T, unique: boolean = true, throwIfContained: boolean = false): boolean {\r\n        Log.ex(!arr || !Array.isArray(arr), 'ArrayAdd arr null or not array:', arr);\r\n        if (!unique) { arr.push(elem); return true; }\r\n        if (arr.indexOf(elem) === -1) { arr.push(elem); return true; }\r\n        Log.ex(throwIfContained, 'ArrayAdd element already contained:', arr, elem);\r\n        return false; }\r\n\r\n\r\n    private static maxID: number = 0;\r\n    public static idPrefix: string = '';\r\n    // static getID(): string { return U.idPrefix + U.maxID++; }\r\n    static getID: Generator<number> = function* idgenerator(): Generator<number> { let i: number = 0; while(true) yield i++; }();\r\n\r\n\r\n    static getType(param: any): string {\r\n        switch (typeof param) {\r\n            default: return typeof param;\r\n            case 'object':\r\n                return (param?.constructor as typeof RuntimeAccessibleClass)?.cname || param?.className || \"{_rawobject_}\";\r\n            case 'function': // and others\r\n                return \"geType for function todo: distinguish betweeen arrow and classic\";\r\n        }\r\n    }\r\n\r\n    static stringCompare(s1: string, s2: string): -1 | 0 | 1 { return (s1 < s2) ? -1 : (s1 > s2) ? 1 : 0; }\r\n\r\n    static endsWith(str: string, suffix: string | string[]): boolean {\r\n        if (Array.isArray(suffix)) {\r\n            for (let suf of suffix) {\r\n                if (U.endsWith(str, suf)) return true;\r\n            }\r\n            return false;\r\n        }\r\n        return str.length >= suffix.length && str.lastIndexOf(suffix) === str.length - suffix.length;\r\n    }\r\n\r\n\r\n    static arrayMergeInPlace<T>(arr1: T[], ...otherArrs: T[][]): T[] {\r\n        for (const arr of otherArrs) arr1.push.apply(arr1, arr || []);\r\n        return arr1; }\r\n\r\n    static getEndingNumber(s: string, ignoreNonNumbers: boolean = false, allowDecimal: boolean = false): number {\r\n        let i = s.length;\r\n        let numberEnd = -1;\r\n        while (--i > 0) {\r\n            if (!isNaN(+s[i])) { if (numberEnd === -1) { numberEnd = i; } continue; }\r\n            if (s[i] === '.' && !allowDecimal) { break; }\r\n            if (s[i] === '.') { allowDecimal = false; continue; }\r\n            if (!ignoreNonNumbers) { break; }\r\n            if (numberEnd !== -1) { ignoreNonNumbers = false; }\r\n        }\r\n        s = numberEnd === -1 ? '1' : s.substring(i, numberEnd);\r\n        return +parseFloat(s); }\r\n\r\n    static increaseEndingNumber(s: string, allowLastNonNumberChars: boolean = false, allowDecimal: boolean = false, increaseWhile?: ((x: string) => boolean)): string {\r\n        let regexpstr = '([0-9]+' + (allowDecimal ? '|[0-9]+\\\\.[0-9]+' : '') + ')' + (allowLastNonNumberChars ? '[^0-9]*' : '') + '$';\r\n        const matches: RegExpExecArray | null = new RegExp(regexpstr, 'g').exec(s); // Global (return multi-match) Single line (. matches \\n).\r\n        // S flag removed for browser support (firefox), should work anyway.\r\n        let prefix: string;\r\n        let num: number;\r\n        if (!matches) {\r\n            prefix = s;\r\n            num = 2;\r\n        } else {\r\n            Log.ex(matches.length > 2, 'parsing error: /' + regexpstr + '/gs.match(' + s + ')');\r\n            let i = s.length - matches[0].length;\r\n            prefix = s.substring(0, i);\r\n            num = 1 + (+matches[1]);\r\n        }\r\n        if (increaseWhile) while (increaseWhile(prefix + num)) { num++; }\r\n        return prefix + num; }\r\n\r\n\r\n    public static shallowEqual(objA: GObject, objB: GObject): boolean {\r\n        if (objA === objB) { return true; }\r\n\r\n        if (!objA || !objB || typeof objA !== 'object' || typeof objB !== 'object') { return false; }\r\n\r\n        var keysA = Object.keys(objA);\r\n        var keysB = Object.keys(objB);\r\n        if (keysA.length !== keysB.length) return false;\r\n\r\n        // if (keysA.length !== keysB.length) { return false; }\r\n        // Test for A's keys different from B.\r\n        // var bHasOwnProperty = hasOwnProperty.bind(objB);\r\n        for (let keya in objA) if (!Object.is(objA[keya], objB[keya])) return false;\r\n\r\n        // for (var i = 0; i < keysA.length; i++) if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) { return false; }\r\n        return true;\r\n    }\r\n\r\n    // returns true only if parameter is already a number by type. UU.isNumber('3') will return false\r\n    static isNumber(o: any): o is number { return typeof o === \"number\" && !isNaN(o); }\r\n\r\n    public static getAllPrototypes(constructor: Constructor, chainoutoutrecursive: GObject[] = [], currentRecursion = 0, maxRecursion = 20, cache: boolean = true): GObject[] {\r\n        // console.log('getAllPrototypes:', {name: constructor.name, currentRecursion, constructor, chainoutoutrecursive});\r\n        if (cache && (constructor as any).__allprototypes) return (constructor as any).__allprototypes;\r\n        let prototype = (constructor.prototype?.name) && constructor.prototype;\r\n        let __proto__ = (constructor.__proto__?.name) && constructor.__proto__;\r\n        if (!prototype && !__proto__ || currentRecursion >= maxRecursion) return chainoutoutrecursive;\r\n        if (prototype) chainoutoutrecursive.push(prototype);\r\n        if (__proto__) chainoutoutrecursive.push(__proto__);\r\n        if (prototype) U.getAllPrototypes(prototype, chainoutoutrecursive, currentRecursion + 1, maxRecursion);\r\n        if (__proto__) U.getAllPrototypes(__proto__, chainoutoutrecursive, currentRecursion + 1, maxRecursion);\r\n        if (cache) (constructor as any).__allprototypes = chainoutoutrecursive;\r\n        return chainoutoutrecursive;\r\n    }\r\n\r\n    public static classIsExtending(subconstructor: Constructor | AbstractConstructor, superconstructor: Constructor | AbstractConstructor): boolean {\r\n        return (superconstructor as typeof DPointerTargetable)?._extends?.includes(subconstructor as any) || false;\r\n        // return U.getAllPrototypes(subconstructor).includes(superconstructor);\r\n    }\r\n\r\n    static isObject(v: GObject|any, returnIfNull: boolean = true, returnIfUndefined: boolean = false, retIfArray: boolean = false): boolean {\r\n        if (v === null) { return returnIfNull; }\r\n        if (v === undefined) { return returnIfUndefined; }\r\n        if (Array.isArray(v)) { return retIfArray; }\r\n        // nb: mind that typeof [] === 'object'\r\n        return typeof v === 'object'; }\r\n\r\n    static objectFromArray<V extends any>(arr: V[], getKey: (entry:V) => string): Dictionary<string, V>{\r\n        // @ts-ignore\r\n        return arr.reduce((acc, val) => { acc[getKey(val)] = val; return acc; }, {});\r\n    }\r\n\r\n    static objectFromArrayValues<T extends any>(arr: (string | number)[], val: T = true as T): Dictionary<string | number, T> {\r\n        // @ts-ignore\r\n        return arr.reduce((acc, val) => { acc[val] = val; return acc; }, {});\r\n        /*let ret: Dictionary = {};\r\n        for (let val of arr) { ret[val] = true; }\r\n        return ret;*/\r\n    }\r\n\r\n    static toBoolString(bool: boolean, ifNotBoolean: boolean = false): string { return bool === true ? 'true' : (bool === false ? 'false' : '' + ifNotBoolean); }\r\n    static fromBoolString<T extends any>(str: string | boolean): boolean;\r\n    static fromBoolString<T extends any>(str: string | boolean, defaultVal?: T): boolean | T;\r\n    static fromBoolString<T extends any>(str: string | boolean, defaultVal?: T, allowNull?: boolean): boolean | null | T;\r\n    static fromBoolString<T extends any>(str: string | boolean, defaultVal: T = false as any, allowNull: boolean = false, allowUndefined: boolean = false): boolean | null | undefined | T {\r\n        str = ('' + str).toLowerCase();\r\n        if (allowNull && (str === 'null')) return null;\r\n        if (allowUndefined && (str === 'undefined')) return undefined;\r\n\r\n        if (str === \"true\" || str === 't' || str === '1') return true;\r\n        // if (defaultVal === true) return str === \"false\" || str === 'f' || str === '0'; // false solo se è esplicitamente false, true se ambiguo.\r\n        if (str === \"false\" || str === 'f' || str === '0') return false;\r\n        return defaultVal;\r\n    }\r\n\r\n    static arrayDifference<T>(starting: T[], final: T[]): {added: T[], removed: T[], starting: T[], final: T[]} {\r\n        let ret: {added: T[], removed: T[], starting: T[], final: T[]} = {} as any;\r\n        ret.starting = starting;\r\n        ret.final = final;\r\n        if (!starting) starting = [];\r\n        if (!final) final = [];\r\n        ret.removed = Uarr.arraySubtract(starting, final, false); // start & !end\r\n        ret.added = Uarr.arraySubtract(final, starting, false); // end & !start\r\n        return ret;\r\n    }\r\n\r\n    // returns <\"what changed from old to neww\"> and in nested objects recursively\r\n    // todo: how can i tell at what point it's the fina lvalue (might be a nestedobj) and up to when it's a delta to follow and unroll?   using __isAdelta:true ?\r\n    // NB: this returns the delta that generates the future. if you want the delta that generate the past one, invert parameter order.\r\n    public static objectDelta<T extends object>(old: T, neww: T, deep: boolean = true): Partial<T>{\r\n        let newwobj: GObject = neww;\r\n        let oldobj: GObject = old;\r\n        if (old === neww) return {};\r\n        let diff = U.objdiff(old, neww); // todo: optimize this, remove the 3 loops below and add those directly in U.objdiff(old, neww, ret); writing inside the obj in third parameter\r\n\r\n        let ret: GObject = {}; // {__isAdelta:true};\r\n        for (let key in diff.added) { ret[key] = newwobj[key]; }\r\n        for (let key in diff.changed) {\r\n            let subold = oldobj[key];\r\n            let subnew = newwobj[key];\r\n            if (typeof subold === typeof subnew && typeof subold === \"object\") { ret[key] = deep ? U.objectDelta(subold, subnew, true) : subnew; }\r\n            else ret[key] = subnew;\r\n        }\r\n        // todo: add to variable naming rules: can't start with \"_-\", like in \"_-keyname\", it means \"keyname\" removed in undo delta\r\n        let removedprefix = \"\"; // \"_-\";\r\n        for (let key in diff.removed) { ret[removedprefix + key] = undefined; } //newwobj[key]; }\r\n        // console.log(\"objdiff\", {old, neww, diff, ret});\r\n        return ret as Partial<T>;\r\n    }\r\n\r\n    // difference react-style. lazy check by === equality field by field. parameters are readonly\r\n    public static objdiff<T extends GObject>(old:T, neww: T): {removed: Partial<T>, added: Partial<T>, changed: Partial<T>, unchanged: Partial<T>} {\r\n        // let ret: GObject = {removed:{}, added:{}, changed:{}};\r\n        let ret: {removed: Partial<T>, added: Partial<T>, changed: Partial<T>, unchanged: Partial<T>}  = {removed:{}, added:{}, changed:{}, unchanged: {}};\r\n        if (!neww && !old) { return ret; }\r\n        if (!neww) { ret.removed = old; return ret; }\r\n        if (!old) { ret.added = neww; return ret; }\r\n        // let oldkeys: string[] = Object.keys(old); let newkeys: string[] = Object.keys(neww);\r\n\r\n        let key: any;\r\n        for (key in old) {\r\n            // if (neww[key] === undefined){\r\n            // if neww have a key with undefined value, it counts (and should) as having that property key defined\r\n            if (!(key in neww)){ (ret.removed as GObject)[key] = old[key]; }\r\n            else if (neww[key] === old[key]) { (ret.unchanged as GObject)[key] = old[key] }\r\n            else (ret.changed as GObject)[key] = old[key];\r\n        }\r\n        for (let key in neww) {\r\n            if (!(key in old)){ (ret.added as GObject)[key] = neww[key]; }\r\n        }\r\n        return ret;\r\n    }\r\n    /*  {a: { b: { c1: 1, c2:2, c3:3 } }, d: 1 }     ---->  {\"a.b.c1\":1, \"a.b.c2\":2, \"a.b.c3\":3. \"d\":1}*/\r\n    public static flattenObjectToRoot(obj: GObject, prefix: string = '', pathseparator: string = '.'): GObject{\r\n        return Object.keys(obj).reduce((acc: GObject, k: string) => {\r\n            const pre = prefix.length ? prefix + pathseparator : '';\r\n            if (typeof obj[k] === 'object') Object.assign(acc, U.flattenObjectToRoot(obj[k], pre + k, pathseparator));\r\n            else acc[pre + k] = obj[k];\r\n            return acc;\r\n        }, {});\r\n    }\r\n\r\n    // from {a:{aa:true, ab:\"ab\"}, b:4} to [\"a.aa = true\", \"a.ab = \\\"ab\\\"\", \"a.b = 4\"]\r\n    // maxkeylength is max length of any individual key, after it it will become: superlongpath --> supe...path\r\n    // maxsubpaths is how many subpaths are displayed at most. after it it will be: super.rea.lly.long.pa.th --> super.rea.pa.th\r\n    public static ObjectToAssignementStrings<R extends {str: string, fullstr: string, path:string[], fullpath:string[], val: string, fullvalue: string, pathlength?: number}>\r\n    (obj: GObject, maxkeylength: number = 10, maxsubpaths: number = 6, maxvallength: number = 20, toolongreplacer: string = \"…\", out?:{best: R}&R[], quotestrings: boolean = true): {best: string}&string[] {\r\n        const pathseparator = \".\";\r\n        const valueseparator = \" = \";\r\n        const filterrow = (rowpaths: string[]) => { return (!rowpaths.includes(\"clonedCounter\") && !rowpaths.includes(\"pointedBy\")); };\r\n        let flatten = U.flattenObjectToRoot(obj, '', pathseparator);\r\n        let i = -1;\r\n        let tmp;\r\n        let ret: {best: string} & string[] = [] as GObject as {best: string} & string[];\r\n        tmp = (maxkeylength - toolongreplacer.length)/2;\r\n        let halfpath = { start: (window as any).Math.floor(tmp), end: (window as any).Math.ceil(tmp) };\r\n        tmp = (maxvallength - toolongreplacer.length)/2;\r\n        let halfval = { start: (window as any).Math.floor(tmp), end: (window as any).Math.ceil(tmp) };\r\n        tmp = (maxsubpaths - toolongreplacer.length)/2;\r\n        let halfsubpaths = { start: (window as any).Math.floor(tmp), end: (window as any).Math.ceil(tmp) };\r\n\r\n\r\n        let bestpathsize = 0;\r\n        let best: R | null = null;\r\n        let countsize = (total: number, arrelem: string): number => total + arrelem.length;\r\n        const filterbest = (row: R) => {\r\n            row.pathlength = row.fullstr.length; // row.fullpath.reduce<number>(countsize, 0);\r\n            if (!best || bestpathsize < row.pathlength && filterrow(row.fullpath)) {\r\n                best = row; bestpathsize = row.pathlength;\r\n                if (out) out.best = best;\r\n                ret.best = best.str;\r\n            }\r\n        }\r\n        console.log(\"u get assignements\", {flatten, obj});\r\n\r\n        for (let key in flatten) {\r\n            let row: R = {fullpath: key.split(pathseparator), fullstr: key} as R;\r\n            // if (!filterrow(row.fullpath)) continue;\r\n            // stringify(undefined) = undefined, so i add + \"\"\r\n            try {\r\n                if (!quotestrings && typeof flatten[key] === \"string\") row.fullvalue = flatten[key];\r\n                else row.fullvalue = JSON.stringify(flatten[key]) + \"\";\r\n            } catch(e) { row.fullvalue = \"⁜not serializable⁜\"; }\r\n            // console.log(\"U get assignements loop\", {row, key, flatten, obj});\r\n            row.val = row.fullvalue.length <= maxvallength ? row.fullvalue : row.fullvalue.substring(0, halfval.start) + toolongreplacer + row.fullvalue.substring(halfval.start);\r\n            if (row.fullpath.length > maxsubpaths) {\r\n                row.path = [...row.fullpath];\r\n                row.path.splice( halfsubpaths.start, row.fullpath.length - halfsubpaths.start - halfsubpaths.end, toolongreplacer);\r\n            } else row.path = row.fullpath;\r\n\r\n            // row.path = row.fullpath.length <= maxsubpaths ? row.fullpath : [...row.fullpath.slice(0, halfsubpaths.start), ...row.fullpath.toomanyarraycopies];\r\n            row.path = row.path.map((p: string) => (p.length <= maxkeylength ? p : p.substring(0, halfpath.start) + toolongreplacer + p.substring(p.length - halfpath.end)));\r\n            if (out) { out.push(row); }\r\n            row.str = row.path.join(pathseparator) + valueseparator + row.val;\r\n            ret.push( row.str );\r\n            filterbest(row);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n\r\n    static download(filename: string = 'nameless.txt', text: string = '', debug: boolean = true): void {\r\n        if (!text) { return; }\r\n        filename = U.toFileName(filename);\r\n        const htmla: HTMLAnchorElement = document.createElement('a');\r\n        const blob: Blob = new Blob([text], {type: 'text/plain', endings: 'native'});\r\n        const blobUrl: string = URL.createObjectURL(blob);\r\n        Log.l(debug, text + '|\\r\\n| <-- rn, |\\n| <--n.');\r\n        htmla.style.display = 'none';\r\n        htmla.href = blobUrl;\r\n        htmla.download = filename;\r\n        document.body.appendChild(htmla);\r\n        htmla.click();\r\n        window.URL.revokeObjectURL(blobUrl);\r\n        document.body.removeChild(htmla); }\r\n\r\n    static formatXml(xml: string): string {\r\n        const reg = /(>)\\s*(<)(\\/*)/g;\r\n        const wsexp = / *(.*) +\\n/g;\r\n        const contexp = /(<.+>)(.+\\n)/g;\r\n        xml = xml.replace(reg, '$1\\n$2$3').replace(wsexp, '$1\\n').replace(contexp, '$1\\n$2');\r\n        const pad: string = '' || '\\t';\r\n        let formatted = '';\r\n        const lines = xml.split('\\n');\r\n        let indent = 0;\r\n        let lastType = 'other';\r\n        // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions\r\n        const transitions: GObject = {\r\n            'single->single': 0,\r\n            'single->closing': -1,\r\n            'single->opening': 0,\r\n            'single->other': 0,\r\n            'closing->single': 0,\r\n            'closing->closing': -1,\r\n            'closing->opening': 0,\r\n            'closing->other': 0,\r\n            'opening->single': 1,\r\n            'opening->closing': 0,\r\n            'opening->opening': 1,\r\n            'opening->other': 1,\r\n            'other->single': 0,\r\n            'other->closing': -1,\r\n            'other->opening': 0,\r\n            'other->other': 0\r\n        };\r\n        let i = 0;\r\n        for (i = 0; i < lines.length; i++) {\r\n            const ln = lines[i];\r\n\r\n            // Luca Viggiani 2017-07-03: handle optional <?xml ... ?> declaration\r\n            if (ln.match(/\\s*<\\?xml/)) {\r\n                formatted += ln + '\\n';\r\n                continue;\r\n            }\r\n            // ---\r\n\r\n            const single = Boolean(ln.match(/<.+\\/>/)); // is this line a single tag? ex. <br />\r\n            const closing = Boolean(ln.match(/<\\/.+>/)); // is this a closing tag? ex. </a>\r\n            const opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)\r\n            const type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';\r\n            const fromTo = lastType + '->' + type;\r\n            lastType = type;\r\n            let padding = '';\r\n\r\n            indent += transitions[fromTo];\r\n            let j: number;\r\n            for (j = 0; j < indent; j++) {\r\n                padding += pad;\r\n            }\r\n            if (fromTo === 'opening->closing') {\r\n                formatted = formatted.substr(0, formatted.length - 1) + ln + '\\n'; // substr removes line break (\\n) from prev loop\r\n            } else {\r\n                formatted += padding + ln + '\\n';\r\n            }\r\n        }\r\n\r\n        return formatted.trim(); }\r\n\r\n\r\n    // https://stackoverflow.com/questions/13861254/json-stringify-deep-objects  implementation with depth\r\n    static circularStringify(obj: GObject, replacer?: null | ((key: string, value: any) => any), space?: string | number, maxDepth_unsupported: number = 100): string {\r\n        const cache: any[] = [];\r\n        return JSON.stringify(obj, (key, value: any) => {\r\n            if (typeof value === 'object' && value !== null) {\r\n                // Duplicate reference found, discard key\r\n                if (cache.includes(value)) return \"[Circular Reference]\"; // might happen both before and after the replacer func\r\n                if (replacer){\r\n                    value = replacer(key, value);\r\n                    if (cache.includes(value)) return \"[Circular Reference]\"; // might happen both before and after the replacer func\r\n                }\r\n                // Store value in our collection\r\n                cache.push(value);\r\n            }\r\n            return value;\r\n        }, space);\r\n    }\r\n\r\n    static getFirstNumber(s: string, allowDecimalDot: boolean = true, allowDecimalComma: boolean = true, valueifmismatch: any = null): number {\r\n        let commamode = (allowDecimalComma ? (allowDecimalDot ?\"(\\\\.|\\\\,)\" : \"\\\\,\") : (allowDecimalDot ? \"\\\\.\" : \"will not use this regex\"));\r\n        let floatregex = new RegExp(\"-?\" + commamode  + \"?\\\\d+(\" + commamode + \"\\\\d{1,2})?\");\r\n        let intregex = /-?\\d+/;\r\n        let ret: any;\r\n        if (allowDecimalDot || allowDecimalComma) ret = floatregex.exec(s);\r\n        else ret = intregex.exec(s);\r\n        ret = ret && ret[0]; // first match\r\n        if (ret === null) return valueifmismatch;\r\n\r\n        let tmpindex:number;\r\n        if (allowDecimalComma) ret = U.replaceAll(ret, \",\", \".\");\r\n        // while (allowDecimalComma && (tmpindex = ret.indexOf(\",\")) !== ret.lastIndexOf(\",\")) ret.substring(tmp+1) // ret.indexOf(.)\r\n        while ((allowDecimalDot || allowDecimalComma) && (tmpindex = ret.indexOf(\".\")) !== ret.lastIndexOf(\".\")) ret = ret.substring(tmpindex+1) // ret.indexOf(.)\r\n        // if (ret[0]===\"-\" && (ret[1]===\",\" || ret[1]===\".\")) ret = \"-0.\"+ret.substring(2); automatically done bu js.    +\"-.5\" = -0.5\r\n        return +ret;\r\n    }\r\n\r\n    // faster than jquery, underscore and many native methods checked https://stackoverflow.com/a/59787784\r\n    public static isEmptyObject(obj: GObject | undefined): boolean {\r\n        for(var i in obj) return false;\r\n        return true;\r\n    }\r\n\r\n    private static pairArrayElementsRepeatFunc<T>(val: T, index: number, arr:T[]): T[]{ return [arr[index], arr[index+1]] }\r\n    private static pairArrayElementsReducerFunc<T>(accumulator: T[][], value: T, index: number, array: T[]):T[][] {\r\n        if (index % 2 === 0) accumulator.push(array.slice(index, index + 2));\r\n        return accumulator; }\r\n\r\n    // from arr[] to arr[][]. if is with repetitions is: [1,2], [2,3], [3,4]... (ret.length = source.length-1)\r\n    // if without repetitions is: [1,2], [3,4].... (ret.length = Math.ceil(source.length/2);\r\n    public static pairArrayElements<T>(arr:T[], withRepetitions:boolean = false):T[][] {\r\n        if (withRepetitions) { return arr.map(U.pairArrayElementsRepeatFunc).slice(0, arr.length-1); }\r\n        return arr.reduce( U.pairArrayElementsReducerFunc as ((accumulator: T[][], value: T, index: number, array: T[]) => T[][]), []); }\r\n\r\n    // removes line // and block /**/ comments  todo: can likely be improved by a regular expression\r\n    public static decomment_all(str: string): string { return this.decomment_line(this.decomment_block(str)); }\r\n    // removes line comments //\r\n    public static decomment_line(str: string, trimLines: boolean = true): string {\r\n        return str\r\n            .split(\"\\n\")\r\n            .map(s=> { let i = s.indexOf(\"//\"); s = (i === -1 ? s : s.substring(i)); return trimLines ? s.trim() : s; } )\r\n            .join(\"\\n\");\r\n    }\r\n    // removes block comments /**/\r\n    public static decomment_block(str: string): string {\r\n        // let maxcomments = 100;\r\n        while(true){\r\n            // if (--maxcomments===0) break;\r\n            let s: number = str.indexOf(\"/*\");\r\n            if (s === -1) break;\r\n            let e: number = str.indexOf(\"*/\", s+1);\r\n            if (e === -1) e = str.length;\r\n            str = str.substring(0, s) + str.substring(e+2);\r\n        }\r\n        return str; }\r\n\r\n    static uppercaseFirstLetter<T extends (string | GObject<\"jsx\">)>(str: T): T {\r\n        if (typeof str !== \"string\") return str;\r\n        return str.charAt(0).toUpperCase() + str.slice(1) as T;\r\n    }\r\n\r\n    // CAREFUL! it's imperfect.\r\n    // Does not handle strings starting with ( that are not ()=> arrow functions\r\n    // or codes whose last chars are () but not in (function)() form\r\n    static wrapUserFunction(str: string): string {\r\n        str = str.trim();\r\n        if (str[0]!=='(' || str.indexOf(\"function\") !== 0) {\r\n            str = \"()=>{\" + str + \"\\n}\"; // last \\n important for line comments //\r\n        }\r\n        if (str[str.length - 2] !== \"(\" || str[str.length - 1] !== \")\") str = \"(\" + str + \")()\";\r\n        return str;\r\n    }\r\n\r\n    // adds ellipsis in the middle of a string to truncate it when it's too long.\r\n    public static stringMiddleCut<T extends boolean | undefined, RET extends string | string[] = T extends true ? string[] : string>\r\n    (str: string, maxLength: number, ellipsisChar: string = '…', asArray?: T): RET{\r\n        if (!str as unknown || maxLength < 0 || str.length <= maxLength) return (asArray ? [str] : str) as RET;\r\n        var midpoint = Math.ceil(str.length / 2);\r\n        var toremove = str.length - maxLength + ellipsisChar.length; // makes room for the additional ellipsis too\r\n        var lstrip = Math.ceil(toremove/2); // left strip is the bigger one if odd chars\r\n        var rstrip = toremove - lstrip;\r\n        if (asArray) return [str.substring(0, midpoint-lstrip), ellipsisChar, str.substring(midpoint+rstrip)] as RET;\r\n        else return str.substring(0, midpoint-lstrip) + ellipsisChar + str.substring(midpoint+rstrip) as RET;\r\n    }\r\n\r\n    // transform grays: if the color is <20% different from gray, transform it instead in black or white, 0 = don't, 1 = always black or white\r\n    public static invertHex(s: string, prefix: string='#', transformGrays: number = 0.2): string {\r\n        if (s.indexOf(prefix) === 0) s = s.substring(prefix.length);\r\n        let r: number, g: number, b: number, h: number | undefined; // might be NaN if parseInt fails\r\n        if (s.length === 3 || s.length === 4) {\r\n            r = parseInt('0x'+s[0]);// works with hex numbers\r\n            g = parseInt('0x'+s[1]);\r\n            b = parseInt('0x'+s[2]);\r\n            h = s.length === 4 ? parseInt('0x'+s[4]) : undefined;\r\n        } else if (s.length === 6 || s.length === 8){\r\n            r = parseInt('0x'+s.substring(0, 2));\r\n            g = parseInt('0x'+s.substring(2, 4));\r\n            b = parseInt('0x'+s.substring(4, 6));\r\n            h = s.length === 8 ? parseInt('0x'+s.substring(6, 8)) : undefined;\r\n        } else return Log.ee(\"cannot invert hex color \" + s + \", invalid length\", {s});\r\n        if (isNaN(r)) return Log.ee(\"cannot invert hex color \" + s +\", invalid red\", {s});\r\n        if (isNaN(g)) return Log.ee(\"cannot invert hex color \" + s +\", invalid green\", {g});\r\n        if (isNaN(b)) return Log.ee(\"cannot invert hex color \" + s +\", invalid blue\", {b});\r\n\r\n        transformGrays = transformGrays * 128;\r\n        r = Math.abs(r-128) <= transformGrays ? (r >= 128 ? 0 : 255) : 255 - r;\r\n        g = Math.abs(g-128) <= transformGrays ? (g >= 128 ? 0 : 255) : 255 - g;\r\n        b = Math.abs(b-128) <= transformGrays ? (b >= 128 ? 0 : 255) : 255 - b;\r\n        if (h || h === 0) h = 255 - h;\r\n\r\n        let rs = r.toString(16);\r\n        if (rs.length === 1) rs = '0'+rs;\r\n        let gs = g.toString(16);\r\n        if (gs.length === 1) gs = '0'+gs;\r\n        let bs = b.toString(16);\r\n        if (bs.length === 1) bs = '0'+bs;\r\n        let hs = h ? h.toString(16) : '';\r\n        if (hs.length === 1) hs = '0'+hs;\r\n\r\n        return (prefix) + rs+gs+bs+hs;\r\n    }\r\n\r\n    public static parentUntil(tagName: string, p: Element | null): Element | null {\r\n        while (p && p.tagName !== tagName) p = p.parentElement;\r\n        return p;\r\n    }\r\n\r\n    static paletteSplit(palette: Readonly<PaletteType>): {\r\n        color: Dictionary<string, PaletteControl>,\r\n        number: Dictionary<string, NumberControl>,\r\n        text: Dictionary<string, StringControl>,\r\n        path: Dictionary<string, PathControl>,\r\n    } {\r\n        type clist = PaletteControl | NumberControl | StringControl | PathControl;\r\n        let ret = {\r\n            color: {} as Dictionary<string, PaletteControl>,\r\n            number: {} as Dictionary<string, NumberControl>,\r\n            text: {} as Dictionary<string, StringControl>,\r\n            path: {} as Dictionary<string, PathControl>,\r\n        } as Dictionary<(clist)[\"type\"], Dictionary<string, any>>;\r\n        for (let entry of Object.entries(palette)) {\r\n            let k = entry[0];\r\n            let v = entry[1];\r\n            ret[(v as clist).type][k] = v;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    static mergeNamedArray<T extends GObject>(ret: T[] & Dictionary<DocString<\"$name\">, T>, classes: T[] & Dictionary<DocString<\"$name\">, T>) {\r\n        for (let key of Object.getOwnPropertyNames(classes)) { // ownPropertyNames skips \"first, last, separator\" created by extending array prototype\r\n            if (key === \"length\") continue;\r\n            if (!isNaN(+key)) ret.push(classes[key]);\r\n            // not else, if a class is named like a number it can be accessed by name until is overwrite by index being reached.\r\n            if (!ret[key]) ret[key] = classes[key];\r\n        }\r\n    }\r\n\r\n    private static prefix = 'ULibrary_';\r\n    private static clipboardinput: HTMLInputElement;\r\n    static async clipboardCopy<T>(text: string, onSuccess:()=>T, onFailure:()=>T): Promise<T> {\r\n        let ret: boolean = false;\r\n        return navigator.clipboard.writeText(text).then(() => {\r\n            ret = true;\r\n            return onSuccess();\r\n        },() => {\r\n            ret = U.clipboardCopy_old(text);\r\n            return ret ? onSuccess() : onFailure();\r\n        });\r\n    }\r\n    static clipboardCopy_old(text: string): boolean {\r\n        try{\r\n        if (!U.clipboardinput) {\r\n            U.clipboardinput = document.createElement('input');\r\n            U.clipboardinput.id = U.prefix + 'CopyDataToClipboard';\r\n            U.clipboardinput.type = 'text';\r\n            U.clipboardinput.style.display = 'block';\r\n            U.clipboardinput.style.position = 'absolute';\r\n            U.clipboardinput.style.top = '-100vh'; }\r\n        document.body.appendChild(U.clipboardinput);\r\n        U.clipboardinput.value = text;\r\n        U.clipboardinput.select();\r\n        if (!document.execCommand) return false;\r\n        let ret = document.execCommand('copy');\r\n        document.body.removeChild(U.clipboardinput);\r\n        U.clearSelection();\r\n        return ret;\r\n        }\r\n        catch(e){ return false; }\r\n    }\r\n\r\n    static clearSelection() {}\r\n\r\n    static toNamedArray<D extends DPointerTargetable, L extends LPointerTargetable>(larr:L[], darr?:D[]): L[] & Dictionary<DocString<\"$name\">, L>{\r\n        if (!darr || darr.length !== larr.length) darr = larr.map(l=>l.__raw as D);\r\n\r\n        for (let i = 0; i < larr.length; i++) if (darr[i] && larr[i]) (larr as GObject)[\"$\"+(darr[i] as GObject).name] = larr[i];\r\n        /*for (let index of Object.getOwnPropertyNames(larr)) { // ownPropertyNames skips \"first, last, separator\" created by extending array prototype\r\n            if (index === \"length\") continue;\r\n            let d = darr[index as any as number];\r\n            let l = larr[index as any as number];\r\n            if (!d || !l) continue;\r\n            (larr as any)[\"$\" + (d as any).name] = l;\r\n        }*/\r\n        return larr as any;\r\n    }\r\n}\r\nexport class DDate{\r\n    static cname: string = \"DDate\";\r\n\r\n    public static addDay(date: Date, offset: number, inplace: boolean): Date {\r\n        const ret: Date = inplace ? date : new Date(date);\r\n        ret.setDate(date.getDate() + offset);\r\n        return ret;\r\n    }\r\n    public static addMonth(date: Date, offset: number, inplace: boolean): Date {\r\n        const ret: Date = inplace ? date : new Date(date);\r\n        ret.setMonth(date.getMonth() + offset);\r\n        return ret;\r\n    }\r\n    public static addYear(date: Date, offset: number, inplace: boolean): Date {\r\n        const ret: Date = inplace ? date : new Date(date);\r\n        ret.setFullYear(date.getFullYear() + offset);\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport class myFileReader {\r\n    private static input: HTMLInputElement = null as any;\r\n    private static fileTypes: string[] = null as any;\r\n    private static onchange: (e: Event) => void = null as any;\r\n    // constructor(onchange: (e: ChangeEvent) => void = null, fileTypes: FileReadTypeEnum[] | string[] = null) { myFileReader.setinfos(fileTypes, onchange); }\r\n    private static setinfos(fileTypes: undefined | FileReadTypeEnum[] | string[], onchange: (e: Event, files: FileList | null, contents: string[] | undefined ) => void, readcontent: boolean) {\r\n        myFileReader.fileTypes = (fileTypes || myFileReader.fileTypes) as string[];\r\n        const debug: boolean = false;\r\n        debug&&console.log('fileTypes:', myFileReader.fileTypes, fileTypes);\r\n        myFileReader.input = document.createElement('input');\r\n        const input: HTMLInputElement = myFileReader.input;\r\n        myFileReader.onchange = function (e: Event): void {\r\n            if (!readcontent) { onchange(e, input.files, undefined); return; }\r\n            let contentObj: Dictionary<number, string> = {};\r\n            let fileLetti: number = 0;\r\n            for (let i: number = 0; input.files && i <input.files.length; i++) {\r\n                const f: File = input.files[i];\r\n                debug&&console.log('filereadContent['+i+']( file:', f, ')');\r\n                U.fileReadContent(f, (content: string) => {\r\n                    debug&&console.log('file['+i+'] read complete. done: ' + ( 1 + fileLetti) + ' / ' + input.files?.length, 'contentObj:', contentObj);\r\n                    contentObj[i] = content; // cannot use array, i'm not sure the callbacks will be called in order. using push is safer but could alter order.\r\n                    // this is last file to read.\r\n                    if (input.files && ++fileLetti === input.files.length) {\r\n                        const contentArr: string[] = [];\r\n                        for (let j: number = 0; j < input.files.length; j++) { contentArr.push(contentObj[j]); }\r\n                        onchange(e, input.files, contentArr);\r\n                    }\r\n                });\r\n            }\r\n        } || myFileReader.onchange;\r\n    }\r\n    private static reset(): void {\r\n        myFileReader.fileTypes = undefined as any;\r\n        myFileReader.onchange = undefined as any;\r\n        myFileReader.input = undefined as any;\r\n    }\r\n    public static show(onChange: (e: Event, files: FileList | null, contents?: string[]) => void, extensions: undefined | string[] | FileReadTypeEnum[] = undefined, readContent: boolean): void {\r\n        console.log(\"importEcore: pre file reader\", myFileReader.input);\r\n        myFileReader.setinfos(extensions, onChange, readContent);\r\n        //if (!myFileReader.input) return;\r\n        myFileReader.input.setAttribute('type', 'file');\r\n        if (myFileReader.fileTypes) {\r\n            myFileReader.input.setAttribute('accept', myFileReader.fileTypes.join(','));\r\n        }\r\n        //console.log('fileTypes:', myFileReader.fileTypes, 'input:', myFileReader.input);\r\n        $(myFileReader.input).on('change.custom' as any, myFileReader.onchange).trigger('click');\r\n        myFileReader.reset();\r\n    }\r\n\r\n}\r\n@RuntimeAccessible('Uarr')\r\nexport class Uarr{\r\n    public static arrayIntersection<T>(arr1: T[], arr2: T[]): T[]{\r\n        if (!arr1 || ! arr2) return null as any;\r\n        return arr1.filter( e => arr2.indexOf(e) >= 0);\r\n    }\r\n\r\n    static arraySubtract(arr1: any[], arr2: any[], inPlace: boolean): any[]{\r\n        let i: number;\r\n        const ret: any[] = inPlace ? arr1 : [...arr1];\r\n        for (i = 0; i < arr2.length; i++) { U.arrayRemoveAll(ret, arr2[i]); }\r\n        return ret; }\r\n\r\n    static equals<T extends any>(a1: T[], a2: T[], deep: boolean): boolean {\r\n        Log.ex(deep, \"deep array comparison is not supported yet\");\r\n        if (!a1 || !a2) return false;\r\n        if (a1.length !== a2.length) return false;\r\n        for (let i = 0; i < a1.length; i++) if (a1[i] !== a2[i]) return false;\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class FocusHistoryEntry {\r\n    static cname: string = \"FocusHistoryEntry\";\r\n    time: Date;\r\n    evt: JQuery.FocusInEvent;\r\n    element: Element;\r\n    constructor(e: JQuery.FocusInEvent, element?: Element, time?: Date) {\r\n        this.evt = e;\r\n        this.element = element || e.target;\r\n        this.time = time || new Date();\r\n    }\r\n}\r\nexport enum ShortDefaultEClasses{\r\n    EObject = \"EObject\",\r\n    EAnnotation = \"EAnnotation\",\r\n    EClass = \"EClass\",\r\n    EPackage = \"EPackage\",\r\n    ENamedElement = \"ENamedElement\",\r\n}\r\nexport enum ShortAttribETypes {\r\n    EVoid = 'EVoid',\r\n    EChar  = 'EChar',\r\n    EString  = 'EString',\r\n    EDate  = 'EDate',\r\n    EBoolean = 'EBoolean',\r\n    EByte  = 'EByte',\r\n    EShort  = 'EShort',\r\n    EInt  = 'EInt',\r\n    ELong  = 'ELong',\r\n    EFloat  = 'EFloat',\r\n    EDouble  = 'EDouble',\r\n    // EDiagnosticChain = \"EDiagnosticChain\", // present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\r\n    /*\r\n  ECharObj  = 'ECharObj',\r\n  EStringObj  = 'EStringObj',\r\n  EDateObj  = 'EDateObj',\r\n  EFloatObj  = 'EFloatObj',\r\n  EDoubleObj  = 'EDoubleObj',\r\n  EBooleanObj = 'EBooleanObj',\r\n  EByteObj  = 'EByteObj',\r\n  EShortObj  = 'EShortObj',\r\n  EIntObj  = 'EIntObj',\r\n  ELongObj  = 'ELongObj',\r\n  EELIST  = 'EELIST',*/\r\n\r\n}\r\nwindoww.ShortAttribETypes = ShortAttribETypes;\r\n\r\nexport const ShortAttribSuperTypes: Dictionary<ShortAttribETypes, ShortAttribETypes[]> = {\r\n    \"EVoid\"    : [],\r\n    \"EChar\"    : [ShortAttribETypes.EString],\r\n    \"EString\"  : [],\r\n    \"EDate\"    : [],\r\n    \"EBoolean\" : [ShortAttribETypes.EByte, ShortAttribETypes.EShort, ShortAttribETypes.EInt, ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EByte\"    : [ShortAttribETypes.EShort, ShortAttribETypes.EInt, ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EShort\"   : [ShortAttribETypes.EInt, ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EInt\"     : [ShortAttribETypes.ELong, ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"ELong\"    : [ShortAttribETypes.EFloat, ShortAttribETypes.EDouble],\r\n    \"EFloat\"   : [ShortAttribETypes.EDouble],\r\n    \"EDouble\"  : []\r\n};\r\nlet ecoreprefix = \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//\";\r\nlet ecoreclasprefix = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//\";\r\nexport function toShortEType(a: AttribETypes): ShortAttribETypes{ return a.substring(ecoreprefix.length) as any; }\r\nexport function toLongEType(a: ShortAttribETypes): AttribETypes {\r\n    return AttribETypes[a];\r\n    // return ecoreprefix + a as any;\r\n}\r\n\r\nexport function toShortEClass(a: DefaultEClasses): ShortDefaultEClasses{ return a.substring(ecoreclasprefix.length) as any; }\r\nexport function toLongEClass(a: ShortDefaultEClasses): DefaultEClasses { return DefaultEClasses[a]; }\r\n\r\nexport class SelectorOutput {\r\n    jqselector!: string;\r\n    attrselector!: string;\r\n    attrRegex!: RegExp;\r\n    exception!: any;\r\n    resultSetAttr!: Attr[];\r\n    resultSetElem!: JQuery<Element>;\r\n}\r\n// compare it with event.key\r\nexport enum Keystrokes {\r\n    clickLeft = 0,\r\n    clickWheel = 1,\r\n    clickRight = 2,\r\n    clickBackMouseButton = 3,\r\n    clickForwardMouseButton = 4,\r\n\r\n    // keyboard\r\n    escape = 'Escape',\r\n    capsLock = 'CapsLock',\r\n    shift = 'Shift',\r\n    tab = 'Tab',\r\n    alt = 'Alt',\r\n    control = 'Control',\r\n    end = 'End',\r\n    home = 'Home',\r\n    pageUp = 'PageUp',\r\n    pageDown = 'PageDown',\r\n    enter = 'Enter', // event.code = 'NumpadEnter' se fatto da numpad, oppure \"numpad3\", \"NumpadMultiply\", ShiftLeft, etc...\r\n    numpadEnter = 'NumpadEnter',\r\n    audioVolumeMute = 'AudioVolumeMute',\r\n    audioVolumeUp = 'AudioVolumeUp',\r\n    audioVolumeDown = 'AudioVolumeDown',\r\n    mediaTrackPrevious = 'MediaTrackPrevious',\r\n    delete = 'Delete', // canc\r\n    backspace = 'Backspace',\r\n    space = ' ',\r\n    altGraph = 'AltGraph',\r\n    arrowLeft = 'ArrowLeft',\r\n    arrowRight = 'ArrowRight',\r\n    arrowUp = 'ArrowUp',\r\n    arrowDown = 'ArrowDown',\r\n    insert = 'Insert',\r\n    f1 = 'F1',\r\n    // weird ones:\r\n    meta = 'Meta', // f1, or other f's with custom binding and windows key\r\n    unidentified = 'Unidentified', // brightness\r\n    __NotReacting__ = 'fn, print, maybe others', // not even triggering event?\r\n}\r\n\r\nexport enum DefaultEClasses{\r\n    EObject = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EObject\",\r\n    EAnnotation = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EAnnotation\",\r\n    EClass = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EClass\",\r\n    EPackage = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//EPackage\",\r\n    ENamedElement = \"ecore:EClass platform:/plugin/org.eclipse.emf.ecore/model/Ecore.ecore#//ENamedElement\",\r\n}\r\nexport enum AttribETypes {\r\n    EVoid = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EVoid', // ??? i invented this.\r\n    EChar = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EChar',\r\n    EString = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString',\r\n    EDate = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate',\r\n    EFloat = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloat',\r\n    EDouble = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble',\r\n    EBoolean = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean',\r\n    EByte = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByte',\r\n    EShort = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShort',\r\n    EInt = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt',\r\n    ELong = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELong',\r\n    // present in uml.ecore, without definition. i guess it's a custom installed package which is commonly used\r\n    // EDiagnosticChain = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDiagnosticChain',\r\n    /*\r\n  ECharObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ECharObject',\r\n  EStringObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EStringObject',\r\n  EDateObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDateObject',\r\n  EFloatObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloatObject',\r\n  EDoubleObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubleObject',\r\n  EBooleanObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObj',\r\n  EByteObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByteObject',\r\n  EShortObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShortObject',\r\n  EIntObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject',\r\n  ELongObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject', */\r\n    // EELIST = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList', // List<E> = List<?>\r\n}\r\n\r\n// export type Json = object;\r\n\r\nexport class ParseNumberOrBooleanOptions{\r\n    defaultValue?: any;\r\n    allowNull?: boolean; nullValue?: any;\r\n    allowUndefined?: boolean; undefinedValue?: any;\r\n    allowedNan?: boolean; nanValue?: any;\r\n    allowBooleans?: boolean; trueValue?: any; falseValue?: any;\r\n    constructor(\r\n        defaultValue: any = null, allowNull: boolean = false, nullValue: any = null,\r\n        allowUndefined: boolean = false, undefinedValue: any = undefined,\r\n        allowedNan: boolean = false, nanValue: any = NaN,\r\n        allowBooleans: boolean = true, trueValue : any = 1, falseValue: any = 0) {\r\n        this.defaultValue = defaultValue; this.allowNull = allowNull; this.nullValue = nullValue;\r\n        this.allowUndefined = allowUndefined; this.undefinedValue = undefinedValue;\r\n        this.allowedNan = allowedNan; this.nanValue = nanValue;\r\n        this.allowBooleans = allowBooleans; this.trueValue = trueValue; this.falseValue = falseValue;\r\n    }\r\n}\r\nexport type LoggerType = \"l\" | \"i\" | \"w\" | \"e\" | \"ex\" | \"eDev\" | \"exDev\";\r\nexport class LoggerCategoryState{\r\n    category: LoggerType;\r\n    time: number;\r\n    raw_args: any[];\r\n    short_string: string;\r\n    long_string: string;\r\n    constructor(args: any[], short_string: string, cat: LoggerType) {\r\n        this.raw_args = args;\r\n        this.time = new Date().getTime();\r\n        this.category = cat;\r\n        this.short_string = short_string;\r\n        this.long_string = '';\r\n        /*\r\n        const maxChars: Dictionary<string, [number, number]> = {\r\n            function: [50, 0],\r\n            object: [100, 0],\r\n            string: [80, 20],\r\n        }\r\n        let ansiConvert = (window as any).ansiConvert;\r\n        if (!ansiConvert) {\r\n            (window as any).ansiconvert = ansiConvert = new Convert();\r\n        }\r\n        for (let a of args){\r\n            let s: string;\r\n            let ta: string = typeof a;\r\n            switch(ta){\r\n                case \"function\": s = a.toString(); break;\r\n                case \"object\":\r\n                    let outstr = U.inspect(a, true, 2, true);\r\n                    outstr = U.replaceAll(ansiConvert.toHtml(outstr), \"style=\\\"color:#FFF\\\"\", \"style=\\\"color:#000\\\"\");\r\n                    let regexpCloseTags = new RegExp(\"(\\\\<span style\\\\=\\\"color\\\\:\\\\#)\", \"gm\");\r\n                    outstr = U.replaceAll( outstr, \"$\", \"£\");\r\n                    outstr = outstr.replace(regexpCloseTags,  \"</span>$1\");\r\n                    outstr = U.replaceAll(outstr, \"£\", \"$\");\r\n                    s = outstr;\r\n                    break;\r\n                default: s = ''+a;\r\n            }\r\n            if (maxChars[ta]) s = U.cropStr(s, maxChars[ta][0], maxChars[ta][1]);\r\n            this.long_string += s;\r\n        }*/\r\n    }\r\n}\r\n@RuntimeAccessible('Log')\r\nexport class Log{\r\n    // public static history: Dictionary<string, Dictionary<string, any[]>> = {}; // history['pe']['key'] = ...parameters\r\n    public static lastError: any[];/*\r\n    public static last_e: LoggerCategoryState[] = [];\r\n    public static last_eDev: LoggerCategoryState[] = [];\r\n    public static last_ex: LoggerCategoryState[] = [];\r\n    public static last_exDev: LoggerCategoryState[] = [];\r\n    public static last_w: LoggerCategoryState[] = [];\r\n    public static last_i: LoggerCategoryState[] = [];*/\r\n    // private static loggerMapping: Dictionary<string, LoggerInterface[]> = {} // takes function name returns logger list\r\n    private static messageMapping: Dictionary<LoggerType, LoggerCategoryState[]> = {\r\n        l: [],\r\n        i: [],\r\n        w: [],\r\n        e: [],\r\n        ex: [],\r\n        eDev: [],\r\n        exDev: [],\r\n    } // takes function name returns log messages list\r\n\r\n\r\n/*\r\n    public static registerLogger(logger: LoggerInterface, triggerAt: (typeof windoww.U.pe) & {name: string, cname:string}) {\r\n        let tname: string = (triggerAt as any).cname || (triggerAt as any).name;\r\n        if (!Log.loggerMapping[tname]) Log.loggerMapping[tname] = [];\r\n        Log.loggerMapping[tname].push(logger);\r\n    }*/\r\n\r\n    static disableConsole(){\r\n        // @ts-ignore\r\n        console['logg'] = console.log;\r\n        console.log = () => {}; }\r\n\r\n    static enableConsole() {\r\n        // @ts-ignore\r\n        if (console['logg']) console.log = console['logg']; }\r\n\r\n    private static log(prefix: string, category: LoggerType, originalFunc: typeof console.log, b: boolean, ...restArgs: any[]): string {\r\n        if (!b) { return ''; }\r\n        const key: string = windoww.U.getCaller(1); // todo: remove replace heavy fumc\r\n        if (restArgs === null || restArgs === undefined) { restArgs = []; }\r\n        let str = key + ': ';\r\n        for (let i = 0; i < restArgs.length; i++) {\r\n            // console.log(prefix, {i, restArgs, curr:restArgs[i]});\r\n            str += '' +\r\n                (typeof restArgs[i] === 'symbol' ?\r\n                    '' + String(restArgs[i]) :\r\n                    restArgs[i])\r\n                + '\\t\\r\\n'; }\r\n        Log.updateLoggerComponent(category, restArgs, str, category);\r\n        // merged loggers if (Log.loggerMapping[category]) for (const logger of Log.loggerMapping[category]) { logger.log(category, key, restArgs, str); }\r\n        originalFunc(key, ...restArgs);\r\n        return '[' + prefix + ']' + str; }\r\n\r\n    public static e(b: boolean, ...restArgs: any[]): string {\r\n        if (!b) return '';\r\n        const str = Log.log('Error', 'e', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        return str;\r\n        // throw new Error(str);\r\n    }\r\n\r\n    public static eDev(b: boolean, ...restArgs: any[]): string {\r\n        if (!b) return '';\r\n        const str = Log.log('Dev Error','eDev', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        return str;\r\n        // throw new Error(str);\r\n    }\r\n\r\n    public static ex(b: boolean, ...restArgs: any[]): null | never | any {\r\n        if (!b) return null;\r\n        const str = Log.log('Error', 'e', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        windoww.ee = restArgs;\r\n        windoww.e1 = restArgs[1];\r\n        throw new MyError(str, ...restArgs); }\r\n\r\n    public static exDev(b: boolean, ...restArgs: any[]): null | never | any {\r\n        if (!b) return null;\r\n        const str = Log.log('Dev Error','eDev', console.error, b, ...restArgs);\r\n        Log.lastError = restArgs;\r\n        windoww.ee = restArgs;\r\n        windoww.e1 = restArgs[1];\r\n        throw new MyError(str, ...restArgs); }\r\n\r\n    public static i(b: boolean, ...restArgs: any[]): string | null {\r\n        if (!b) return null;\r\n        return Log.log('Info', 'i', console.log, b, ...restArgs);\r\n    }\r\n    public static _loggerComponent: any = undefined as any;\r\n    private static get_loggercomponent(): any { return Log._loggerComponent; }\r\n    private static updateLoggerComponent(type: LoggerType, args: any[], short_str: string, cat: LoggerType): void {\r\n        let c = Log.get_loggercomponent();\r\n        let update: LoggerCategoryState = new LoggerCategoryState(args, short_str, cat);\r\n        Log.messageMapping[type].push(update);\r\n        // (Log as GObject)[\"last_\"+type].push(args);\r\n        if (!c) return;\r\n        c.setState({[type+\"_counter\"]: c.state[type+\"_counter\"]+1}); // so it doesn't pass through redux\r\n    }\r\n    public static l(b: boolean, ...restArgs: any[]): string | null {\r\n        if (!b) return null;\r\n        return Log.log('Log', 'l', console.log, b, ...restArgs);\r\n    }\r\n    public static w(b: boolean, ...restArgs: any[]): string | null {\r\n        if (!b) return null;\r\n        return Log.log('Warn', 'w', console.warn, b, ...restArgs); }\r\n\r\n\r\n    public static eDevv<T extends any = any>(firstParam?: NotBool<T>, ...restAgs: any): string { return Log.eDev(true, ...[firstParam, ...restAgs]); }\r\n    public static ee(...restAgs: any): string { return Log.e(true, ...restAgs); }\r\n    public static exDevv<T extends any = any>(firstParam?: NotBool<T>, ...restAgs: any): never | any { return Log.exDev(true, ...[firstParam, ...restAgs]); }\r\n    public static exx(...restAgs: any): never | any { return Log.ex(true, ...restAgs); }\r\n    public static ii(...restAgs: any): string { return Log.i(true, ...restAgs) as string; }\r\n    public static ll(...restAgs: any): string { return Log.l(true, ...restAgs) as string; }\r\n    public static ww(...restAgs: any): string { return Log.w(true, ...restAgs) as string; }\r\n}\r\n\r\ntype NotBool<T> = Exclude<T, boolean>;\r\n/*\r\ninterface LoggerInterface{\r\n    log: (category: string, key: string, data: any[], fullconcat?: string, stringified?: string) => any;\r\n}*/\r\n\r\n\r\n\r\nexport class FileReadTypeEnum {\r\n    public static image: FileReadTypeEnum = \"image/*\" as any;\r\n    public static audio: FileReadTypeEnum = \"audio/*\" as any;\r\n    public static video: FileReadTypeEnum = \"video/*\" as any;\r\n    /// a too much huge list https://www.iana.org/assignments/media-types/media-types.xhtml\r\n    public static AndManyOthersButThereAreTooMuch: string = \"And many others... https://www.iana.org/assignments/media-types/media-types.xhtml\";\r\n    public static OrJustPutFileExtension: string = \"OrJustPutFileExtension\";\r\n}\r\n\r\n// console.info('loaded ts U');\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}