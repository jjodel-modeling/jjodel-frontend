{"ast":null,"code":"import _slicedToArray from \"C:/d/Programming/web/jodel-mde/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useEffect, useState } from 'react';\nimport { useEventCallback, useEventListener } from '..';\nfunction useSessionStorage(key, initialValue) {\n  var readValue = useCallback(function () {\n    if (typeof window === 'undefined') {\n      return initialValue;\n    }\n    try {\n      var item = window.sessionStorage.getItem(key);\n      return item ? parseJSON(item) : initialValue;\n    } catch (error) {\n      console.warn(\"Error reading sessionStorage key \\u201C\".concat(key, \"\\u201D:\"), error);\n      return initialValue;\n    }\n  }, [initialValue, key]);\n  var _useState = useState(readValue),\n    _useState2 = _slicedToArray(_useState, 2),\n    storedValue = _useState2[0],\n    setStoredValue = _useState2[1];\n  var setValue = useEventCallback(function (value) {\n    if (typeof window == 'undefined') {\n      console.warn(\"Tried setting sessionStorage key \\u201C\".concat(key, \"\\u201D even though environment is not a client\"));\n    }\n    try {\n      var newValue = value instanceof Function ? value(storedValue) : value;\n      window.sessionStorage.setItem(key, JSON.stringify(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new Event('session-storage'));\n    } catch (error) {\n      console.warn(\"Error setting sessionStorage key \\u201C\".concat(key, \"\\u201D:\"), error);\n    }\n  });\n  useEffect(function () {\n    setStoredValue(readValue());\n  }, []);\n  var handleStorageChange = useCallback(function (event) {\n    if ((event === null || event === void 0 ? void 0 : event.key) && event.key !== key) {\n      return;\n    }\n    setStoredValue(readValue());\n  }, [key, readValue]);\n  useEventListener('storage', handleStorageChange);\n  useEventListener('session-storage', handleStorageChange);\n  return [storedValue, setValue];\n}\nexport default useSessionStorage;\nfunction parseJSON(value) {\n  try {\n    return value === 'undefined' ? undefined : JSON.parse(value !== null && value !== void 0 ? value : '');\n  } catch (_a) {\n    console.log('parsing error on', {\n      value: value\n    });\n    return undefined;\n  }\n}","map":{"version":3,"names":["useCallback","useEffect","useState","useEventCallback","useEventListener","useSessionStorage","key","initialValue","readValue","window","item","sessionStorage","getItem","parseJSON","error","console","warn","concat","_useState","_useState2","_slicedToArray","storedValue","setStoredValue","setValue","value","newValue","Function","setItem","JSON","stringify","dispatchEvent","Event","handleStorageChange","event","undefined","parse","_a","log"],"sources":["C:/d/Programming/web/jodel-mde/node_modules/usehooks-ts/dist/esm/useSessionStorage/useSessionStorage.js"],"sourcesContent":["import { useCallback, useEffect, useState, } from 'react';\nimport { useEventCallback, useEventListener } from '..';\nfunction useSessionStorage(key, initialValue) {\n    const readValue = useCallback(() => {\n        if (typeof window === 'undefined') {\n            return initialValue;\n        }\n        try {\n            const item = window.sessionStorage.getItem(key);\n            return item ? parseJSON(item) : initialValue;\n        }\n        catch (error) {\n            console.warn(`Error reading sessionStorage key “${key}”:`, error);\n            return initialValue;\n        }\n    }, [initialValue, key]);\n    const [storedValue, setStoredValue] = useState(readValue);\n    const setValue = useEventCallback(value => {\n        if (typeof window == 'undefined') {\n            console.warn(`Tried setting sessionStorage key “${key}” even though environment is not a client`);\n        }\n        try {\n            const newValue = value instanceof Function ? value(storedValue) : value;\n            window.sessionStorage.setItem(key, JSON.stringify(newValue));\n            setStoredValue(newValue);\n            window.dispatchEvent(new Event('session-storage'));\n        }\n        catch (error) {\n            console.warn(`Error setting sessionStorage key “${key}”:`, error);\n        }\n    });\n    useEffect(() => {\n        setStoredValue(readValue());\n    }, []);\n    const handleStorageChange = useCallback((event) => {\n        if ((event === null || event === void 0 ? void 0 : event.key) && event.key !== key) {\n            return;\n        }\n        setStoredValue(readValue());\n    }, [key, readValue]);\n    useEventListener('storage', handleStorageChange);\n    useEventListener('session-storage', handleStorageChange);\n    return [storedValue, setValue];\n}\nexport default useSessionStorage;\nfunction parseJSON(value) {\n    try {\n        return value === 'undefined' ? undefined : JSON.parse(value !== null && value !== void 0 ? value : '');\n    }\n    catch (_a) {\n        console.log('parsing error on', { value });\n        return undefined;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}